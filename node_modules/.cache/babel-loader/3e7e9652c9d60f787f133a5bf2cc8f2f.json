{"ast":null,"code":"import moment from \"moment\";\nimport { toast } from \"react-toastify\";\nimport { postLoginInstance } from \"../../utils\";\nimport { API_LIMIT, START_PAGE } from \"../../utils/Constant\";\nimport { calculateTotalPageCount } from \"../../utils/ReusableFunctions\";\nexport const getSettlementReportApi = function (ctx, selectedTab, fromDate, toDate, franchiseId) {\n  let page = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : START_PAGE;\n  let data = new URLSearchParams();\n  data.append(\"start\", page * API_LIMIT || START_PAGE);\n  data.append(\"limit\", API_LIMIT);\n  data.append(\"conditions\", JSON.stringify([]));\n  data.append(\"sorts\", JSON.stringify([]));\n  data.append(\"send_settled_data\", selectedTab == 30 ? false : true);\n  data.append(\"start_date\", fromDate);\n  data.append(\"end_date\", toDate);\n  data.append(\"franchise_id\", franchiseId);\n  return postLoginInstance.post(\"commerce/reporting/get-settlement-report\", data).then(res => {\n    if (!res.data.error) {\n      ctx.setState({\n        settlementReport: res.data.data.results,\n        settlementData: res.data.data.settlement_aggregate\n      });\n    } else {\n      toast.error(res.data.message || \"Something went wrong\");\n    }\n  }).catch(error => {\n    toast.error(error.message || \"Something went wrong\");\n  });\n};\nexport const settleFranchaiseApi = (data, handleClose) => {\n  return postLoginInstance.post(\"commerce/reporting/settle-with-franchise\", data).then(res => {\n    if (!res.data.error) {\n      handleClose();\n    } else {\n      toast.error(res.data.message || \"Something went wrong\");\n    }\n  }).catch(error => {\n    toast.error(error.message || \"Something went wrong\");\n  });\n};\nexport const getReportsFranchiseWiseApi = (data, ctx) => {\n  return postLoginInstance.post(\"commerce/reporting/get-revenue-report-franchise-wise\", data).then(res => {\n    if (!res.data.error) {\n      console.log(\"res\", res);\n      ctx.setState({\n        reportData: res.data.data.revenue_data\n      });\n    } else {\n      toast.error(res.data.message || \"Something went wrong\");\n    }\n  }).catch(error => {\n    toast.error(error.message || \"Something went wrong\");\n  });\n};\nexport const getOrderRevenueReportApi = (data, ctx) => {\n  return postLoginInstance.post(\"commerce/reporting/get-order-and-revenue-report\", data).then(res => {\n    if (!res.data.error) {\n      console.log(\"res\", res);\n      ctx.setState({\n        orderRevenueReport: res.data.data\n      });\n    } else {\n      toast.error(res.data.message || \"Something went wrong\");\n    }\n  }).catch(error => {\n    toast.error(error.message || \"Something went wrong\");\n  });\n};","map":{"version":3,"sources":["/opt/projects/loch-dashboard/src/app/settlement/Api.js"],"names":["moment","toast","postLoginInstance","API_LIMIT","START_PAGE","calculateTotalPageCount","getSettlementReportApi","ctx","selectedTab","fromDate","toDate","franchiseId","page","data","URLSearchParams","append","JSON","stringify","post","then","res","error","setState","settlementReport","results","settlementData","settlement_aggregate","message","catch","settleFranchaiseApi","handleClose","getReportsFranchiseWiseApi","console","log","reportData","revenue_data","getOrderRevenueReportApi","orderRevenueReport"],"mappings":"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","sourcesContent":["import moment from \"moment\";\nimport { toast } from \"react-toastify\";\nimport { postLoginInstance } from \"../../utils\";\nimport { API_LIMIT, START_PAGE } from \"../../utils/Constant\";\nimport { calculateTotalPageCount } from \"../../utils/ReusableFunctions\";\n\nexport const getSettlementReportApi = (\n  ctx,\n  selectedTab,\n  fromDate,\n  toDate,\n  franchiseId,\n  page = START_PAGE\n) => {\n  let data = new URLSearchParams();\n  data.append(\"start\", page * API_LIMIT || START_PAGE);\n  data.append(\"limit\", API_LIMIT);\n  data.append(\"conditions\", JSON.stringify([]));\n  data.append(\"sorts\", JSON.stringify([]));\n  data.append(\"send_settled_data\", selectedTab == 30 ? false : true);\n  data.append(\"start_date\", fromDate);\n  data.append(\"end_date\", toDate);\n  data.append(\"franchise_id\", franchiseId);\n\n  return postLoginInstance\n    .post(\"commerce/reporting/get-settlement-report\", data)\n    .then((res) => {\n      if (!res.data.error) {\n        ctx.setState({\n          settlementReport: res.data.data.results,\n          settlementData: res.data.data.settlement_aggregate,\n        });\n      } else {\n        toast.error(res.data.message || \"Something went wrong\");\n      }\n    })\n    .catch((error) => {\n      toast.error(error.message || \"Something went wrong\");\n    });\n};\n\nexport const settleFranchaiseApi = (data, handleClose) => {\n  return postLoginInstance\n    .post(\"commerce/reporting/settle-with-franchise\", data)\n    .then((res) => {\n      if (!res.data.error) {\n        handleClose();\n      } else {\n        toast.error(res.data.message || \"Something went wrong\");\n      }\n    })\n    .catch((error) => {\n      toast.error(error.message || \"Something went wrong\");\n    });\n};\n\nexport const getReportsFranchiseWiseApi = (data, ctx) => {\n  return postLoginInstance\n    .post(\"commerce/reporting/get-revenue-report-franchise-wise\", data)\n    .then((res) => {\n      if (!res.data.error) {\n        console.log(\"res\", res);\n        ctx.setState({\n          reportData: res.data.data.revenue_data,\n        });\n      } else {\n        toast.error(res.data.message || \"Something went wrong\");\n      }\n    })\n    .catch((error) => {\n      toast.error(error.message || \"Something went wrong\");\n    });\n};\n\nexport const getOrderRevenueReportApi = (data, ctx) => {\n  return postLoginInstance\n    .post(\"commerce/reporting/get-order-and-revenue-report\", data)\n    .then((res) => {\n      if (!res.data.error) {\n        console.log(\"res\", res);\n        ctx.setState({\n          orderRevenueReport: res.data.data,\n        });\n      } else {\n        toast.error(res.data.message || \"Something went wrong\");\n      }\n    })\n    .catch((error) => {\n      toast.error(error.message || \"Something went wrong\");\n    });\n};\n"]},"metadata":{},"sourceType":"module"}