{"ast":null,"code":"import { toast } from \"react-toastify\";\nimport { postLoginInstance } from \"../../utils\";\nimport { API_LIMIT } from \"../../utils/Constant\"; // import { getCustomerDetailsApi } from \"../customers/Api\";\n\nexport const getAllVehiclesApi = (ctx, optionData) => {\n  // console.log('ctx',ctx);\n  const {\n    searchText,\n    searchKey,\n    conditions\n  } = ctx.state;\n  let data = new URLSearchParams();\n  data.append(\"start\", (ctx.state.page - 1) * API_LIMIT);\n  data.append(\"limit\", API_LIMIT);\n  data.append(\"conditions\", JSON.stringify(searchText ? [{\n    key: searchKey,\n    value: searchText\n  }] : conditions ? conditions : []));\n  data.append(\"sorts\", JSON.stringify([]));\n  postLoginInstance.post(\"/offering/vehicle/search-vehicle\", data).then(res => {\n    if (!res.data.error) {\n      if (optionData) {\n        const bikeOptions = res.data.data.data.results.map(item => ({\n          value: item.id,\n          label: item.name\n        }));\n        ctx.setState({\n          bikeOptions\n        });\n      } else {\n        ctx.setState({\n          vehiclesList: res.data.data.data.results,\n          totalPages: Math.ceil(res.data.data.data.totalCount / API_LIMIT)\n        });\n      }\n    } else {\n      toast.error(res.data.message || \"Something went wrong\");\n    }\n  }).catch(err => {\n    console.log(\"Catch\", err);\n  });\n};\nexport const getAllBikeModelsDropdownApi = ctx => {\n  let data = new URLSearchParams();\n  data.append(\"start\", 0);\n  data.append(\"limit\", 1000);\n  data.append(\"conditions\", JSON.stringify([]));\n  data.append(\"sorts\", JSON.stringify([]));\n  postLoginInstance.post(\"/offering/vehicle/search-vehicle-model\", data).then(res => {\n    if (!res.data.error) {\n      const bikeModelOptions = res.data.data.data.results.map(item => ({\n        value: item.id,\n        label: item.modelName,\n        noOfBatteries: item.noOfBatteries\n      }));\n      ctx.setState({\n        bikeModelOptions\n      });\n    } else {\n      toast.error(res.data.message || \"Something went wrong\");\n    }\n  }).catch(err => {\n    console.log(\"Catch\", err);\n  });\n};\nexport const getAllVehiclesDropdownApi = ctx => {\n  let data = new URLSearchParams();\n  data.append(\"start\", 0);\n  data.append(\"limit\", -1);\n  data.append(\"conditions\", JSON.stringify([{\n    key: \"SEARCH_BY_ACCOUNT_ID\",\n    value: ctx.state.dealer\n  }]));\n  data.append(\"sorts\", JSON.stringify([]));\n  postLoginInstance.post(\"/offering/vehicle/search-vehicle\", data).then(res => {\n    if (!res.data.error) {\n      const vehicleOptions = res.data.data.data.results.map(item => ({\n        value: item.id,\n        label: item.chassisNo\n      }));\n      ctx.setState({\n        vehicleOptions\n      });\n    } else {\n      toast.error(res.data.message || \"Something went wrong\");\n    }\n  }).catch(err => {\n    console.log(\"Catch\", err);\n  });\n};\nexport const getAllIotDropdownApi = ctx => {\n  postLoginInstance.post(\"/offering/telematics/get-all-telematics\").then(res => {\n    if (!res.data.error) {\n      const iotOptions = res.data.data.iot_devices.map(item => ({\n        value: item.id,\n        label: item.serialNo\n      }));\n      ctx.setState({\n        iotOptions\n      });\n    } else {\n      toast.error(res.data.message || \"Something went wrong\");\n    }\n  }).catch(err => {\n    console.log(\"Catch\", err);\n  });\n};\nexport const getAllBatteriesDropdownApi = ctx => {\n  let data = new URLSearchParams();\n  data.append(\"start\", 0);\n  data.append(\"limit\", -1);\n  data.append(\"conditions\", JSON.stringify([]));\n  data.append(\"sorts\", JSON.stringify([]));\n  postLoginInstance.post(\"/offering/battery/search-battery\", data).then(res => {\n    if (!res.data.error) {\n      const batteryOptions = res.data.data.batteries.results.map(item => ({\n        value: item.id,\n        label: item.serialNo\n      }));\n      ctx.setState({\n        batteryOptions\n      });\n    } else {\n      toast.error(res.data.message || \"Something went wrong\");\n    }\n  }).catch(err => {\n    console.log(\"Catch\", err);\n  });\n};\nexport const addUpdateVehicleApi = (data, cb) => {\n  return postLoginInstance.post(\"/offering/vehicle/add-update-vehicle\", data).then(res => {\n    if (!res.data.error) {\n      cb();\n      toast.success(res.data.message || \"Something went wrong\");\n    } else {\n      toast.error(res.data.message || \"Something went wrong\");\n    }\n  }).catch(err => {\n    toast.error(err.message || \"Something went wrong\");\n  });\n};\nexport const getAllAccounts = (ctx, accountType, stateKey) => {\n  let data = new URLSearchParams();\n  data.append(\"start\", 0);\n  data.append(\"limit\", 5000);\n  data.append(\"conditions\", JSON.stringify([{\n    key: \"SEARCH_BY_TYPE\",\n    value: accountType,\n    context: null\n  }]));\n  data.append(\"sorts\", JSON.stringify([]));\n  postLoginInstance.post(\"/organisation/user/search-accounts\", data).then(res => {\n    if (!res.data.error) {\n      const options = res.data.data.results.map(item => ({\n        value: item.id,\n        label: item.name\n      }));\n      ctx.setState({\n        [stateKey]: options\n      });\n    } else {\n      toast.error(res.data.message || \"Something went wrong\");\n    }\n  }).catch(err => {\n    console.log(\"Catch\", err);\n  });\n};\nexport const updateVehicleRegistrationApi = (ctx, data, cb) => {\n  // console.log('ctx.state.customerData', ctx);\n  postLoginInstance.post(\"offering/vehicle/update-vehicle-registration\", data).then(res => {\n    toast.success(res.data.message); // console.log('res.data.vehicle', res.data.data.vehicle);\n\n    cb(res.data.data.vehicle); // ctx.props.handleClose();\n    // getCustomerDetailsApi(ctx.state.customerData.id, ctx)\n  }).catch(err => {\n    console.log(\"Catch\", err);\n  });\n};\nexport const assignVehiclesToFranchiseApi = (data, cb, ctx) => {\n  postLoginInstance.post(\"offering/vehicle/assign-vehicles-to-franchise\", data).then(res => {\n    if (!res.data.error) {\n      toast.success(res.data.message);\n      cb();\n      getAllVehiclesApi(ctx, false);\n    } else {\n      toast.error(res.data.message || \"Something went wrong\");\n    }\n  }).catch(err => {\n    console.log(\"Catch\", err);\n  });\n};\nexport const removeVehiclesToFranchiseApi = (data, cb, ctx) => {\n  postLoginInstance.post(\"offering/vehicle/remove-vehicles-from-franchise\", data).then(res => {\n    if (!res.data.error) {\n      toast.success(res.data.message);\n      cb();\n      getAllVehiclesApi(ctx, false);\n    } else {\n      toast.error(res.data.message || \"Something went wrong\");\n    }\n  }).catch(err => {\n    console.log(\"Catch\", err);\n  });\n};\nexport const assignVehiclesToFranchiseLocationApi = (data, cb, ctx) => {\n  // console.log('ctx',ctx);\n  postLoginInstance.post(\"offering/vehicle/add-update-vehicle-franchise-location\", data).then(res => {\n    if (!res.data.error) {\n      toast.success(res.data.message);\n      cb();\n      getAllVehiclesApi(ctx);\n    } else {\n      toast.error(res.data.message || \"Something went wrong\");\n    }\n  }).catch(err => {\n    console.log(\"Catch\", err);\n  });\n};\nexport const removeVehiclesFromFranchiseLocationApi = (data, cb, ctx) => {\n  postLoginInstance.post(\"offering/vehicle/remove-vehicle-franchise-location\", data).then(res => {\n    if (!res.data.error) {\n      toast.success(res.data.message);\n      cb();\n      getAllVehiclesApi(ctx, false);\n    } else {\n      toast.error(res.data.message || \"Something went wrong\");\n    }\n  }).catch(err => {\n    console.log(\"Catch\", err);\n  });\n};\nexport const updateStatusApi = (data, cb) => {\n  postLoginInstance.post(\"offering/vehicle/update-vehicle-status\", data).then(res => {\n    if (!res.data.error) {\n      toast.success(res.data.message);\n      cb();\n    } else {\n      toast.error(res.data.message || \"Something went wrong\");\n    }\n  }).catch(err => {\n    console.log(\"Catch\", err);\n  });\n};","map":{"version":3,"sources":["/opt/projects/loch-dashboard/src/app/vehicles/Api.js"],"names":["toast","postLoginInstance","API_LIMIT","getAllVehiclesApi","ctx","optionData","searchText","searchKey","conditions","state","data","URLSearchParams","append","page","JSON","stringify","key","value","post","then","res","error","bikeOptions","results","map","item","id","label","name","setState","vehiclesList","totalPages","Math","ceil","totalCount","message","catch","err","console","log","getAllBikeModelsDropdownApi","bikeModelOptions","modelName","noOfBatteries","getAllVehiclesDropdownApi","dealer","vehicleOptions","chassisNo","getAllIotDropdownApi","iotOptions","iot_devices","serialNo","getAllBatteriesDropdownApi","batteryOptions","batteries","addUpdateVehicleApi","cb","success","getAllAccounts","accountType","stateKey","context","options","updateVehicleRegistrationApi","vehicle","assignVehiclesToFranchiseApi","removeVehiclesToFranchiseApi","assignVehiclesToFranchiseLocationApi","removeVehiclesFromFranchiseLocationApi","updateStatusApi"],"mappings":"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","sourcesContent":["import { toast } from \"react-toastify\";\nimport { postLoginInstance } from \"../../utils\";\nimport { API_LIMIT } from \"../../utils/Constant\";\n// import { getCustomerDetailsApi } from \"../customers/Api\";\n\nexport const getAllVehiclesApi = (ctx, optionData) => {\n  // console.log('ctx',ctx);\n  const { searchText, searchKey, conditions } = ctx.state;\n  let data = new URLSearchParams();\n  data.append(\"start\", (ctx.state.page - 1) * API_LIMIT);\n  data.append(\"limit\", API_LIMIT);\n  data.append(\n    \"conditions\",\n    JSON.stringify(\n      searchText\n        ? [{ key: searchKey, value: searchText }]\n        : conditions\n        ? conditions\n        : []\n    )\n  );\n  data.append(\"sorts\", JSON.stringify([]));\n  postLoginInstance\n    .post(\"/offering/vehicle/search-vehicle\", data)\n    .then((res) => {\n      if (!res.data.error) {\n        if (optionData) {\n          const bikeOptions = res.data.data.data.results.map((item) => ({\n            value: item.id,\n            label: item.name,\n          }));\n          ctx.setState({\n            bikeOptions,\n          });\n        } else {\n          ctx.setState({\n            vehiclesList: res.data.data.data.results,\n            totalPages: Math.ceil(res.data.data.data.totalCount / API_LIMIT),\n          });\n        }\n      } else {\n        toast.error(res.data.message || \"Something went wrong\");\n      }\n    })\n    .catch((err) => {\n      console.log(\"Catch\", err);\n    });\n};\n\nexport const getAllBikeModelsDropdownApi = (ctx) => {\n  let data = new URLSearchParams();\n  data.append(\"start\", 0);\n  data.append(\"limit\", 1000);\n  data.append(\"conditions\", JSON.stringify([]));\n  data.append(\"sorts\", JSON.stringify([]));\n  postLoginInstance\n    .post(\"/offering/vehicle/search-vehicle-model\", data)\n    .then((res) => {\n      if (!res.data.error) {\n        const bikeModelOptions = res.data.data.data.results.map((item) => ({\n          value: item.id,\n          label: item.modelName,\n          noOfBatteries: item.noOfBatteries,\n        }));\n        ctx.setState({\n          bikeModelOptions,\n        });\n      } else {\n        toast.error(res.data.message || \"Something went wrong\");\n      }\n    })\n    .catch((err) => {\n      console.log(\"Catch\", err);\n    });\n};\n\nexport const getAllVehiclesDropdownApi = (ctx) => {\n  let data = new URLSearchParams();\n  data.append(\"start\", 0);\n  data.append(\"limit\", -1);\n  data.append(\n    \"conditions\",\n    JSON.stringify([{ key: \"SEARCH_BY_ACCOUNT_ID\", value: ctx.state.dealer }])\n  );\n  data.append(\"sorts\", JSON.stringify([]));\n  postLoginInstance\n    .post(\"/offering/vehicle/search-vehicle\", data)\n    .then((res) => {\n      if (!res.data.error) {\n        const vehicleOptions = res.data.data.data.results.map((item) => ({\n          value: item.id,\n          label: item.chassisNo,\n        }));\n        ctx.setState({\n          vehicleOptions,\n        });\n      } else {\n        toast.error(res.data.message || \"Something went wrong\");\n      }\n    })\n    .catch((err) => {\n      console.log(\"Catch\", err);\n    });\n};\n\nexport const getAllIotDropdownApi = (ctx) => {\n  postLoginInstance\n    .post(\"/offering/telematics/get-all-telematics\")\n    .then((res) => {\n      if (!res.data.error) {\n        const iotOptions = res.data.data.iot_devices.map((item) => ({\n          value: item.id,\n          label: item.serialNo,\n        }));\n        ctx.setState({\n          iotOptions,\n        });\n      } else {\n        toast.error(res.data.message || \"Something went wrong\");\n      }\n    })\n    .catch((err) => {\n      console.log(\"Catch\", err);\n    });\n};\n\nexport const getAllBatteriesDropdownApi = (ctx) => {\n  let data = new URLSearchParams();\n  data.append(\"start\", 0);\n  data.append(\"limit\", -1);\n  data.append(\"conditions\", JSON.stringify([]));\n  data.append(\"sorts\", JSON.stringify([]));\n  postLoginInstance\n    .post(\"/offering/battery/search-battery\", data)\n    .then((res) => {\n      if (!res.data.error) {\n        const batteryOptions = res.data.data.batteries.results.map((item) => ({\n          value: item.id,\n          label: item.serialNo,\n        }));\n        ctx.setState({\n          batteryOptions,\n        });\n      } else {\n        toast.error(res.data.message || \"Something went wrong\");\n      }\n    })\n    .catch((err) => {\n      console.log(\"Catch\", err);\n    });\n};\n\nexport const addUpdateVehicleApi = (data, cb) => {\n  return postLoginInstance\n    .post(\"/offering/vehicle/add-update-vehicle\", data)\n    .then((res) => {\n      if (!res.data.error) {\n        cb();\n        toast.success(res.data.message || \"Something went wrong\");\n      } else {\n        toast.error(res.data.message || \"Something went wrong\");\n      }\n    })\n    .catch((err) => {\n      toast.error(err.message || \"Something went wrong\");\n    });\n};\n\nexport const getAllAccounts = (ctx, accountType, stateKey) => {\n  let data = new URLSearchParams();\n  data.append(\"start\", 0);\n  data.append(\"limit\", 5000);\n  data.append(\n    \"conditions\",\n    JSON.stringify([\n      { key: \"SEARCH_BY_TYPE\", value: accountType, context: null },\n    ])\n  );\n  data.append(\"sorts\", JSON.stringify([]));\n  postLoginInstance\n    .post(\"/organisation/user/search-accounts\", data)\n    .then((res) => {\n      if (!res.data.error) {\n        const options = res.data.data.results.map((item) => ({\n          value: item.id,\n          label: item.name,\n        }));\n        ctx.setState({\n          [stateKey]: options,\n        });\n      } else {\n        toast.error(res.data.message || \"Something went wrong\");\n      }\n    })\n    .catch((err) => {\n      console.log(\"Catch\", err);\n    });\n};\n\nexport const updateVehicleRegistrationApi = (ctx, data, cb) => {\n  // console.log('ctx.state.customerData', ctx);\n  postLoginInstance\n    .post(\"offering/vehicle/update-vehicle-registration\", data)\n    .then((res) => {\n      toast.success(res.data.message);\n      // console.log('res.data.vehicle', res.data.data.vehicle);\n      cb(res.data.data.vehicle);\n      // ctx.props.handleClose();\n      // getCustomerDetailsApi(ctx.state.customerData.id, ctx)\n    })\n    .catch((err) => {\n      console.log(\"Catch\", err);\n    });\n};\n\nexport const assignVehiclesToFranchiseApi = (data, cb, ctx) => {\n  postLoginInstance\n    .post(\"offering/vehicle/assign-vehicles-to-franchise\", data)\n    .then((res) => {\n      if (!res.data.error) {\n        toast.success(res.data.message);\n        cb();\n        getAllVehiclesApi(ctx, false);\n      } else {\n        toast.error(res.data.message || \"Something went wrong\");\n      }\n    })\n    .catch((err) => {\n      console.log(\"Catch\", err);\n    });\n};\n\nexport const removeVehiclesToFranchiseApi = (data, cb, ctx) => {\n  postLoginInstance\n    .post(\"offering/vehicle/remove-vehicles-from-franchise\", data)\n    .then((res) => {\n      if (!res.data.error) {\n        toast.success(res.data.message);\n        cb();\n        getAllVehiclesApi(ctx, false);\n      } else {\n        toast.error(res.data.message || \"Something went wrong\");\n      }\n    })\n    .catch((err) => {\n      console.log(\"Catch\", err);\n    });\n};\n\nexport const assignVehiclesToFranchiseLocationApi = (data, cb, ctx) => {\n  // console.log('ctx',ctx);\n  postLoginInstance\n    .post(\"offering/vehicle/add-update-vehicle-franchise-location\", data)\n    .then((res) => {\n      if (!res.data.error) {\n        toast.success(res.data.message);\n        cb();\n        getAllVehiclesApi(ctx);\n      } else {\n        toast.error(res.data.message || \"Something went wrong\");\n      }\n    })\n    .catch((err) => {\n      console.log(\"Catch\", err);\n    });\n};\n\nexport const removeVehiclesFromFranchiseLocationApi = (data, cb, ctx) => {\n  postLoginInstance\n    .post(\"offering/vehicle/remove-vehicle-franchise-location\", data)\n    .then((res) => {\n      if (!res.data.error) {\n        toast.success(res.data.message);\n        cb();\n        getAllVehiclesApi(ctx, false);\n      } else {\n        toast.error(res.data.message || \"Something went wrong\");\n      }\n    })\n    .catch((err) => {\n      console.log(\"Catch\", err);\n    });\n};\n\nexport const updateStatusApi = (data, cb) => {\n  postLoginInstance\n    .post(\"offering/vehicle/update-vehicle-status\", data)\n    .then((res) => {\n      if (!res.data.error) {\n        toast.success(res.data.message);\n        cb();\n      } else {\n        toast.error(res.data.message || \"Something went wrong\");\n      }\n    })\n    .catch((err) => {\n      console.log(\"Catch\", err);\n    });\n};\n"]},"metadata":{},"sourceType":"module"}