{"ast":null,"code":"import axios from 'axios';\nimport { getToken, deleteToken, getScope } from \"./ManageToken\";\nconst postLoginInstance = axios.create({\n  // baseURL: 'http://13.232.184.100/hbits/dev',  // Url for Dev\n  baseURL: 'https://sapi-float.ebikego.com/api/',\n  // Url for UAT\n  // baseURL: 'http://127.0.0.1:5000/api', // Url for Local\n  // baseURL: 'http://3.7.185.1/api/',  // Url for Production\n  headers: {\n    'Content-Type': 'application/x-www-form-urlencoded'\n  }\n}); // SET THE AUTH TOKEN FOR ANY REQUEST\n\npostLoginInstance.interceptors.request.use(function (config) {\n  config.headers.Authorization = getToken();\n  config.headers.Scope = JSON.stringify({\n    \"account_ids\": [getScope()],\n    // FOR VEHICLE REGISTRATION NUMBER UPDATE API\n    ...(config.url === \"offering/vehicle/update-vehicle-registration\" && {\n      \"vehicle_id\": localStorage.getItem(\"vehicleId\")\n    })\n  });\n  return config;\n}); // INTERCEPT RESPONSE TO CHECK IF TOKEN HAS EXPIRED AND IF YES THEN REDIRECT TO LOGIN OR HOME\n\npostLoginInstance.interceptors.response.use(undefined, error => {\n  console.log('error', error.response); // if (error.response.status === 401) {\n  //   deleteToken();\n  //   window.location = \"/\";\n  // }\n\n  return Promise.reject(error);\n});\nexport default postLoginInstance;","map":{"version":3,"sources":["/opt/projects/loch-dashboard/src/utils/PostLoginAxios.js"],"names":["axios","getToken","deleteToken","getScope","postLoginInstance","create","baseURL","headers","interceptors","request","use","config","Authorization","Scope","JSON","stringify","url","localStorage","getItem","response","undefined","error","console","log","Promise","reject"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,WAAnB,EAAgCC,QAAhC,QAAgD,eAAhD;AAEA,MAAMC,iBAAiB,GAAGJ,KAAK,CAACK,MAAN,CACxB;AACE;AACAC,EAAAA,OAAO,EAAE,qCAFX;AAEkD;AAChD;AACA;AACAC,EAAAA,OAAO,EAAE;AACP,oBAAgB;AADT;AALX,CADwB,CAA1B,C,CAWA;;AACAH,iBAAiB,CAACI,YAAlB,CAA+BC,OAA/B,CAAuCC,GAAvC,CAA2C,UAAUC,MAAV,EAAkB;AAC3DA,EAAAA,MAAM,CAACJ,OAAP,CAAeK,aAAf,GAA+BX,QAAQ,EAAvC;AACAU,EAAAA,MAAM,CAACJ,OAAP,CAAeM,KAAf,GAAuBC,IAAI,CAACC,SAAL,CACrB;AACE,mBAAe,CAACZ,QAAQ,EAAT,CADjB;AAEE;AACA,QAAIQ,MAAM,CAACK,GAAP,KAAe,8CAAf,IAAiE;AAAE,oBAAcC,YAAY,CAACC,OAAb,CAAqB,WAArB;AAAhB,KAArE;AAHF,GADqB,CAAvB;AAOA,SAAOP,MAAP;AACD,CAVD,E,CAWA;;AACAP,iBAAiB,CAACI,YAAlB,CAA+BW,QAA/B,CAAwCT,GAAxC,CAA4CU,SAA5C,EAAwDC,KAAD,IAAW;AAChEC,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAoBF,KAAK,CAACF,QAA1B,EADgE,CAEhE;AACA;AACA;AACA;;AACA,SAAOK,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAPD;AASA,eAAejB,iBAAf","sourcesContent":["import axios from 'axios';\nimport { getToken, deleteToken, getScope } from \"./ManageToken\";\n\nconst postLoginInstance = axios.create(\n  {\n    // baseURL: 'http://13.232.184.100/hbits/dev',  // Url for Dev\n    baseURL: 'https://sapi-float.ebikego.com/api/', // Url for UAT\n    // baseURL: 'http://127.0.0.1:5000/api', // Url for Local\n    // baseURL: 'http://3.7.185.1/api/',  // Url for Production\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n    }\n  }\n);\n// SET THE AUTH TOKEN FOR ANY REQUEST\npostLoginInstance.interceptors.request.use(function (config) {\n  config.headers.Authorization = getToken();\n  config.headers.Scope = JSON.stringify(\n    {\n      \"account_ids\": [getScope()],\n      // FOR VEHICLE REGISTRATION NUMBER UPDATE API\n      ...(config.url === \"offering/vehicle/update-vehicle-registration\" && { \"vehicle_id\": localStorage.getItem(\"vehicleId\") })\n    },\n  );\n  return config;\n});\n// INTERCEPT RESPONSE TO CHECK IF TOKEN HAS EXPIRED AND IF YES THEN REDIRECT TO LOGIN OR HOME\npostLoginInstance.interceptors.response.use(undefined, (error) => {\n  console.log('error',error.response);\n  // if (error.response.status === 401) {\n  //   deleteToken();\n  //   window.location = \"/\";\n  // }\n  return Promise.reject(error);\n});\n\nexport default postLoginInstance;"]},"metadata":{},"sourceType":"module"}