(this["webpackJsonpfloat-dashboard"]=this["webpackJsonpfloat-dashboard"]||[]).push([[0],{275:function(e,t,a){},304:function(e,t,a){},305:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),i=a(21),r=a.n(i),o=a(14),c=a(107),l=a(211),d=a(3),h=a(4),u=a(19),m=a(5),p=a(7),b=a(0),j=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(b.jsx)("div",{children:"Common Component"})}}]),a}(n.Component),g=(Object(o.b)((function(e){return{commonState:e.CommonState}}),{})(j),a(13)),v="SET_COMMON_REDUCER",f={isSidebarOpen:!1},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;return t.type===v?Object(g.a)(Object(g.a)({},e),t.payload):e},y=a(314),x=a.p+"static/media/ebg-logo.a2972112.svg",N=a(27),S=a.p+"static/media/profile-icon.5c2a2357.svg",C=a.p+"static/media/vehicle-icon.0f478feb.svg",k=a.p+"static/media/battery-icon.a5fa73cf.svg",A=a.p+"static/media/iot-icon.9780c897.svg",_=a.p+"static/media/master-icon.39073203.svg",E=a.p+"static/media/dropdown-down-icon.d1fc4bcd.svg",w=a.p+"static/media/dropdown-up-icon.278a7a3c.svg",I=a.p+"static/media/lock-icon.b6398780.svg",L=a.p+"static/media/logout-icon.f1a598cc.svg",D=a(33),P=a(8),T=a.n(P),R=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).getIn=function(e,t){for(var a=t.split("."),n=Object(g.a)({},e);a.length;)n=n[a.shift()];return n},n.updateIn=function(e,t,a){for(var n=e,s=t.split(".");s.length>1;)n=n[s.shift()];return n[s.shift()]=a,e},n.updateCb=function(e,t,a){for(var n=e,s=t.split(".");s.length>1;)n=n[s.shift()];var i=e[t];return i.map((function(e,t){return t===a?e.key=!e.key:e})),i},n.linkState=function(e,t,a){return{value:n.getIn(e.state,t),requestChange:function(s,i){return e.setState(n.updateIn(e.state,t,s),(function(){a&&a(s),i&&i(s)}))},requestCheckboxChange:function(s,i,r){return e.setState(n.updateCb(e.state,t,i),(function(){a&&a(s),r&&r(s)}))}}},n.state={},n}return Object(h.a)(a,[{key:"render",value:function(){return Object(b.jsx)(n.Fragment,{children:this.props.children})}}]),a}(s.a.Component);R.defaultProps={children:null};var M=R,B=s.a.createContext(),F=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onSubmit=function(e){return e.preventDefault(),n.validateAll()&&(n.submitButtons.forEach((function(e){e.updateInProgress(!0)})),n.props.onValidSubmit(n.submitProgressCallback,e)),!1},n.validateAll=function(){var e=[];return n.elements.forEach((function(t){t.validate()||e.push(t)})),0===e.length},n.elements=[],n.submitButtons=[],n.state={},n.formContextValue={registerElement:function(e){n.elements.push(e)},unRegisterElement:function(e){n.elements.splice(n.elements.indexOf(e),1)},registerSubmitButton:function(e){n.submitButtons.push(e)},unRegisterSubmitButton:function(e){n.submitButtons.splice(n.submitButtons.indexOf(e))}},n.submitProgressCallback={done:function(){n.submitButtons.forEach((function(e){e.updateInProgress(!1)}))}},n}return Object(h.a)(a,[{key:"render",value:function(){return Object(b.jsx)(B.Provider,{value:this.formContextValue,children:Object(b.jsx)("form",{className:"w-percent-100 flex-full",autoComplete:"off",onSubmit:this.onSubmit,children:this.props.children})})}}]),a}(M);F.propTypes={classes:T.a.object,onValidSubmit:T.a.func.isRequired},F.defaultProps={};var U=F,V=a(125),q=function(e){var t=e.isActive,a=e.isBlock,n=e.isDisabled,s=e.href,i=e.variant,r=e.handleClick,o=e.type,c=e.buttonText,l=e.buttonImage,d=e.className,h=void 0===d?"":d;return Object(b.jsx)(V.a,{type:o,variant:i,block:a,active:t,disabled:n,href:s,onClick:r,className:h,children:c||Object(b.jsx)(y.a,{src:l})})};q.defaultProps={type:"button",variant:"primary",isDisabled:!1,isActive:!1};var Y=q,K=function(e){var t=e.classes,a=e.checkboxId,n=e.checkboxName,s=e.valueLink,i=e.options,r=e.disabled,o=e.isInline;return Object(b.jsx)("div",{className:"checkbox-wrapper ".concat(o?"inline":""),children:i&&i.map((function(e,i){return Object(b.jsxs)("div",{className:"checkbox-control",children:[Object(b.jsx)("input",{type:"checkbox",value:e.key,checked:e.key,onChange:function(e){s.requestCheckboxChange(e.target.value,i)},id:a,name:n,className:t.inputField,disabled:r},e.key),Object(b.jsx)("span",{children:e.label})]},i)}))})};K.defaultProps={isInline:!1};var W=K,H=function(e){var t=e.classes,a=e.radioId,n=e.radioName,s=e.valueLink,i=e.options,r=e.disabled,o=e.isInline;return Object(b.jsx)("div",{className:"radio-wrapper ".concat(o?"inline":""),children:i&&i.map((function(e,i){return Object(b.jsxs)("div",{className:"radio-control",children:[Object(b.jsx)("input",{type:"radio",value:e.key,checked:s.value.indexOf(e.key)>-1,onChange:function(e){return s.requestChange(e.target.value)},id:a,name:n,className:t.inputField,disabled:r},e.key),Object(b.jsx)("span",{children:e.label})]},i)}))})};H.defaultProps={isInline:!1};var J=H,z=a(47),G=a(204),Q=a(322),X=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).validate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=n.props,a=t.valueLink,s=t.validations,i=null,r=null,o=null;return s&&(o=!(!(i=void 0!==(i=s.find((function(t){return!1===t.validate(a.value||e)})))?i:null)||!i.message),r=!i||!i.message),Array.isArray(e)&&e.length>0&&(i=!1,o=!1,r=!0),n.setState({failedValidation:i,isInvalidState:o,isValidState:r}),null===i},n.state={failedValidation:null,isInvalidState:null,isValidState:null},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.formContext.registerElement(this)}},{key:"componentWillUnmount",value:function(){this.props.formContext.unRegisterElement(this)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.valueLink,n=e.label,s=e.required,i=e.disabled,r=e.helpText,o=e.toolTipText,c=e.isValid,l=e.isInvalid,d=e.control,h=d.type,u=d.settings,m=this.state,p=m.failedValidation,j=m.isInvalidState,v=m.isValidState,f=h;return Object(b.jsx)("div",{children:Object(b.jsxs)(G.a,{controlId:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),className:t.formGroup,children:[n&&(s?Object(b.jsxs)(Q.a.Label,{className:t.label,children:[n," ",Object(b.jsx)("span",{style:{color:"red"},children:"*"})]}):Object(b.jsx)(Q.a.Label,{className:t.label,children:n})),Object(b.jsx)(f,Object(g.a)({valueLink:a,onBlur:this.validate,failedValidation:this.state.failedValidation,classes:t,disabled:i,isValid:c||v,isInvalid:l||j},u)),(p||r)&&Object(b.jsx)(Q.a.Text,{className:"".concat(p?"has-error":""),children:p?p.message:r}),o&&Object(b.jsx)(Q.a.Control.Feedback,{tooltip:!0,type:"".concat(p?"invalid":"valid"),children:p?p.message:o})]})})}}]),a}(M);X.propTypes={classes:T.a.object,formContext:T.a.object.isRequired,valueLink:T.a.object.isRequired,label:T.a.string,required:T.a.bool,helpText:T.a.string,toolTipText:T.a.string,validations:T.a.array,control:T.a.object.isRequired,isValid:T.a.bool,isInvalid:T.a.bool},X.defaultProps={label:null,required:!1,helpText:"",toolTipText:"",validations:[],classes:{}};var Z=X,$=["classes"],ee=function(e){var t=e.classes,a=Object(z.a)(e,$);return Object(b.jsx)(B.Consumer,{children:function(e){return Object(b.jsx)(Z,Object(g.a)(Object(g.a)({formContext:e},a),{},{classes:t}))}})};ee.defaultProps={label:null,required:!1,hint:null,helpText:"",toolTipText:"",validations:[]};var te=ee,ae=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).updateInProgress=function(e){n.setState({inProgress:e})},n.state={inProgress:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.formContext.registerSubmitButton(this)}},{key:"componentWillUnmount",value:function(){this.props.formContext.unRegisterSubmitButton(this)}},{key:"render",value:function(){var e=this.props,t=e.progressMessage,a=e.fullWidth,n=e.children,s=e.formError,i=void 0!==s&&s,r=e.customClass,o=void 0===r?"":r,c=e.name,l=void 0===c?"":c,d=this.state.inProgress&&i;return Object(b.jsx)(V.a,{variant:"raised",bsStyle:"primary",type:"submit",disabled:d,bsSize:a,className:o,name:l,children:d?t:n})}}]),a}(M);ae.propTypes={classes:T.a.object,formContext:T.a.object.isRequired,progressMessage:T.a.string.isRequired,fullWidth:T.a.bool},ae.defaultProps={fullWidth:!1};var ne=ae,se=["classes"],ie=function(e){e.classes;var t=Object(z.a)(e,se);return Object(b.jsx)(B.Consumer,{children:function(e){return Object(b.jsx)(ne,Object(g.a)({formContext:e},t))}})};ie.defaultProps={fullWidth:!1};var re=ie,oe=a(40),ce=a.n(oe),le=Object(h.a)((function e(){Object(d.a)(this,e)}));le.isRequired=function(e){return ce.a.isArray(e)?0!==e.length:ce.a.isString(e)?0!==e.trim().length:!ce.a.isNull(e)&&!ce.a.isUndefined(e)},le.isEqual=function(e){return function(t){return e===t}},le.matchRegex=function(e){return function(t){return e.test(t)}},le.hasMinLength=function(e){return function(t){return!(!ce.a.isArray(t)&&!ce.a.isString(t))&&t.length>=e}},le.hasMaxLength=function(e){return function(t){return!(!ce.a.isArray(t)&&!ce.a.isString(t))&&t.length<=e}},le.isWithinLength=function(e,t){return function(a){return!(!ce.a.isArray(a)&&!ce.a.isString(a))&&(a.length>=e&&a.length<=t)}},le.contains=function(e){return function(t){return!(!ce.a.isArray(t)&&!ce.a.isString(t))&&-1!==t.indexOf(e)}},le.isString=function(e){return ce.a.isString(e)},le.isEmail=function(e){return le.matchRegex(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i)(e)},le.isSceneNumber=function(e){return le.matchRegex(/^[0-9]+[a-zA-Z]*$/)(e)},le.isEmailOptional=function(e){return!(null!==e&&e.length>1)||le.matchRegex(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i)(e)},le.isLetter=function(e){return le.matchRegex(/^[a-zA-Z]*$/i)(e)},le.isLetterAndSpecial=function(e){return le.matchRegex(/^[a-zA-Z!@#$%&*()\-_=+\^\s]*$/)(e)},le.isInt=function(e){return ce.a.isInteger(parseInt(e,10))},le.isNum=function(e){return le.matchRegex(/^\d+$/)(e)},le.isPositiveInt=function(e){if(!e)return!0;le.isInt(e)},le.isWithinInt=function(e,t){return function(a){return le.isInt(a)&&a>=e&&a<=t}},le.isNumeric=function(e,t){return function(a){var n=Math.pow(10,e-t)-Math.pow(10,-t);return a>=-n&&a<=n}},le.isDecimalTwo=function(e){return le.matchRegex(/^[0-9]+([.][0-9]{0,2})?$/)(e)},le.isPostiveNumeric=function(e,t){return function(a){return le.isNumeric(e,t)(a)&&a>0}},le.isWithinNumeric=function(e,t,a,n){return function(s){return le.isNumeric(e,t)(s)&&s>=a&&s<=n}},le.isLowercase=function(e){return le.matchRegex(/^[a-z]*$/)(e)},le.isUppercase=function(e){return le.matchRegex(/^[A-Z]*$/)(e)},le.isPassword=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(s){var i=!0;return e&&i&&(i=le.matchRegex(/[a-z]+/)(s)),t&&i&&(i=le.matchRegex(/[A-Z]+/)(s)),a&&i&&(i=le.matchRegex(/[0-9]+/)(s)),n&&i&&(i=le.matchRegex(/[!@#$%^&*_]+/)(s)),i}},le.isPhone=function(e){return le.matchRegex(/^\+?([0-9-]){10,10}$/)(e)};var de=function(e){var t=e.classes,a=e.rangeId,n=e.rangeName,s=e.minValue,i=e.maxValue,r=e.step,o=e.valueLink;return Object(b.jsx)("input",{style:{display:"block",width:"100%",padding:"0.85rem 0",cursor:"pointer"},type:"range",value:o.value,onChange:function(e){return o.requestChange(e.target.value)},id:a,name:n,min:s,max:i,step:r,className:t.inputField})};de.defaultProps={step:1};var he=de,ue=a(205),me=a(315),pe=function(e){var t=e.type,a=e.disabled,n=e.readOnly,s=e.placeholder,i=e.as,r=e.classes,o=e.rows,c=e.onBlur,l=e.valueLink,d=e.maxLength,h=e.isInvalid,u=e.isValid;return Object(b.jsx)(ue.a,{type:t,disabled:a,readOnly:n,placeholder:s,as:i,rows:o,className:r.inputField,onBlur:function(){return c(l.value)},value:l.value,maxLength:d,onChange:function(e){return l.requestChange(e.target.value)},isValid:u,isInvalid:h})},be=function(e){return Object(b.jsx)("div",{children:e.prefix||e.suffix?Object(b.jsxs)(me.a,{children:[e.prefix&&Object(b.jsx)(me.a.Prepend,{className:e.classes.prefix,children:e.prefix}),pe(e),e.suffix&&Object(b.jsx)(me.a.Prepend,{className:e.classes.suffix,children:e.suffix})]}):pe(e)})};be.defaultProps={type:"text",as:"input",prefix:null,suffix:null,maxLength:250,placeholder:"",disabled:!1,readOnly:!1,classes:{},isValid:!1,isInvalid:!1};var je=be,ge=a(213),ve=function(e){var t=e.onBlur,a=e.valueLink,n=e.options,s=e.multiple,i=e.searchable,r=e.placeholder,o=e.closeMenuOnSelect,c=e.menuIsOpen,l=e.noOptionCustom,d=void 0===l?function(){return u?Object(b.jsx)("div",{className:"btn black-btn",onClick:u,children:"Add New Customer"}):Object(b.jsx)("div",{children:"No Options"})}:l,h=e.noOptionAction,u=void 0===h?null:h,m=e.onChangeCallback,p=void 0===m?function(){}:m,j=e.disabled,g=void 0!==j&&j,v=e.failedValidation,f=ce.a.keyBy(n,"value"),O=a.value,y="";s&&O.length>0&&(y=O.map((function(e){return f[e]}))),!s&&O&&(y=f[O]);return Object(b.jsx)(ge.a,{menuIsOpen:c,closeMenuOnSelect:o,isMulti:s,value:y,onChange:function(e){s?(a.requestChange(e.map((function(e){return e.value}))),p(t)):(a.requestChange(e?e.value:""),p(t))},simpleValue:!1,options:n,isClearable:!1,isSearchable:i,isDisabled:g,placeholder:r,noOptionsMessage:d,classNamePrefix:"custom-select",className:"".concat(v&&v.message?"has-error":"")})};ve.defaultProps={multiple:!1,placeholder:"Select Values"};var fe,Oe=ve,ye=function(){var e=localStorage.getItem("userDetails");return e?JSON.parse(e).token:null},xe=function(){var e=localStorage.getItem("userDetails");return e?JSON.parse(e).user_account_type:null},Ne=a(316),Se=10,Ce="AIzaSyAKncPaSejL7yv4F1Rm7jj9TdW57eF27Jg",ke="https://sapi-float.ebikego.com/api/",Ae="https://d1r1yzhyzim0p1.cloudfront.net/",_e={MALE:10,FEMALE:20,OTHER:30,presentable:{10:"Male",20:"Female",30:"Other"}},Ee=Object.keys(_e.presentable).map((function(e){return{label:_e.presentable[e],value:e}})),we={RUGGEDG1:1,RUGGEDG2:2,presentable:{1:"Rugged G1",2:"Rugged G1+"}},Ie=(Object.keys(we.presentable).map((function(e){return{label:we.presentable[e],value:e}})),{COMPANY:10,FRANCHISE:20,presentable:{10:"Company",20:"Franchise"},getText:function(e){return this.presentable[e]}}),Le={COUNTRY:10,STATE:20,CITY:30,AREA:40,presentable:{10:"Country",20:"State",30:"City",40:"Area"}},De=(Object.keys(Le.presentable).map((function(e){return{label:Le.presentable[e],value:e}})),{SUNDAY:1,MONDAY:2,TUESDAY:3,WEDNESDAY:4,THURSDAY:5,FRIDAY:6,SATURDAY:7,presentable:{1:"Sunday",2:"Monday",3:"Tuesday",4:"Wednesday",5:"Thursday",6:"Friday",7:"Saturday"}}),Pe=(Object.keys(De.presentable).map((function(e){return{label:De.presentable[e],value:e}})),{WEEKDAY:1,WEEKEND:2,presentable:{1:"Weekday",2:"Weekend"}}),Te=(Object.keys(Pe.presentable).map((function(e){return{label:Pe.presentable[e],value:e}})),fe={VIEW_FRANCHISE:"VIEW_FRANCHISE",ADD_UPDATE_FRANCHISE:"ADD_UPDATE_FRANCHISE",DELETE_FRANCHISE:"DELETE_FRANCHISE",VIEW_FRANCHISE_LOCATION:"VIEW_FRANCHISE_LOCATION",ADD_UPDATE_FRANCHISE_LOCATION:"ADD_UPDATE_FRANCHISE_LOCATION",DELETE_FRANCHISE_LOCATION:"DELETE_FRANCHISE_LOCATION",VIEW_COUPON:"VIEW_COUPON",ADD_UPDATE_COUPON:"ADD_UPDATE_COUPON",DELETE_COUPON:"DELETE_COUPON",ADD_UPDATE_ACCOUNT:"ADD_UPDATE_ACCOUNT",VIEW_ACCOUNT:"VIEW_ACCOUNT",DELETE_ACCOUNT:"DELETE_ACCOUNT",ADD_UPDATE_USER:"ADD_UPDATE_USER",VIEW_USER:"VIEW_USER",DELETE_USER:"DELETE_USER",ADD_UPDATE_CUSTOMER:"ADD_UPDATE_CUSTOMER",VIEW_CUSTOMER:"VIEW_CUSTOMER",DELETE_CUSTOMER:"DELETE_CUSTOMER",ADD_UPDATE_CUSTOMER_PROFILE:"ADD_UPDATE_CUSTOMER_PROFILE",VIEW_CUSTOMER_PROFILE:"VIEW_CUSTOMER_PROFILE",DELETE_CUSTOMER_PROFILE:"DELETE_CUSTOMER_PROFILE",ADD_UPDATE_ROLE:"ADD_UPDATE_ROLE",VIEW_ROLE:"VIEW_ROLE",DELETE_ROLE:"DELETE_ROLE",ADD_UPDATE_VEHICLE_INVENTORY:"ADD_UPDATE_VEHICLE_INVENTORY",VIEW_VEHICLE_INVENTORY:"VIEW_VEHICLE_INVENTORY",DELETE_VEHICLE_INVENTORY:"DELETE_VEHICLE",ADD_UPDATE_VEHICLE_MODEL:"ADD_UPDATE_VEHICLE_MODEL",VIEW_VEHICLE_MODEL:"VIEW_VEHICLE_MODEL",DELETE_VEHICLE_MODEL:"DELETE_VEHICLE_MODEL",ADD_UPDATE_TELEMATICS_MODEL:"ADD_UPDATE_TELEMATICS_MODEL",VIEW_TELEMATICS_MODEL:"VIEW_TELEMATICS_MODEL",DELETE_TELEMATICS_MODEL:"DELETE_TELEMATICS_MODEL",ADD_UPDATE_TELEMATICS_INVENTORY:"ADD_UPDATE_TELEMATICS_INVENTORY",VIEW_TELEMATICS_INVENTORY:"VIEW_TELEMATICS_INVENTORY",DELETE_TELEMATICS_INVENTORY:"DELETE_TELEMATICS_INVENTORY",ADD_UPDATE_BATTERY_MODEL:"ADD_UPDATE_BATTERY_MODEL",VIEW_BATTERY_MODEL:"VIEW_BATTERY_MODEL",DELETE_BATTERY_MODEL:"DELETE_BATTERY_MODEL",ADD_UPDATE_BATTERY_INVENTORY:"ADD_UPDATE_BATTERY_INVENTORY",VIEW_BATTERY_INVENTORY:"VIEW_BATTERY_INVENTORY",DELETE_BATTERY_INVENTORY:"DELETE_BATTERY_INVENTORY"},Object(D.a)(fe,"ADD_UPDATE_COUPON","ADD_UPDATE_COUPON"),Object(D.a)(fe,"VIEW_COUPON","VIEW_COUPON"),Object(D.a)(fe,"DELETE_COUPON","DELETE_COUPON"),Object(D.a)(fe,"ADD_UPDATE_ORDER","ADD_UPDATE_ORDER"),Object(D.a)(fe,"VIEW_ORDER","VIEW_ORDER"),Object(D.a)(fe,"DELETE_ORDER","DELETE_ORDER"),Object(D.a)(fe,"VIEW_SETTLEMENT_REPORT","VIEW_SETTLEMENT_REPORT"),Object(D.a)(fe,"ADD_UPDATE_SETTLEMENT_REPORT","ADD_UPDATE_SETTLEMENT_REPORT"),Object(D.a)(fe,"VIEW_REPORTS","VIEW_REPORTS"),fe),Re={FLAT:10,PERCENTAGE:20,presentable:{10:"Flat",20:"Percentage"},getText:function(e){return this.presentable[e]}},Me=Object.keys(Re.presentable).map((function(e){return{label:Re.presentable[e],value:e}})),Be=[{label:"Yes",value:"true"},{label:"No",value:"false"}],Fe=10,Ue={HOURLY:10,DAILY:20,WEEKLY:30,MONTHLY:40,presentable:{10:"Hourly",20:"Daily",30:"Weekly",40:"Monthly"},formatedText:{10:"hr/hrs",20:"day/days",30:"week/weeks",40:"month/months"},getFormatedText:function(e){return this.formatedText[e]},getText:function(e){return this.presentable[e]}},Ve=Object.keys(Ue.presentable).map((function(e){return{label:Ue.presentable[e],value:e}})),qe={CITY:30,AREA:40,presentable:{30:"City",40:"Area"},getText:function(e){return this.presentable[e]}},Ye=Object.keys(qe.presentable).map((function(e){return{label:qe.presentable[e],value:e}})),Ke={INITIATED:10,PLACED:20,NOT_PLACED:30,PICKED_UP:40,RETURN_PAYMENT_PENDING:50,RETURN_PAYMENT_SETTLED:55,CANCELLED:60,_presentable:{10:"Initiated",20:"Upcoming",30:"Not Placed",40:"Ongoing",50:"Returned",55:"Returned",60:"Cancelled"},_class:{10:"cancelled",20:"upcoming",30:"cancelled",40:"ongoing",50:"",55:"ongoing",60:"cancelled"},getText:function(e){return this._presentable[e]},getClass:function(e){return this._class[e]}},We=20,He=30,Je={AVAILABLE:10,RESERVED:20,IN_SERVICE:50,DECOMMISSIONED:60,_presentable:{10:"Available",20:"Reserved",50:"In Service",60:"Decommissioned"},getText:function(e){return this._presentable[e]}},ze=Object.keys(Je._presentable).map((function(e){return{label:Je._presentable[e],value:e}})),Ge=20,Qe=a(23),Xe=a.n(Qe),Ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.replace({search:"?p=".concat(t).concat(a&&"&&search=".concat(a))})},$e=function(e){return Math.ceil(e/Se)},et=function(e){return e?Xe()(e).format("DD-MMM-YYYY"):"NA"},tt=function(){return JSON.parse(localStorage.getItem("userDetails")).account_permissions[0].permission_codes},at=function(e,t){var a=Xe()(e).format("DD/MM/YYYY"),n=Xe()(t).format("DD/MM/YYYY");return!(a>n)&&!(a<n)},nt=a.p+"static/media/close.2fce6214.png",st=function(e){var t=e.files,a=e.uploadProgress,s=e.onRemove;return t.map((function(e,t){var i=a[e.id],r=function(e,t,a){var n=/(?:\.([^.]+))?$/.exec(e)[1];return"jpeg"===n||"png"===n||"jpg"===n?Object(b.jsx)(y.a,{src:t,alt:"link-preview"}):Object(b.jsx)("span",{className:a,children:n})}(e.name,e.path,"option-card-extension ");return Object(b.jsxs)(n.Fragment,{children:[!i&&Object(b.jsxs)("div",{className:"uploaded-img-wrapper",children:[r,Object(b.jsx)(y.a,{src:nt,className:"remove-circle",onClick:function(){return s(e)}})]}),i&&Object(b.jsx)(Ne.a,{striped:!0,bsStyle:"info",now:i})]},t)}))},it=a.p+"static/media/plus-icon.5e284a56.svg",rt=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onUploadProgress=function(e,t){var a=n.state.uploadProgress,s=null;100===t?(delete a[e.id],s=n.updateValueLink):a[e.id]=t,n.setState({uploadProgress:a},s)},n.uploadFile=function(e,t,a,s){return new Promise((function(a,i){var r,o=new XMLHttpRequest,c=new FormData;r=t.type.match("image.*")?"IMAGE":t.type.match("video.*")?"VIDEO":"ALL_FORMAT",c.append("file",t),c.append("module",n.props.moduleName),c.append("sub_module",n.props.subModule),c.append("media_type",r),o.open("POST",e+"common/attachment/upload"),o.setRequestHeader("Authorization",ye()),o.onload=function(e){return a(e.target.responseText)},o.onerror=i,o.upload&&s&&(o.upload.onprogress=s),o.send(c)}))},n.startUpload=function(e,t,a){n.uploadFile(a,e,t,(function(e){n.onUploadProgress(t,parseInt(e.loaded/e.total*100,10))})).then((function(e){var a=JSON.parse(e);a.error?(t.error=!0,t.errorText="Unable to upload file"):(t.imageId=a.data.id,t.path=a.data.url,n.onUploadProgress(t,100))})).catch((function(e){t.error=!0,t.errorText="Unable to upload file"}))},n.onImageChange=function(e){var t=e.target.files,a=n.props.onSelect,s=n.state,i=s.files,r=s.uploadProgress;Array.from(t).forEach((function(e){a(e,(function(t,a){i.push(t),r[t.id]=1,n.setState({files:i,uploadProgress:r},(function(){return n.startUpload(e,t,a)}))}))}))},n.onDropRejected=function(e){var t=ce.a.map(e,"name");null.showWarningAlert(t.join(", ")+" rejected due to size or invalid format")},n.onRemove=function(e){var t=n.state.files;t.splice(t.indexOf(e),1),n.setState({files:t},n.updateValueLink)},n.updateValueLink=function(){var e=n.props,t=e.maxFiles,a=e.valueLink,s=n.state.files;a.requestChange(1===t?0===s.length?null:s[0]:s)},n.state={files:1===e.maxFiles?e.valueLink.value?[e.valueLink.value]:[]:e.valueLink.value,uploadProgress:{}},n}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e,t){if(this.props.valueLink.value&&(""===e.valueLink.value||e.valueLink.value&&e.valueLink.value.imageId||e.valueLink.value&&0===e.valueLink.value.length))if(this.props.valueLink.value.imageId!==e.valueLink.value.imageId){var a=this.props,n=a.maxFiles,s=a.valueLink,i=1===n?[s.value]:s.value;this.setState({files:i})}else if(this.props.valueLink.value.length){var r=this.props.valueLink.value;this.setState({files:r})}}},{key:"render",value:function(){var e=this.props,t=e.extensions,a=e.maxFiles,n=e.columns,s=this.state,i=s.files,r=s.uploadProgress,o=i.length!==a,c=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);return Object(b.jsxs)("div",{className:"image-wrapper",children:[o&&Object(b.jsxs)("div",{className:"upload-image-wrapper",children:[Object(b.jsxs)("label",{htmlFor:c,children:[Object(b.jsx)(y.a,{src:it,className:"plus-icon"}),Object(b.jsx)("p",{className:"red-hat-display-medium f-s-14",children:"Browse to choose file"})]}),Object(b.jsx)("input",{type:"file",id:c,accept:t,multiple:a>1,onChange:this.onImageChange,style:{display:"none"}})]}),i.length>0&&Object(b.jsx)("div",{className:"img-preview-wrapper",children:Object(b.jsx)(st,{files:i,uploadProgress:r,columns:n,onRemove:this.onRemove})})]})}}]),a}(M);rt.propTypes={classes:T.a.object,extensions:T.a.array,maxFiles:T.a.number,maxFileSize:T.a.number,columns:T.a.number,valueLink:T.a.object.isRequired,onSelect:T.a.func.isRequired},rt.defaultProps={extensions:["*"],maxFiles:1,maxFileSize:2e6,columns:1};var ot=rt,ct=function(e){var t=e.moduleName,a=e.subModule,n=e.fileType,s=e.extensions,i=e.maxFiles,r=e.maxFileSize,o=e.columns,c=e.valueLink,l=e.onSelect;return Object(b.jsx)("div",{children:Object(b.jsx)(ot,{moduleName:t,subModule:a,fileType:n,extensions:s,maxFiles:i,maxFileSize:r,columns:o,valueLink:c,onSelect:l})})};ct.defaultProps={extensions:["*"],maxFiles:1,maxFileSize:2e6,columns:1};var lt=ct,dt=a(43),ht=a(207),ut=a(101),mt=a.p+"static/media/date-icon.38b20eb6.svg",pt=function(e){var t=s.a.useState(!1),a=Object(dt.a)(t,2),n=a[0],i=a[1],r=e.valueLink,o=e.placeholder,c=e.disabled,l=void 0!==c&&c,d=e.minDate,h=e.maxDate;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("input",{placeholder:o,type:"text",readonly:"readonly",disabled:l,className:"form-control date-picker-control",onClick:function(){return i(!0)},value:r.value?Object(ut.default)(r.value,"dd-MM-yyyy"):""}),Object(b.jsx)(y.a,{src:mt,className:"date-icon"}),Object(b.jsx)(Bt,{modalClass:"date-picker-control-modal",show:n,onHide:function(){return i(!1)},title:"Select Date",children:Object(b.jsx)(ht.Calendar,{date:r.value||null,onChange:function(t){e.valueLink.requestChange(t),i(!1)},minDate:d,maxDate:h})})]})},bt=a.p+"static/media/eye-icon.fc35bbdf.svg",jt=a.p+"static/media/eye-visible.d1d86978.svg",gt=a(10),vt=a(129),ft=a.n(vt),Ot=ft.a.create({baseURL:"https://sapi-float.ebikego.com/api/"}),yt=ft.a.create({baseURL:"https://sapi-float.ebikego.com/api/",headers:{"Content-Type":"application/x-www-form-urlencoded"}});yt.interceptors.request.use((function(e){return e.headers.Authorization=ye(),e.headers.Scope=JSON.stringify(Object(g.a)({account_ids:[JSON.parse(localStorage.getItem("userDetails")).account_permissions[0].account_id]},"offering/vehicle/update-vehicle-registration"===e.url&&{vehicle_id:localStorage.getItem("vehicleId")})),e})),yt.interceptors.response.use(void 0,(function(e){return console.log("error",e.response),Promise.reject(e)}));var xt=yt,Nt=function(e,t){return function(a,n){var s=new URLSearchParams;s.append("location_type",t),t===Le.STATE&&e.state.countryId&&s.append("parent_id",e.state.countryId),t===Le.CITY&&e.state.stateId&&s.append("parent_id",e.state.stateId),Ot.post("/common/master/get-location-by-type",s).then((function(a){var n=a.data.data.location.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{value:e.id,label:e.name})}));e.setState(Object(g.a)(Object(g.a)(Object(g.a)(Object(g.a)({},t===Le.COUNTRY&&{countryList:n}),t===Le.STATE&&{stateList:n}),t===Le.CITY&&{cityList:n}),t===Le.AREA&&{areaList:n}))})).catch((function(e){console.log("Catch",e)}))}},St=function(e,t){return function(a,n){Ot.post("/common/master/add-update-location",e).then((function(e){t.setState(Object(g.a)(Object(g.a)(Object(g.a)({},t.state.countryList&&{countryList:t.state.countryList.map((function(t){return t.id!==e.data.data.location.id?t:e.data.data.location}))}),t.state.cityList&&{cityList:t.state.cityList.map((function(t){return t.id!==e.data.data.location.id?t:e.data.data.location}))}),t.state.areaList&&{areaList:t.state.areaList.map((function(t){return t.id!==e.data.data.location.id?t:e.data.data.location}))}))})).catch((function(e){console.log("Catch",e)}))}},Ct=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onSubmit=function(){if(n.state.newPassword===n.state.confirmPassword){var e=new URLSearchParams;e.append("old_password",n.state.oldPassword),e.append("new_password",n.state.newPassword),function(e,t){xt.post("organisation/user/change-password",t).then((function(t){t.data.error?gt.b.error(t.data.message||"Something went wrong"):(gt.b.success("Password changed successfully"),e.props.handleClose())})).catch((function(e){console.log("Catch",e)}))}(Object(u.a)(n),e)}else gt.b.error("New password and Confirm password don't match")},n.handleEye=function(e){n.setState(Object(D.a)({},e,!n.state[e]))},n.state={errorMessage:"",inProgress:!1,oldPassword:"",newPassword:"",confirmPassword:"",showOldPassword:!1,showPassword:!1,showConfirmPassword:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(b.jsx)(Bt,{show:this.props.show,onHide:this.props.handleClose,title:"Change Password",modalClass:"change-password",children:Object(b.jsxs)(U,{onValidSubmit:this.onSubmit,children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"oldPassword"),label:"Current Password",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Current Password",type:this.state.showOldPassword?"text":"password",suffix:Object(b.jsx)(y.a,{src:this.state.showOldPassword?jt:bt,onClick:function(){return e.handleEye("showOldPassword")},className:"eye-icon"})}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"newPassword"),label:"New Password",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:je,settings:{placeholder:"Enter New Password",type:this.state.showPassword?"text":"password",suffix:Object(b.jsx)(y.a,{src:this.state.showPassword?jt:bt,onClick:function(){return e.handleEye("showPassword")},className:"eye-icon"})}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"confirmPassword"),label:"Re-Enter New Password",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Password",type:this.state.showConfirmPassword?"text":"password",suffix:Object(b.jsx)(y.a,{src:this.state.showConfirmPassword?jt:bt,onClick:function(){return e.handleEye("showConfirmPassword")},className:"eye-icon"})}}}),Object(b.jsx)("div",{className:"submit-wrapper",children:Object(b.jsx)(re,{customClass:"btn black-btn",children:"Reset Password"})})]})})}}]),a}(M);Ct.propTypes={show:T.a.bool.isRequired,handleClose:T.a.func.isRequired};var kt=Ct,At=a.p+"static/media/close-icon.0b1a8ed0.svg",_t=function(e){return function(t){return t({type:v,payload:e}),Promise.resolve()}},Et=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).handleDropdown=function(e){n.setState({activeNav:e,isOpen:e!==n.state.activeNav||!n.state.isOpen})},n.openCloseChangePassword=function(){n.setState({changePasswordModal:!n.state.changePasswordModal})},n.sidebarHandle=function(){n.props.setCommonReducer({isSidebarOpen:!1})},n.state={activeNav:"",isOpen:!1,changePasswordModal:!1,userManagement:["dealer","add-dealer","oem","add-oem","users","add-user"],masterData:["bike-models","iot-models","battery-models","add-battery-model","edit-battery-model","add-iot-model","add-bike-model"],locationMaster:["country","city","area"]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.location.pathname;e=e.split("/").pop().split("?")[0],this.state.userManagement.includes(e)?this.handleDropdown("user"):this.state.masterData.includes(e)?this.handleDropdown("master"):this.state.locationMaster.includes(e)&&this.handleDropdown("location-master")}},{key:"render",value:function(){var e=this,t=tt();return Object(b.jsxs)("div",{className:"sidenav-wrapper ".concat(this.props.commonState.isSidebarOpen?"open":""),children:[this.state.changePasswordModal&&Object(b.jsx)(kt,{show:this.state.changePasswordModal,handleClose:this.openCloseChangePassword,history:this.props.history}),Object(b.jsxs)("div",{className:"header",children:[Object(b.jsx)(y.a,{src:x,className:"logo"}),Object(b.jsx)(y.a,{src:At,className:"close-icon",onClick:this.sidebarHandle})]}),Object(b.jsxs)("div",{className:"content",children:[t.includes(Te.VIEW_FRANCHISE)&&Object(b.jsxs)(N.c,{to:"/franchise",onClick:this.sidebarHandle,className:"red-hat-display-medium f-s-14 lh-14 secondary",activeClassName:"active",children:[" ",Object(b.jsx)(y.a,{src:S,className:"sidenav-icons"})," Franchise"]}),t.includes(Te.VIEW_FRANCHISE_LOCATION)&&Object(b.jsxs)(N.c,{to:"/franchise-location",onClick:this.sidebarHandle,className:"red-hat-display-medium f-s-14 lh-14 secondary",activeClassName:"active",children:[" ",Object(b.jsx)(y.a,{src:S,className:"sidenav-icons"})," Franchise Location"]}),t.includes(Te.VIEW_VEHICLE_INVENTORY)&&Object(b.jsxs)(N.c,{to:"/vehicles",onClick:this.sidebarHandle,className:"red-hat-display-medium f-s-14 lh-14 secondary",activeClassName:"active",children:[" ",Object(b.jsx)(y.a,{src:C,className:"sidenav-icons"})," Vehicles"]}),t.includes(Te.VIEW_COUPON)&&Object(b.jsxs)(N.c,{to:"/coupons",onClick:this.sidebarHandle,className:"red-hat-display-medium f-s-14 lh-14 secondary",activeClassName:"active",children:[" ",Object(b.jsx)(y.a,{src:S,className:"sidenav-icons"})," Coupons"]}),t.includes(Te.VIEW_TELEMATICS_INVENTORY)&&xe()===Ie.COMPANY&&Object(b.jsxs)(N.c,{to:"/iot",onClick:this.sidebarHandle,className:"red-hat-display-medium f-s-14 lh-14 secondary",activeClassName:"active",children:[" ",Object(b.jsx)(y.a,{src:A,className:"sidenav-icons"})," IOT"]}),t.includes(Te.VIEW_BATTERY_INVENTORY)&&xe()===Ie.COMPANY&&Object(b.jsxs)(N.c,{to:"/battery",onClick:this.sidebarHandle,className:"red-hat-display-medium f-s-14 lh-14 secondary",activeClassName:"active",children:[" ",Object(b.jsx)(y.a,{src:k,className:"sidenav-icons"})," Battery"]}),t.includes(Te.VIEW_CUSTOMER)&&Object(b.jsxs)(N.c,{to:"/customers",onClick:this.sidebarHandle,className:"red-hat-display-medium f-s-14 lh-14 secondary",activeClassName:"active",children:[" ",Object(b.jsx)(y.a,{src:S,className:"sidenav-icons"})," Customers"]}),t.includes(Te.VIEW_ORDER)&&Object(b.jsxs)(N.c,{to:"/booking-management",onClick:this.sidebarHandle,className:"red-hat-display-medium f-s-14 lh-14 secondary",activeClassName:"active",children:[" ",Object(b.jsx)(y.a,{src:S,className:"sidenav-icons"})," Booking Management"]}),t.includes(Te.VIEW_SETTLEMENT_REPORT)&&Object(b.jsxs)(N.c,{to:"/settlement",onClick:this.sidebarHandle,className:"red-hat-display-medium f-s-14 lh-14 secondary",activeClassName:"active",children:[" ",Object(b.jsx)(y.a,{src:S,className:"sidenav-icons"})," Settlement"]}),t.includes(Te.VIEW_REPORTS)&&Object(b.jsxs)(N.c,{to:"/report",onClick:this.sidebarHandle,className:"red-hat-display-medium f-s-14 lh-14 secondary",activeClassName:"active",children:[" ",Object(b.jsx)(y.a,{src:S,className:"sidenav-icons"})," Report"]}),t.includes(Te.VIEW_USER)&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(N.c,{to:"#",onClick:function(){return e.handleDropdown("user")},className:"red-hat-display-medium f-s-14 lh-14 secondary",activeClassName:"user"===this.state.activeNav?"active":"",children:[" ",Object(b.jsx)(y.a,{src:S,className:"sidenav-icons"})," User Management"," ",Object(b.jsx)(y.a,{src:"user"===this.state.activeNav&&this.state.isOpen?w:E,className:"dropdown-icon"})," "]}),"user"===this.state.activeNav&&this.state.isOpen&&Object(b.jsx)("div",{className:"sub-menu",children:Object(b.jsxs)(N.c,{to:"/user-management/users",onClick:this.sidebarHandle,className:"red-hat-display-medium lh-18 grey-AAA",activeClassName:"active-m",children:[" ",Object(b.jsx)("span",{className:"dot ".concat(this.props.location.pathname&&this.props.location.pathname.includes("users")?"active":"")})," ","Users"]})})]}),t.includes(Te.VIEW_VEHICLE_MODEL||Te.VIEW_TELEMATICS_MODEL||Te.VIEW_BATTERY_MODEL)&&xe()===Ie.COMPANY&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(N.c,{to:"#",onClick:function(){return e.handleDropdown("master")},className:"red-hat-display-medium f-s-14 lh-14 secondary",activeClassName:"master"===this.state.activeNav?"active":"",children:[" ",Object(b.jsx)(y.a,{src:_,className:"sidenav-icons"})," Master Data"," ",Object(b.jsx)(y.a,{src:"master"===this.state.activeNav?w:E,className:"dropdown-icon"})," "]}),"master"===this.state.activeNav&&this.state.isOpen&&Object(b.jsxs)("div",{className:"sub-menu",children:[t.includes(Te.VIEW_VEHICLE_MODEL)&&Object(b.jsxs)(N.c,{to:"/master/bike-models",onClick:this.sidebarHandle,className:"red-hat-display-medium lh-18 grey-AAA",activeClassName:"active-m",children:[" ",Object(b.jsx)("span",{className:"dot ".concat(this.props.location.pathname&&this.props.location.pathname.includes("bike-models")?"active":"")})," ","Bike Model"]}),t.includes(Te.VIEW_TELEMATICS_MODEL)&&Object(b.jsxs)(N.c,{to:"/master/iot-models",onClick:this.sidebarHandle,className:"red-hat-display-medium lh-18 grey-AAA",activeClassName:"active-m",children:[" ",Object(b.jsx)("span",{className:"dot ".concat(this.props.location.pathname&&this.props.location.pathname.includes("iot-models")?"active":"")})," ","Iot Model"]}),t.includes(Te.VIEW_BATTERY_MODEL)&&Object(b.jsxs)(N.c,{to:"/master/battery-models",onClick:this.sidebarHandle,className:"red-hat-display-medium lh-18 grey-AAA",activeClassName:"active-m",children:[" ",Object(b.jsx)("span",{className:"dot ".concat(this.props.location.pathname&&this.props.location.pathname.includes("battery-models")?"active":"")})," ","Battery Model"]})]})]}),xe()===Ie.COMPANY&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(N.c,{to:"#",onClick:function(){return e.handleDropdown("location-master")},className:"red-hat-display-medium f-s-14 lh-14 secondary",activeClassName:"location-master"===this.state.activeNav?"active":"",children:[" ",Object(b.jsx)(y.a,{src:_,className:"sidenav-icons"})," Location Master"," ",Object(b.jsx)(y.a,{src:"location-master"===this.state.activeNav?w:E,className:"dropdown-icon"})," "]}),"location-master"===this.state.activeNav&&this.state.isOpen&&Object(b.jsxs)("div",{className:"sub-menu",children:[Object(b.jsxs)(N.c,{to:"/location-master/country",className:"red-hat-display-medium lh-18 grey-AAA",activeClassName:"active-m",children:[" ",Object(b.jsx)("span",{className:"dot ".concat(this.props.location.pathname&&this.props.location.pathname.includes("country")?"active":"")})," ","Country"]}),Object(b.jsxs)(N.c,{to:"/location-master/city",className:"red-hat-display-medium lh-18 grey-AAA",activeClassName:"active-m",children:[" ",Object(b.jsx)("span",{className:"dot ".concat(this.props.location.pathname&&this.props.location.pathname.includes("city")?"active":"")})," ","City"]}),Object(b.jsxs)(N.c,{to:"/location-master/area",className:"red-hat-display-medium lh-18 grey-AAA",activeClassName:"active-m",children:[" ",Object(b.jsx)("span",{className:"dot ".concat(this.props.location.pathname&&this.props.location.pathname.includes("area")?"active":"")})," ","Area"]})]})]}),Object(b.jsxs)("div",{className:"bottom",children:[Object(b.jsxs)(N.c,{to:"/profile",className:"red-hat-display-medium f-s-12 lh-12 grey-AAA",children:[" ",Object(b.jsx)(y.a,{src:S,className:"sidenav-icons"})," Profile"]}),Object(b.jsxs)(N.c,{to:"#",onClick:function(){e.openCloseChangePassword(),e.sidebarHandle()},className:"red-hat-display-medium f-s-12 lh-12 grey-AAA",children:[" ",Object(b.jsx)(y.a,{src:I,className:"sidenav-icons"})," Change Password"]}),Object(b.jsxs)(N.c,{to:"/login",className:"red-hat-display-medium f-s-12 lh-12 grey-AAA",children:[" ",Object(b.jsx)(y.a,{src:L,className:"sidenav-icons"})," Logout"]})]})]})]})}}]),a}(n.Component),wt={setCommonReducer:_t},It=Object(o.b)((function(e){return{commonState:e.CommonState}}),wt)(Et),Lt=a.p+"static/media/profile.1f4e4ab5.svg",Dt=a.p+"static/media/hamburger-icon.a9a98f96.svg",Pt=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).sidebarHandle=function(){n.props.setCommonReducer({isSidebarOpen:!0})},n.state={},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("userDetails"));return Object(b.jsxs)("div",{className:"custom-navbar",children:[Object(b.jsx)(y.a,{src:Dt,className:"hamburger",onClick:this.sidebarHandle}),Object(b.jsxs)("div",{className:"profile-wrapper",children:[Object(b.jsx)(y.a,{src:Lt,className:"profile-picture"}),Object(b.jsxs)("div",{className:"name-wrapper",children:[Object(b.jsx)("h3",{className:"red-hat-display-bold f-s-14",children:e.first_name}),Object(b.jsx)("h4",{className:"red-hat-display-regular grey-999",children:Ie.getText(xe())})]})]})]})}}]),a}(n.Component),Tt={setCommonReducer:_t},Rt=Object(o.b)((function(e){return{commonState:e.CommonState}}),Tt)(Pt),Mt=a(320),Bt=function(e){var t=e.show,a=e.onHide,n=e.title,s=e.children,i=e.modalClass,r=void 0===i?null:i;return Object(b.jsxs)(Mt.a,{show:t,onHide:a,dialogClassName:"custom-modal ".concat(r),children:[n&&Object(b.jsxs)(Mt.a.Header,{children:[Object(b.jsx)(Mt.a.Title,{className:"red-hat-display-bold f-s-20",children:n}),Object(b.jsx)(y.a,{src:At,className:"close-icon",onClick:a})]}),Object(b.jsx)(Mt.a.Body,{children:s})]})},Ft=a(324),Ut=a.p+"static/media/back-arrow-icon.1242a24d.svg",Vt=a.p+"static/media/settings-icon.a864f9bd.svg",qt=a.p+"static/media/search-icon.d689bf5b.svg",Yt=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onChangeMethod=function(e){clearTimeout(n.delayTimer),n.delayTimer=setTimeout((function(){n.props.onChangeMethod(n.state)}),1e3)},n.clearFilter=function(){n.setState({searchBy:"",search:""}),n.props.reset()},n.clearSearch=function(){n.setState({search:""}),n.props.clearSearch()},n.handleFromDate=function(){n.setState({toDate:""})},n.filterSubmit=function(){n.props.filterSearch(Xe()(n.state.fromDate).format("DD-MM-YYYY"),Xe()(n.state.toDate).format("DD-MM-YYYY"),n.state.franchiseId)},n.filterSubmit=function(){n.props.filterSearch(Xe()(n.state.fromDate).format("DD-MM-YYYY"),Xe()(n.state.toDate).format("DD-MM-YYYY"),n.state.franchiseId)},n.state={searchBy:"",search:e.searchValue&&e.searchValue.search||"",searchField:"",franchiseOptionsList:[],fromDate:"",toDate:""},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(b.jsx)("div",{className:"component-header-wrapper",children:Object(b.jsxs)("div",{className:"component-header",children:[Object(b.jsxs)("div",{className:"left",children:[this.props.backArrowBtn&&Object(b.jsx)("div",{className:"back-arrow",children:this.props.history?Object(b.jsx)(y.a,{className:"back-arrow-btn",src:Ut,onClick:this.props.history.goBack}):Object(b.jsx)(N.b,{to:this.props.parentPageLink,children:Object(b.jsx)(y.a,{className:"back-arrow-btn",src:Ut})})}),Object(b.jsxs)("div",{className:"info",children:[Object(b.jsx)("h1",{className:"page-title",children:this.props.title}),this.props.breadcrumb&&Object(b.jsxs)(Ft.a,{children:[Object(b.jsx)(Ft.a.Item,{href:"/",children:"CRM"}),this.props.parentPage&&Object(b.jsx)(Ft.a.Item,{href:"".concat(this.props.parentPageLink),children:this.props.parentPage}),Object(b.jsx)(Ft.a.Item,{active:!0,children:this.props.currentPage})]}),this.props.moduleName&&Object(b.jsx)("p",{className:"red-hat-display-regular grey-999",children:this.props.moduleName})]})]}),Object(b.jsxs)("div",{className:"right",children:[this.props.isFilter&&Object(b.jsx)(y.a,{src:Vt,className:"setting-icon",onClick:this.props.handleFilter}),this.props.isSearch&&Object(b.jsxs)(U,{onValidSubmit:this.onChangeMethod,children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"search",this.onChangeMethod),control:{type:je,settings:{placeholder:this.props.placeholder}},classes:{inputField:"search-input",prefix:"search-prefix",suffix:"search-suffix"}}),this.state.search?Object(b.jsx)(y.a,{src:At,onClick:this.clearSearch,className:"search-icon clear-icon"}):Object(b.jsx)(y.a,{src:qt,className:"search-icon"})]}),this.props.secondaryBtnText&&Object(b.jsx)(V.a,{className:"btn secondary-btn",onClick:this.props.isSecondaryBtn,children:this.props.secondaryBtnText}),this.props.primaryBtnText2&&Object(b.jsx)(V.a,{className:"btn black-btn",onClick:this.props.isPrimaryBtn2,children:this.props.primaryBtnText2}),this.props.primaryBtnText&&Object(b.jsx)(V.a,{className:"btn black-btn",onClick:this.props.isPrimaryBtn,children:this.props.primaryBtnText}),this.props.isSettleSearch&&Object(b.jsx)("span",{className:"settlement",children:Object(b.jsxs)(U,{onValidSubmit:this.filterSubmit,children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"fromDate",this.handleFromDate),required:!0,validations:[{validate:le.isRequired,message:"From date cannot be empty"}],control:{type:pt,settings:{placeholder:"From Date"}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"toDate"),required:!0,validations:[{validate:le.isRequired,message:"To date cannot be empty"}],control:{type:pt,settings:{placeholder:"To Date",minDate:this.state.fromDate||new Date}}}),!this.props.isFranchise&&Object(b.jsx)(te,{valueLink:this.linkState(this,"franchiseId"),label:"",required:!0,validations:[{validate:le.isRequired,message:"Franchise cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Franchise",options:this.props.franchiseOptionsList,multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.franchiseId)}}}}),Object(b.jsx)(re,{customClass:'btn black-btn inactive-btn"}',children:"Settle"})]})}),this.props.isReport&&Object(b.jsx)("span",{className:"settlement",children:Object(b.jsxs)(U,{onValidSubmit:function(){return e.props.onChangeMethod(e.state)},children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"fromDate",this.handleFromDate),required:!0,validations:[{validate:le.isRequired,message:"From date cannot be empty"}],control:{type:pt,settings:{placeholder:"From Date"}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"toDate"),required:!0,validations:[{validate:le.isRequired,message:"To date cannot be empty"}],control:{type:pt,settings:{placeholder:"To Date",minDate:this.state.fromDate||new Date}}}),Object(b.jsx)(re,{customClass:'btn black-btn inactive-btn"}',children:"Apply"})]})})]})]})})}}]),a}(M),Kt=a(323),Wt=a(317),Ht=a(109),Jt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMoAAACWCAMAAACo9+cWAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAADMUExURUdwTOnp6SgoKNra2jQ0NODg4DAwMCYmJjAwMNra2tra2jAwMNra2tra2t7c3Nra2tvb20FBQdra2tvb2zIyMtra2h8fH9ra2tra2tvb2zMzMzw8PNra2tvZ2R8fH9ra2jk5Odra2jg4ODk5OTw7OyAgIBISEh8fHyYmJkBAQDg4OENDQ4OBgQ8ODqiBgXNzc3Zvb9egoGNjY4uLi9nZ2UBAQDY2NiYlJQ0NDTg4OD08PP22tsrKyk5JSV9bW7u7u6qqqnpra5WVlTsvLzLHjikAAAA0dFJOUwAIUdkeFC9zEF/MQL/mI/FNB/k+aHuIprJto5aIMLqSf5u749PU9KXz8vPH/uH93obqsGHnD0aFAAAKoklEQVR42t2dZ3uyShOAlW5DUew9dtPPiwuYaNr//08HEA1lF3ZhfTFnPuTJkyuw3szMTmEguRyZcIzav5/PNrvNbH7fmzBC7k+KxPTnu6Bseir3xzgUprfZIeRelf6QQiZIjpP0uf8IiC29vwDDzHZYMlFuHIS73+HKrHTbKtnsCKR/u4pR+jsyub9Vj5Hud6Syuc2gyc135LIp/VdILGFuz7oSktyeXpSkJBB/USajLF1ovk+Mspt5czJJ4FqLLDe2iblLIfcej+ut9XWWJCVznwZlN/GqRR2NMnSULUiHsvP7BpddFdAHIB2J18SyjSgmMFOi7NTbQJmDtPZl7cg3UVkKJgUUn+dnqRSQmmS3UW5DKRRQbsFbehaJSQFlnj3KlhLKLvPShQG0UPpZo9xTQ9ncgn3RQcnawgRADyXj0KJSRLm7AVehhJKxs8wcFEAFZZdtV2xPEyXThgVnnlD2VFDU7DcwWiiZbmElF4WO3yeK9wKdcJRnskaRFiNKRduLi0LH73uEGGprMmrRAZHL34Cisxx6pObdW+tUtop8s659ApoWRm5gCrOiEIxkVtN+UcAfTvMbVYtE+wA0LSybzbhQt0m0d5OmhWUSIruaKyZNtWSRuNTOJNoBUFRLBunksHpBOQJ6askgyecrFxLtG9BTSwY98M4vifZh0lPLJENHsWX/iwKoeT3fKDTH48GgW5OvSZJnfSgeZ0lpYm7XOF8be1eodgr8tVAGPhJPvE9rYk6s55sVLSj1TuM6SqkGFvJaGEhpX/y0rkGlfA2YQnCVL0CHZWadu6ohpU3fzNjgGt49LI27TPiyFiUV2opphNc4Ahosm5eKFiPNqzq94/gmBZb97GJc70iWAVWUohanlkQse/B5Th/MB7RexjRzFtgCfm9Jsieb4OCc6Pv788J0bRurQRf4AulYrEvx4ZjqF9CP0f5So4bShJ7/fRdkMYmMC4CLUX0fvyNRqtQymSl8gU8zxLInUMnJvLCkXr5GUuyVBwCSwTi5gvmu4UvtWgESsYthwpySHvObgERj83RQkGHs/QBIYfbn7O1BI5ICdrHbnJZZli12BgWZQCsQ14+k2e/P7rW/JyPRinhpSdt32YtNGRtF+0Cw2DT7PRzDljuWEEUbYiS9kFDelmODfTyLw+NK8Od3Q1KS+Jg/RCSmY6+bRSavcH+Jlj4iVEU6flzwqyOP9Ch0HLnG+5EQxGRirg5cIkuXfDsqLBXQhVcwvpgkJDPOWrlOjhIVWvIxl6Z7scK4VT7wjcy8s/sSMjlJVLKf78QdfGbJx6/zsMdUiYCq5WJlikYZx6c+DRy/dz3mC8PKtiqmycKkg995gFXWPMHKsTCzSUyunTBI8hWcw9vuL+N56fv3IcJHSrDbGzR24yne8Y3o3Di8ATwcwroxt3cq4k4NBa3IZMfXSNb8eDgedk6EN83tbN6DPHKbxFfKiX3er5ZigrXNZ8ISO5Hb81XcE7RziXdPgL73SzGu4Cu4zhN6CxZKrkp+OkTF0ibOF4bEqUYxCiWBwcqEdSE6uSb11OoQ9Ij6nXExLr2pFgm374s2pSgU8nplit3ORl/dS85GZBTNXCRKjriKbKT1eksuRZhMYJbWxsdFopBaGEvUbowteWTsS9nJ2yhRI8Ryncr+RYYi54hZnBAQjUKoFjZ2WIXIwOzQihNe3PpTQKAIDEcWpSNLSBJfqeN2A4L33OAozKNhGM4ztiSmUSa5IYet2mHMRjblcxEojGHougUj5khaFRGdfD7VBSlEeIzn/rQAIE8/PRo2yImFr6Q2L7JoD8ni8gWEZnxTAyUIimCcZUmQDEXe9WqnDU3DcUg1xSYfGKyew+zLsrDj4fDjDAoXcGMU8S05gtTH3pkL43LFua5VtjOo8eEZcQTKz9vb29epHKthbGPTPNmgR5KWjdsWRDVzS2AWnqp1jMtC+XEry2GsqXfjesXYVWRsAx2JwoRRTloxnt4OxrlI5qM3xGr87S7MHkqMnToo02gUzvtsrSSuHpfGotUSPTPYUTMuOPdT8fKGupwSReqb/mYLs16XAg8O82PEdS3iDbjgbeoYgwwdNMpWmmzB1jNRqCiiruvr0Diu3K5D7gpj37NrYJhYEeNmZgdlgyowt8D0vd9MWui2rMPPc/OFTtXPQTI+FZ9TVnAstYxGASDwbrOJfhL4u3WGhcG0XSlPB90G6RhYXJysY5lquYPWSvDRn4WLEvFykHKyO/TjtPtgDAoIRhr9LBxtlEgbqwzxzlFEoYghlN4FBT1cXEw6N4FOHIq45lpE1RITAPzuLa0vKAv06QoJUVB7egX/hPgoLYfCcL4iH49gE6NYe3q4xq02CSZK2AgUXwtf+VWKrq8YhuFoo1ia6XrruWq7RjQawxYxUSQvynq5XIr0UWyaWnfQZovTZqFBOuKDROkHUHLqhQX86A9PX1CtVLo5CjJIdEEqRXu4JA9FCXxYYXRm+bLy/CfleijjZChsjdXKMg7Kb4x8slBeczeHYm3cNYSBhVDW+tIp7PXj0+sL/MYLlfHVaaILUq0irkAPgND78jyOj3h2NkuUOqr6h6BwHhRElKxbKOmHC9tXRxE8KDr8MXNtkO+mf6YgGcrvDZh4lJIXRYSfrlghitAIlCRmmkei3AEQTE8YL8oIfrr6gMIzK51kKHV8FNWLAs3083QeJrg+iuhDUaHd7CkNlHKSJ0V4TUuKMromCj/uUEUJ1vATH8pauh4KW+0ME6Ag9pt5GKXlQ4F1K2SMJiJOEcUOyQ+SI1DMGJTV9VCS6FZGTs3GawXSD5O1zk2ixGkFUhYP6aCwSXQ7RKLMAFAjdzBd790aipwYZQE5XflvoKh6nIU16KBUkui2kUYr4aIlYxTEFr4FIJj8rvQ4C2tgPnMTVw9SR5kEish1ECVUtNQooSTRbY0ApRQiCRUtlFDqCVEQNZ8ZQhHDKKPQ6dgbRAEhlJYRQgmmlAU6KIl0W0ChKM6DUP4uWAgl9Bd/6KDkk6LUMFE4uwGmLzy3JmAT7pXbQ5FCKKLdzbMjiSJx0sju7ClXQ2Gvi2J/ekPwcoULli4VFD4RSjcKxZcuSvaHX3iszTBWkNNVs0SBN1q5IArjTrRd9gDDeLwSipxIt1Eopg9lZXuH5NmZLQmlk01kA+cKKByj+Nd2USQpRit2D98TEUvnTSCAolFBwdLtozGCoQjLwCW2X+TqnQMVgn4eQPOiiMt078gc4qEs/esP3OEzxusHMJTc69N84d/Qfp5CZx84XY9HZ7QyDQqWmQoiJ3nGoM4oSmsl5aQIlNbXqz/vLL28vcmCKkBQxMfW/wMlV+IWTFgrlq8IixIaRbHs6bHl96fXr0cjoMzxqVWg5NRVihfKNjA9Tm1Zn1hYuVdz/H58OX30kv8vQJVOKIo7kHcayx2FAo1xUoDSU70oasn7alxpFYylUs/9iX2cyORKzptOxdbJWri7T0wUZ5HS4nTY+PjddFH8qaGNYo+0KqvTh5SYlaUDzu8ty8uHlEbOd9MzinebHIWzAml0soCVaH8vOpPx6up80P8O74g+o+iTlvvP6d9/np//cb6ZtAK/NpvNRs53vd+fjXy/0lv5/ueebuI7BHJmz6+7X4PrTJ6fYYeI3L9/a/RusIpZqgAAAABJRU5ErkJggg==",zt=a.p+"static/media/page-prev.e58f9d46.svg",Gt=a.p+"static/media/page-next.40f2073a.svg",Qt=function(e){return Object(b.jsxs)("div",{className:"pagination-wrapper",children:[Object(b.jsx)(y.a,{src:zt,onClick:function(){return function(e){if(e.noUrl)e.loadData(e.page-1);else if(e.page>1){var t=new URLSearchParams(e.location.search);t.set("p",e.page-1),e.history.push("".concat(e.history.location.pathname,"?").concat(t))}}(e)},className:"left-arrow"}),Object(b.jsxs)("h5",{className:"red-hat-display-medium f-s-14",children:[e.page," of ",e.pageCount]}),Object(b.jsx)(y.a,{src:Gt,onClick:function(){return function(e){if(e.noUrl)e.loadData(e.page+1);else if(e.page<e.pageCount){var t=new URLSearchParams(e.location.search);t.set("p",e.page+1),e.history.push("".concat(e.history.location.pathname,"?").concat(t))}}(e)},className:"right-arrow"})]})},Xt=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onValidSubmit=function(){},n.state={pageSize:10},n}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.istopPagination,n=void 0!==a&&a,s=t.tableData,i=t.className,r=void 0===i?"":i,o=t.columnList,c=void 0===o?[]:o,l=t.notFoundImage,d=void 0===l?Jt:l,h=t.moduleName,u=t.message,m=void 0===u?"":u,p=t.isButton,j=t.buttonText,g=t.linkUrl,v=t.linkText,f=t.currentPage,O=void 0===f?1:f,x=t.totalPages,S=t.history,C=t.location,k=t.pageSize,A=void 0!==k&&k,_=t.pageSizeOptions,E=void 0===_?[]:_,w=t.handlePageSize,I=void 0===w?"":w;return Object(b.jsxs)("div",{className:"table-wrapper",children:[Object(b.jsxs)("div",{className:"header-navigation",children:[n&&s&&s.length>=1&&x>1&&Object(b.jsx)(Qt,{history:S,location:C,page:O,pageCount:x}),A&&Object(b.jsx)(U,{onValidSubmit:this.onValidSubmit,ref:function(t){return e.form=t},children:Object(b.jsx)(te,{valueLink:this.linkState(this,"pageSize"),label:"Page Size",hint:{title:"Title Custom",description:Object(b.jsx)("span",{children:" Custom Hint Bro! "})},validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:Oe,settings:{options:E,multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.pageSize),I(e.state.pageSize),console.log("Hello world!")}}}})})]}),s&&s.length>0?Object(b.jsx)(Ht.a,{disableHeight:!0,children:function(e){var t=e.width;return Object(b.jsx)(Ht.c,{width:t,height:50*(s.length+1)-10,headerHeight:50,rowHeight:50,rowCount:s.length,rowGetter:function(e){var t=e.index;return s[t]},className:"custom-table ".concat(r),children:c&&c.length>0&&c.map((function(e,t){return Object(b.jsx)(Ht.b,{width:e.coumnWidth,className:e.className,label:e.labelName,dataKey:e.dataKey,cellRenderer:function(t){var a=t.rowData;return e.cell(a,e.dataKey)}},t)}))})}}):Object(b.jsxs)("div",{className:"not-found-wrapper",children:[Object(b.jsx)(y.a,{src:d}),Object(b.jsxs)("p",{className:"red-hat-display-medium f-s-16 black-404",children:[" ",h?"No "+h+" Found":m]}),p&&Object(b.jsx)(V.a,{className:"primary-btn",onClick:p,children:j}),g&&Object(b.jsx)(N.b,{className:"primary-btn",to:g,children:v})]}),s&&s.length>=1&&x>1&&Object(b.jsx)(Qt,{history:S,location:C,page:O+1,pageCount:x})]})}}]),a}(M),Zt=a(206),$t=a.p+"static/media/settlement-icon.3a0f06d8.svg",ea=function(e,t){return xt.post("commerce/reporting/get-revenue-report-franchise-wise",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(console.log("res",e),t.setState({reportData:e.data.data.revenue_data}))})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))},ta=function(e,t){return xt.post("commerce/reporting/get-order-and-revenue-report",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(console.log("res",e),t.setState({orderRevenueReport:e.data.data}))})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))},aa=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onSubmit=function(){var e=new URLSearchParams;e.append("settlement_amount",n.props.paybleAmount),e.append("start_date","01-04-2022"),e.append("end_date","30-09-2022"),e.append("franchise_id","626b7471ed1ea0b78cf25ea2"),e.append("attachment_id",n.state.attachment.imageId),e.append("reference_id",n.state.transactionId),function(e,t){xt.post("commerce/reporting/settle-with-franchise",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):t()})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))}(e,n.props.handleClose)},n.state={},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(b.jsx)(Bt,{show:this.props.show,onHide:function(){return e.props.handleClose()},title:"Settle Payment",modalClass:"assign-bike",children:Object(b.jsxs)(U,{onValidSubmit:this.onSubmit,children:[Object(b.jsxs)("div",{className:"modal-wrapper",children:[Object(b.jsxs)("div",{className:"settle-amount-modal",children:[Object(b.jsx)("div",{children:Object(b.jsx)(y.a,{src:$t,className:"settle-pay-icon"})}),Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{children:"Amount"}),Object(b.jsxs)("h4",{className:"red-hat-display-bold f-s-26",children:["\u20b9 ",this.props.paybleAmount]})]})]}),Object(b.jsxs)(Zt.a,{md:12,children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"transactionId"),label:"Transaction Reference ID",required:!0,validations:[{validate:le.isRequired,message:"Transaction Id cannot be empty"},{validate:le.isPositiveInt,message:" Transaction Id cannot be negative"}],control:{type:je,settings:{placeholder:"Enter Transaction Id"}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"attachment"),label:"Attachment",required:!0,validations:[{validate:le.isRequired,message:"File is required"}],control:{type:lt,settings:{moduleName:"commerce",subModule:"settlement",fileType:"IMAGE",extensions:["image/*"],maxFiles:1,maxFileSize:1e8,onSelect:function(e,t){t({id:e.lastModified,name:e.name,size:e.size,mimeType:e.type,path:"single.jpg"},ke)}}}})]})]}),Object(b.jsx)("div",{className:"submit-wrapper",style:{justifyContent:"center"},children:Object(b.jsx)(re,{customClass:"btn black-btn ".concat(!this.state.transactionId&&"inactive-btn"),children:"Settle"})})]})})}}]),a}(M),na=Object(o.b)((function(e){return Object(g.a)({},e)}),{})(aa),sa=a(321),ia=a.p+"static/media/options-icon.e89cb3b5.svg",ra=function(e){return Object(b.jsxs)(sa.a,{children:[Object(b.jsx)(sa.a.Toggle,{id:"dropdown-basic",children:Object(b.jsx)(y.a,{src:ia,className:"options-icon"})}),Object(b.jsx)(sa.a.Menu,{children:e.menuItem.map((function(e,t){return Object(b.jsx)(n.Fragment,{children:"event"===e.type?Object(b.jsx)(sa.a.Item,{onClick:e.handleClick,children:e.title}):Object(b.jsx)(sa.a.Item,{href:e.linkUrl,children:e.title})},t)}))})]})},oa=function(e,t){var a=e.state,n=a.searchText,s=a.searchKey,i=a.conditions,r=new URLSearchParams;r.append("start",(e.state.page-1)*Se),r.append("limit",Se),r.append("conditions",JSON.stringify(n?[{key:s,value:n}]:i||[])),r.append("sorts",JSON.stringify([])),xt.post("/offering/vehicle/search-vehicle",r).then((function(a){if(a.data.error)gt.b.error(a.data.message||"Something went wrong");else if(t){var n=a.data.data.data.results.map((function(e){return{value:e.id,label:e.name}}));e.setState({bikeOptions:n})}else e.setState({vehiclesList:a.data.data.data.results,totalPages:Math.ceil(a.data.data.data.totalCount/Se)})})).catch((function(e){console.log("Catch",e)}))},ca=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(a,n){var s=new URLSearchParams;-1===t?(s.append("start",-1),s.append("limit",-1)):(s.append("start",t*Se||0),s.append("limit",Se)),s.append("conditions",JSON.stringify(e.state.conditions||[])),s.append("sorts",JSON.stringify([])),xt.post("/organisation/user/search-franchises",s).then((function(a){if(-1===t){var n=a.data.data.results.map((function(e){return{value:e.id,label:e.legal_name}}));e.setState({franchiseOptionsList:n})}else e.setState({data:a.data.data.results,totalCount:a.data.data.total_count,totalPage:$e(a.data.data.total_count),page:t})})).catch((function(e){console.log("Catch",e)}))}},la=function(e,t){return function(a,n){var s=new URLSearchParams;s.append("franchise_id",e),xt.post("/organisation/user/get-franchise-details",s).then((function(e){t(e.data.data.franchise)})).catch((function(e){console.log("Catch",e)}))}},da=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(n,s){var i=new URLSearchParams;a?(i.append("start",-1),i.append("limit",-1)):(i.append("start",t*Se||0),i.append("limit",Se)),i.append("conditions",JSON.stringify(e.state.conditions||[])),i.append("sorts",JSON.stringify([])),xt.post("/offering/franchise/search-franchise-locations",i).then((function(n){var s=n.data.data.franchise_locations.results.map((function(e){var t;return{label:(null===(t=e.location_details)||void 0===t?void 0:t.formatted_address)||"Null",value:e.id}}));a?e.setState({franchiseLocationOption:s}):e.setState({data:n.data.data.franchise_locations.results,totalCount:n.data.data.franchise_locations.total_count,totalPage:$e(n.data.data.franchise_locations.total_count),page:t})})).catch((function(e){console.log("Catch",e)}))}},ha=function(e,t){xt.post("/offering/franchise/add-update-franchise-location",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(t(),gt.b.success(e.data.message||"Something went wrong"))})).catch((function(e){console.log("Catch",e)}))},ua=function(e){var t=new URLSearchParams;t.append("franchise_location_id",e.state.locationId),xt.post("/offering/franchise/get-franchise-location-details",t).then((function(t){t.data.error?gt.b.error(t.data.message||"Something went wrong"):e.setState({data:t.data.data.franchise_location,conditions:[{key:"SEARCH_BY_FRANCHISE_LOCATION_ID",value:t.data.data.franchise_location.id}]},(function(){oa(e)}))})).catch((function(e){console.log("Catch",e)}))},ma=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).filterSearch=function(e,t,a){n.setState({fromDate:e,toDate:t,franchiseId:a}),n.getSettlementReport(n.state.selectedTab,e,t,a)},n.getSettlementReport=function(e,t,a,s){!function(e,t,a,n,s){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,r=new URLSearchParams;r.append("start",i*Se||0),r.append("limit",Se),r.append("conditions",JSON.stringify([])),r.append("sorts",JSON.stringify([])),r.append("send_settled_data",30!=t),r.append("start_date",a),r.append("end_date",n),r.append("franchise_id",s),xt.post("commerce/reporting/get-settlement-report",r).then((function(t){t.data.error?gt.b.error(t.data.message||"Something went wrong"):e.setState({settlementReport:t.data.data.results,settlementData:t.data.data.settlement_aggregate})})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))}(Object(u.a)(n),e,t,a,s)},n.setKey=function(e){n.setState({selectedTab:e,page:1,conditions:[{key:"default"===e?"Settled":"Unsettled",value:"default"===e||parseInt(e)}]},(function(){new URLSearchParams;n.getSettlementReport(n.state.selectedTab,n.state.fromDate,n.state.toDate,n.state.franchiseId)})),n.props.history.replace({search:"?tab=".concat(e,"&p=1")})},n.handleSettlementPayModal=function(){n.setState({showSettlePaymentModal:!n.state.showSettlePaymentModal})},n.showSettledData=function(e,t){return Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:e,columnList:[{coumnWidth:280,labelName:"Settlement ID",dataKey:"id",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("id"===t)return e.id}},{coumnWidth:250,labelName:"Amount (\u20b9)",dataKey:"final_amount",className:"",isCell:!0,cell:function(e,t){if("final_amount"===t)return e.final_amount}},{coumnWidth:300,labelName:"End Time",dataKey:"settled_on",className:"",isCell:!0,cell:function(e,t){if("settled_on"===t)return Xe()(e.settled_on).format("LLL")}},{coumnWidth:350,labelName:"Transaction Reference ID",dataKey:"reference_id",className:"",isCell:!0,cell:function(e,t){if("reference_id"===t)return e.reference_id}}]})})},n.showTable=function(e,t){return Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:e,columnList:[{coumnWidth:150,labelName:"Order Id",dataKey:"code",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("code"===t)return e.code}},{coumnWidth:150,labelName:"Vehicle",dataKey:"status",className:"",isCell:!0,cell:function(e,t){var a,n;if("status"===t)return(null===e||void 0===e||null===(a=e.vehicle_inventory_details)||void 0===a?void 0:a.name)+"-"+(null===e||void 0===e||null===(n=e.vehicle_inventory_details)||void 0===n?void 0:n.registration_no)}},{coumnWidth:250,labelName:"Start Time",dataKey:"start_datetime",className:"",isCell:!0,cell:function(e,t){if("start_datetime"===t)return Xe()(e.start_datetime).format("LLL")}},{coumnWidth:250,labelName:"End Time",dataKey:"end_datetime",className:"",isCell:!0,cell:function(e,t){if("end_datetime"===t)return Xe()(e.end_datetime).format("LLL")}},{coumnWidth:150,labelName:"Total Fare (\u20b9)",dataKey:"total_amount",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("total_amount"===t)return e.total_amount}},{coumnWidth:150,labelName:"Status",dataKey:"status",className:"",isCell:!0,cell:function(e,t){if("status"===t)return Ke.getText(e.status)}}],message:"No Data Found"})})};var s=JSON.parse(localStorage.getItem("userDetails"));return n.state={settlementReport:[],selectedTab:"30",showSettlePaymentModal:!1,userDetails:s,isFranchise:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.state.userDetails.user_account_type!==Ie.COMPANY?this.setState({isFranchise:!0}):this.props.getAllFranchiseApi(this,-1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.settlementData,n=t.settlementReport,s=t.franchiseOptionsList,i=tt();return Object(b.jsxs)(b.Fragment,{children:[this.state.showSettlePaymentModal&&Object(b.jsx)(na,{bookingId:this.state.bookingId,show:this.state.showSettlePaymentModal,handleClose:this.handleSettlementPayModal,paybleAmount:null===a||void 0===a?void 0:a.payable_to_franchise.toFixed(2)}),Object(b.jsx)(Yt,{breadcrumb:!0,currentPage:"Company Settlement",title:"Settlement",isFilter:!1,isSearch:!1,placeholder:"Search Bookings",isSettleSearch:!0,franchiseOptionsList:s,filterSearch:this.filterSearch,isFranchise:this.state.isFranchise}),n?Object(b.jsxs)("div",{className:"settlement-wrapper",children:[Object(b.jsxs)("div",{className:"header",children:[Object(b.jsx)("h1",{className:"red-hat-display-bold f-s-16",children:"Revenue & Payment Settlement"}),Object(b.jsxs)("div",{className:"settlement-box",children:[Object(b.jsx)("div",{className:"card-info b-right",children:Object(b.jsxs)("div",{children:[Object(b.jsxs)("h3",{className:"red-hat-display-bold f-s-20",children:["\u20b9"," ",null!==a&&void 0!==a&&a.total_platform_amount?((null===a||void 0===a?void 0:a.total_franchise_amount)+(null===a||void 0===a?void 0:a.total_platform_amount)).toFixed(2):"0"," "]}),Object(b.jsx)("p",{className:"red-hat-display-regular f-s-16",children:"Total Revenue"})]})}),Object(b.jsx)("div",{className:"card-info b-right",children:Object(b.jsxs)("div",{children:[Object(b.jsxs)("h3",{className:"red-hat-display-bold f-s-20",children:["\u20b9"," ",a?a.total_platform_amount.toFixed(2):"0"]}),Object(b.jsx)("p",{className:"red-hat-display-regular f-s-16",children:"Company Revenue"})]})}),Object(b.jsx)("div",{className:"card-info b-right",children:Object(b.jsxs)("div",{children:[Object(b.jsxs)("h3",{className:"red-hat-display-bold f-s-20",children:["\u20b9"," ",a?a.total_franchise_amount.toFixed(2):"0"," "]}),Object(b.jsx)("p",{className:"red-hat-display-regular f-s-16",children:"Franchise Revenue"})]})}),Object(b.jsx)("div",{className:"card-info",children:Object(b.jsxs)("div",{children:[Object(b.jsxs)("h3",{className:"red-hat-display-bold f-s-20",children:["\u20b9"," ",a?a.payable_to_franchise.toFixed(2):"0"," "]}),Object(b.jsx)("p",{className:"red-hat-display-regular f-s-16",children:"Payable Amount"})]})}),!this.state.isFranchise&&Object(b.jsx)("div",{children:(null===a||void 0===a?void 0:a.payable_to_franchise)&&Object(b.jsx)(V.a,{className:"btn black-btn",onClick:this.handleSettlementPayModal,children:"Settle Payment"})})]})]}),Object(b.jsxs)("div",{className:"settlement-info",children:[Object(b.jsx)("h2",{className:"red-hat-display-bold f-s-20",children:"Orders"}),Object(b.jsxs)(Kt.a,{id:"controlled-tab-example",activeKey:this.state.selectedTab,onSelect:function(t){return e.setKey(t)},className:"pricing-tabs",children:[Object(b.jsx)(Wt.a,{eventKey:"30",title:"Unsettled",children:this.showTable(n,i)}),Object(b.jsx)(Wt.a,{eventKey:"default",title:"Settled",children:this.showSettledData(n,i)})]})]})]}):Object(b.jsxs)("div",{className:"not-found-wrapper",children:[Object(b.jsx)(y.a,{src:Jt}),Object(b.jsxs)("p",{className:"red-hat-display-medium f-s-16 black-404",children:[" ","No Data Found"]})]})]})}}]),a}(n.Component),pa={getAllFranchiseApi:ca},ba=Object(o.b)((function(e){return{settlementState:e.SettlementState}}),pa)(ma),ja="RECEIVE_POSTS",ga={otpReceived:!1,otpCode:"",otpVerified:!1,countryCode:"+91",userObj:null,cnbcActive:!1},va=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga,t=arguments.length>1?arguments[1]:void 0;return t.type===ja?Object(g.a)(Object(g.a)({},e),{},{json:t.json}):e},fa=function(e){var t=!1!==e.handleBtn;return Object(b.jsxs)("div",{className:"switch-wrapper",children:[t&&Object(b.jsxs)("label",{className:"switch",children:[Object(b.jsx)("input",{type:"checkbox",checked:e.checked,onChange:e.handleClick}),Object(b.jsx)("span",{className:"slider round"})]}),Object(b.jsx)("span",{className:"".concat(e.checked?"active":"inactive"),children:e.checked?"Active":"Inactive"})]})},Oa=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).onChangeMethod=function(e){n.setState({searchValue:e,conditions:[{key:"SEARCH_BY_TEXT",value:e.search}]}),Ze(n.props.history,0,e.search),n.props.getAllFranchiseApi(Object(u.a)(n),0)},n.clearSearch=function(e){n.setState({searchValue:"",conditions:[]},(function(){0===e&&n.props.getAllFranchiseApi(Object(u.a)(n),0)})),Ze(n.props.history,1)},n.handleAddEditFranchise=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?n.props.history.push({pathname:"/franchise/edit-franchise/".concat(e),state:{data:e}}):n.props.history.push("/franchise/add-franchise")},n.handleViewFranchise=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.props.history.push("/franchise/view-franchise/".concat(e))};var s=e.location.search,i=new URLSearchParams(s).get("p");return n.state={data:[],conditions:[],page:i?parseInt(i,10):1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllFranchiseApi(this),this.props.history.replace({search:"?p=".concat(this.state.page)})}},{key:"componentDidUpdate",value:function(e,t){var a=new URLSearchParams(e.location.search),n=parseInt(a.get("p"),10)||1,s=new URLSearchParams(this.props.location.search),i=parseInt(s.get("p"),10)||1,r=s.get("search")||"";n!==i&&(r?this.props.getAllFranchiseApi(this):this.props.getAllFranchiseApi(this,i-1))}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.page,s=t.totalPage,i=tt();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!1,breadcrumb:!0,currentPage:"Franchise",title:"Franchise",isFilter:!1,isPrimaryBtn:function(){return e.handleAddEditFranchise()},primaryBtnText:i.includes(Te.ADD_UPDATE_FRANCHISE)?"+ Add Franchise":"",isSearch:!0,placeholder:"Search Franchise",onChangeMethod:this.onChangeMethod,clearSearch:function(){return e.clearSearch(n||0)}}),Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:a,columnList:[{coumnWidth:250,labelName:"Account Name",dataKey:"name",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("name"===t)return e.name}},{coumnWidth:250,labelName:"Account Email",dataKey:"email",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("email"===t)return e.billing_email}},{coumnWidth:250,labelName:"Contact",dataKey:"email",className:"",isCell:!0,cell:function(e,t){if("email"===t)return e.billing_contact}},{coumnWidth:350,labelName:"Operation Status",dataKey:"is_operational",className:"red-hat-display-bold",isCell:!0,cell:function(t,a){if("is_operational"===a)return Object(b.jsx)(fa,{checked:t.active,handleClick:function(){return e.handleToggle(t)},handleBtn:!1})}},{coumnWidth:50,labelName:"",dataKey:"options",className:"options-column",isCell:!0,cell:function(t,a){if("options"===a){var n=[];return i.includes(Te.ADD_UPDATE_FRANCHISE)&&n.push({title:"Edit",type:"event",handleClick:function(){return e.handleAddEditFranchise(t.id)}}),i.includes(Te.VIEW_FRANCHISE)&&n.push({title:"View",type:"event",handleClick:function(){return e.handleViewFranchise(t.id)}}),Object(b.jsx)(ra,{menuItem:n})}}}],history:this.props.history,location:this.props.location,totalPages:s,currentPage:n,message:"Franchise list is empty"})})]})}}]),a}(n.Component),ya={getAllFranchiseApi:ca},xa=Object(o.b)((function(e){return{franchiseState:e.FranchiseState}}),ya)(Oa),Na="SET_FRANCHISE_LOCATION",Sa={franchiseLocationData:""},Ca=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sa,t=arguments.length>1?arguments[1]:void 0;return t.type===Na?Object(g.a)(Object(g.a)({},e),{},{franchiseLocationData:t.payload}):e},ka=a(318),Aa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(a,n){var s=new URLSearchParams;s.append("start",t*Se||0),s.append("limit",Se),s.append("conditions",JSON.stringify(e.state.conditions||[])),s.append("sorts",JSON.stringify([])),xt.post("/organisation/user/search-accounts",s).then((function(a){e.setState({data:a.data.data.results,totalCount:a.data.data.total_count,totalPage:$e(a.data.data.total_count),page:t})})).catch((function(e){console.log("Catch",e)}))}},_a=function(e,t){return xt.post("/organisation/user/add-new-account",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(t(),gt.b.success(e.data.message||"Something went wrong"))})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))},Ea=function(e){return function(t,a){var n=new URLSearchParams;n.append("account_type",e.state.userAccountType?e.state.userAccountType:JSON.parse(localStorage.getItem("userDetails")).user_account_type),xt.post("/organisation/authorization/get-all-roles-by-account-type",n).then((function(t){var a=t.data.data.roles.map((function(e){return{label:e.name,value:e.id}}));e.setState({rolesOption:a})})).catch((function(e){console.log("Catch",e)}))}},wa=a.p+"static/media/delete-icon.65cf768e.svg",Ia=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).setFranchiseData=function(e){console.log(e,"data");var t=[];e&&e.document_details&&e.document_details.map((function(e){return t.push({documentName:e.name,document:{imageId:e.attachment_info.id,name:e.attachment_info.name,path:e.attachment_info.url}})})),n.setState({id:e.id,accountName:e.legal_name,accountEmail:e.billing_email,accountPhone:e.billing_contact,areaIds:e.extra_information.operational_areas,rentalRevenuePercent:e.extra_information.rental_revenue_percent,cancellationRevenuePercent:e.extra_information.cancellation_revenue_percent,damageRevenuePercent:e.extra_information.damage_revenue_percent,countryId:e.billing_address[0].country_id,stateId:e.billing_address[0].state_id,cityId:e.billing_address[0].city_id,block:e.billing_address[0].block_address,taxRegNumber:e.billing_address[0].tax_reg_number,billingContact:e.billing_address[0].contact_number,billingAddressId:e.billing_address[0].id,documentDetails:t})},n.handleSave=function(){var e=new URLSearchParams;e.append("account_name",n.state.accountName),e.append("account_email",n.state.accountEmail),e.append("account_contact_number",n.state.accountPhone),n.state.id||(e.append("poc_name",n.state.pocName),e.append("poc_number",n.state.pocNumber),e.append("poc_email",n.state.pocEmail),e.append("role_ids",JSON.stringify(n.state.role))),e.append("rental_revenue_percent",n.state.rentalRevenuePercent),e.append("cancellation_revenue_percent",n.state.cancellationRevenuePercent),e.append("damage_revenue_percent",n.state.damageRevenuePercent),e.append("operational_areas",JSON.stringify(n.state.areaIds)),e.append("billing_address",JSON.stringify({id:n.state.billingAddressId,country_id:n.state.countryId,state_id:n.state.stateId,city_id:n.state.cityId,block_address:n.state.block,tax_reg_number:n.state.taxRegNumber,contact_name:"",contact_number:n.state.billingContact}));var t=[];n.state.documentDetails.map((function(e){return t.push({name:e.documentName,type:Fe,attachment_id:e.document.imageId})})),e.append("document_details",JSON.stringify(t)),n.state.id?(e.append("franchise_id",n.state.id),n.props.updatetFranchiseApi(e,(function(){return n.props.history.goBack()}))):n.props.addEditFranchiseApi(e,(function(){return n.props.history.goBack()}))},n.onNextClick=function(){r.a.findDOMNode(n.form).dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},n.handleAddMore=function(){var e=n.state.documentDetails.map((function(e){return Object(g.a)({},e)}));e.push({documentName:"",document:""}),n.setState({documentDetails:e})},n.handleRemove=function(e){var t=n.state.documentDetails.map((function(e){return Object(g.a)({},e)}));t.splice(e,1),n.setState({documentDetails:t})};var s=e.match.params.franchiseId?e.match.params.franchiseId:"";return n.state={id:s,accountName:"",accountEmail:"",accountPhone:"",rentalRevenuePercent:"",cancellationRevenuePercent:"",damageRevenuePercent:"",areaList:[],cityList:[],stateList:[],countryList:[],role:[],roleList:[],areaIds:[],cityId:"",stateId:"",countryId:"",attachment:[],franchiseSet:"",billingAddressId:"",documentDetails:[{documentName:"",document:""}],userAccountType:Ie.FRANCHISE},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllRolesApi(this),this.props.getAllLocationApi(this,Le.COUNTRY),this.props.getAllLocationApi(this,Le.STATE),this.props.getAllLocationApi(this,Le.CITY),this.props.getAllLocationApi(this,Le.AREA),this.state.id&&this.props.getFranchiseByIdApi(this.state.id,this.setFranchiseData)}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:this.state.id?"Edit Franchise":"Add Franchise",secondaryBtnText:"Cancel",isSecondaryBtn:function(){return e.props.history.goBack()},isPrimaryBtn:this.onNextClick,primaryBtnText:"Save Franchise"}),Object(b.jsx)("div",{className:"add-edit-customer-wrapper",children:Object(b.jsx)("div",{className:"content",children:Object(b.jsxs)(U,{onValidSubmit:this.handleSave,ref:function(t){return e.form=t},children:[Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"accountName"),label:"Name",required:!0,validations:[{validate:le.isRequired,message:"Name cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Name"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"accountPhone"),label:"Contact Number",required:!0,validations:[{validate:le.isRequired,message:"Number cannot be empty"},{validate:le.isPhone,message:"Please enter a valid number"}],control:{type:je,settings:{placeholder:"Enter Contact Number"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"accountEmail"),label:"Email",disabled:!!this.state.id,required:!0,validations:[{validate:le.isRequired,message:"Email cannot be empty"},{validate:le.isEmail,message:"Please enter a valid email"}],control:{type:je,settings:{placeholder:"Enter Email"}}})})]}),!this.state.id&&Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"pocName"),label:"POC Name",required:!0,validations:[{validate:le.isRequired,message:"Name cannot be empty"}],control:{type:je,settings:{placeholder:"Enter POC Name"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"pocNumber"),label:"POC Contact",required:!0,validations:[{validate:le.isRequired,message:"Number cannot be empty"},{validate:le.isPhone,message:"Please enter a valid number"}],control:{type:je,settings:{placeholder:"Enter POC Contact"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"pocEmail"),label:"POC Email",required:!0,validations:[{validate:le.isRequired,message:"Email cannot be empty"},{validate:le.isEmail,message:"Please enter a valid email"}],control:{type:je,settings:{placeholder:"Enter POC Email"}}})})]}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"areaIds"),label:"Area",required:!0,validations:[{validate:le.isRequired,message:"Area cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Area",options:this.state.areaList,multiple:!0,searchable:!0,onChangeCallback:function(t){t(e.state.areaIds)}}}})}),!this.state.id&&Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"role"),label:"Role",required:!0,validations:[{validate:le.isRequired,message:"Role cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Role",options:this.state.rolesOption,multiple:!0,searchable:!0,onChangeCallback:function(t){t(e.state.role)}}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"rentalRevenuePercent"),label:"Rental Revenue Percentage",required:!0,validations:[{validate:le.isRequired,message:"Rental revenue percentage cannot be empty"},{validate:le.isPositiveInt,message:"Please enter a valid x number"}],control:{type:je,settings:{placeholder:"Enter Rental Revenue Percentage"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"cancellationRevenuePercent"),label:"Cancellation Revenue Percentage",required:!0,validations:[{validate:le.isRequired,message:"Cancellation revenue percentage cannot be empty"},{validate:le.isPositiveInt,message:"Please enter a valid x number"}],control:{type:je,settings:{placeholder:"Enter Cancellation Revenue Percentage"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"damageRevenuePercent"),label:"Damage Revenue Percentage",required:!0,validations:[{validate:le.isRequired,message:"Damage revenue percentage cannot be empty"},{validate:le.isPositiveInt,message:"Please enter a valid x number"}],control:{type:je,settings:{placeholder:"Enter Damage Revenue Percentage"}}})})]}),Object(b.jsx)("hr",{}),Object(b.jsx)("br",{}),Object(b.jsx)("h4",{children:"Billing address"}),Object(b.jsx)("br",{}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"countryId"),label:"Country",required:!0,validations:[{validate:le.isRequired,message:"Country cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Country",options:this.state.countryList,multiple:!1,searchable:!0,onChangeCallback:function(t){e.setState({stateId:"",cityId:"",countryId:e.state.countryId},(function(){e.props.getAllLocationApi(e,Le.STATE)}))}}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"stateId"),label:"State",required:!0,validations:[{validate:le.isRequired,message:"State cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select State",options:this.state.stateList,multiple:!1,searchable:!0,onChangeCallback:function(t){e.setState({cityId:"",stateId:e.state.stateId},(function(){e.props.getAllLocationApi(e,Le.CITY)})),t(e.state.stateId)}}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"cityId"),label:"City",required:!0,validations:[{validate:le.isRequired,message:"City cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select City",options:this.state.cityList,multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.cityId)}}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"block"),label:"Block Address",required:!0,validations:[{validate:le.isRequired,message:"Name cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Block"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"taxRegNumber"),label:"Tax Reg Number",required:!0,validations:[{validate:le.isRequired,message:"Name cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Tax Rgister Number"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"billingContact"),label:"Contact Number",required:!0,validations:[{validate:le.isRequired,message:"Number cannot be empty"},{validate:le.isPhone,message:"Please enter a valid number"}],control:{type:je,settings:{placeholder:"Enter Contact Number"}}})})]}),Object(b.jsx)("hr",{}),Object(b.jsx)("br",{}),Object(b.jsx)(ka.a,{children:Object(b.jsx)(Zt.a,{sm:12,children:Object(b.jsx)("h4",{children:"Document Details"})})}),Object(b.jsx)("br",{}),this.state.documentDetails.map((function(t,a){return Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:e.linkState(e,"documentDetails.".concat(a,".documentName")),label:"Document Name",required:!0,validations:[{validate:le.isRequired,message:"Document name cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Document Name"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:e.linkState(e,"documentDetails.".concat(a,".document")),label:"Upload file",required:!0,validations:[{validate:le.isRequired,message:"File is required"}],control:{type:lt,settings:{moduleName:"organization",subModule:"account",fileType:"IMAGE",extensions:["image/*"],maxFiles:1,maxFileSize:1e8,onSelect:function(t,a){a({id:t.lastModified,name:t.name,size:t.size,mimeType:t.type,path:"multi"+(e.state.documentDetails.length+1)+".jpg"},ke)}}}})}),Object(b.jsx)(Zt.a,{sm:2,children:Object(b.jsx)(y.a,{className:"delete-icon",src:wa,onClick:function(){return e.handleRemove(a)}})})]})})),Object(b.jsx)(ka.a,{children:Object(b.jsx)(Zt.a,{sm:12,className:"add-more-section",children:Object(b.jsx)(V.a,{className:"btn black-btn",onClick:this.handleAddMore,children:"+ Add More Document"})})})]})})})]})}}]),a}(M),La={getAllRolesApi:Ea,getAllLocationApi:Nt,addEditFranchiseApi:function(e,t){return xt.post("/organisation/user/add-new-franchise",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(t(),gt.b.success(e.data.message||"Something went wrong"))})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))},getFranchiseByIdApi:la,updatetFranchiseApi:function(e,t){return xt.post("/organisation/user/update-franchise",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(t(),gt.b.success(e.data.message||"Something went wrong"))})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))}},Da=Object(o.b)((function(e){return{userManagementState:e.UserManagementState}}),La)(Ia),Pa=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onSubmit=function(){var e=new URLSearchParams;e.append("vehicle_ids",JSON.stringify(n.state.vehicleIds)),n.props.isFranchiseLocation?(e.append("franchise_location_id",n.props.locationId),function(e,t,a){xt.post("offering/vehicle/add-update-vehicle-franchise-location",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(gt.b.success(e.data.message),t(),oa(a))})).catch((function(e){console.log("Catch",e)}))}(e,n.props.handleClose,n.props.ctx)):(e.append("franchise_id",n.props.franchiseId),function(e,t,a){xt.post("offering/vehicle/assign-vehicles-to-franchise",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(gt.b.success(e.data.message),t(),oa(a,!1))})).catch((function(e){console.log("Catch",e)}))}(e,n.props.handleClose,n.props.ctx))},n.state={regNo:"",vehicleData:"",isApiCall:!1,bikeOptions:[],vehicleIds:"",page:1,totalPages:1,conditions:e.isFranchiseLocation?[{key:"SEARCH_BY_ACCOUNT_ID",value:e.franchiseId},{key:"SEARCH_BY_FRANCHISE_LOCATION_ID",value:null}]:[{key:"SEARCH_BY_ACCOUNT_ID",value:[]}]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){oa(this,!0)}},{key:"render",value:function(){var e=this;return Object(b.jsx)(Bt,{show:this.props.show,onHide:function(){return e.props.handleClose()},title:"Allocate Vehicle",children:Object(b.jsxs)(U,{onValidSubmit:this.onSubmit,children:[Object(b.jsx)("div",{className:"modal-wrapper",children:Object(b.jsx)(te,{valueLink:this.linkState(this,"vehicleIds"),label:"Vechicle",required:!0,validations:[{validate:le.isRequired,message:"Vechicle name cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Vehicle",options:this.state.bikeOptions,multiple:!0,searchable:!0,onChangeCallback:function(){}}}})}),Object(b.jsx)("div",{className:"submit-wrapper",style:{justifyContent:"right"},children:Object(b.jsx)(re,{customClass:"btn black-btn ".concat(!this.state.vehicleIds&&"inactive-btn"),children:"Done"})})]})})}}]),a}(M);Pa.propTypes={show:T.a.bool.isRequired,handleClose:T.a.func.isRequired};var Ta=Pa,Ra=a.p+"static/media/alert-icon.b05d0228.svg",Ma=a.p+"static/media/success-icon.9c40d13b.svg",Ba=function(e){var t=e.infoUpdateStatus,a=e.type,n=e.text,s=e.show,i=e.handleClose,r=e.handleArchive,o=e.errorText,c=e.actionText,l={success:1,warning:2};return Object(b.jsx)(Mt.a,{show:s,onHide:i,dialogClassName:"info-modal",children:Object(b.jsxs)(Mt.a.Body,{children:[Object(b.jsxs)("div",{className:"info-modal-wrap",children:[Object(b.jsx)("div",{className:"icon",children:Object(b.jsx)(y.a,{src:1===l[a]?Ma:Ra,alt:"warning",responsive:!0})}),Object(b.jsxs)("div",{className:"content",children:[t?"You\u2019ve successfully updated":1===l[a]?"You\u2019ve successfully added ":"Are you sure you want to ".concat(c),Object(b.jsx)("br",{}),Object(b.jsx)("span",{className:"dark-card-title-l",children:n}),o&&Object(b.jsx)("p",{className:"error-text",children:o})]})]}),Object(b.jsxs)("div",{className:"btn-wrap",children:[2===l[a]&&Object(b.jsx)(V.a,{onClick:r,className:"btn black-btn",children:"YES"}),Object(b.jsx)(V.a,{onClick:i,className:"btn secondary-btn",children:1===l[a]?"OK":"NO"})]})]})})},Fa=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).setFranchiseData=function(e){n.setState({franchiseData:e})},n.areaName=function(e){var t=[];return 0===e.length&&(t="NA"),e.map((function(a,n){return e.length===n+1?t.push(a.name):t.push(a.name+",")})),t},n.handleVehicleAllocation=function(){n.setState({showAllocationModal:!n.state.showAllocationModal})},n.handleConfirmation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.setState({showConfirmationModal:!n.state.showConfirmationModal,vehicleData:e})},n.removeVehicle=function(){var e=new URLSearchParams;e.append("vehicle_ids",JSON.stringify([n.state.vehicleData.id])),e.append("franchise_id",n.state.franchiseId),function(e,t,a){xt.post("offering/vehicle/remove-vehicles-from-franchise",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(gt.b.success(e.data.message),t(),oa(a,!1))})).catch((function(e){console.log("Catch",e)}))}(e,n.handleConfirmation,Object(u.a)(n))};var s=e.location.search,i=new URLSearchParams(s).get("p"),r=e.match.params.franchiseId?e.match.params.franchiseId:"";return n.state={franchiseId:r,vehiclesList:[],page:i?parseInt(i,10):1,totalPages:1,searchText:r,searchKey:"SEARCH_BY_ACCOUNT_ID",showAllocationModal:!1,showConfirmationModal:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.state.franchiseId&&this.props.getFranchiseByIdApi(this.state.franchiseId,this.setFranchiseData),oa(this)}},{key:"render",value:function(){var e=this,t=this.state.franchiseData&&this.state.franchiseData,a=this.state.vehiclesList;return Object(b.jsxs)("div",{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:"View Franchise"}),this.state.showAllocationModal&&Object(b.jsx)(Ta,{show:this.state.showAllocationModal,handleClose:function(t){return e.handleVehicleAllocation()},franchiseId:this.state.franchiseId,ctx:this}),this.state.showConfirmationModal&&Object(b.jsx)(Ba,{show:this.state.showConfirmationModal,handleClose:this.handleConfirmation,type:"warning",actionText:"remove",handleArchive:this.removeVehicle,text:this.state.vehicleData&&this.state.vehicleData.registrationNo}),t&&t.id?Object(b.jsx)("div",{className:"order-details-wrapper add-edit-customer-wrapper",children:Object(b.jsxs)("div",{className:"content view-detail-page",children:[Object(b.jsxs)("div",{className:"basic-details",children:[Object(b.jsx)("h2",{children:"Basic Details"}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Account Name"}),Object(b.jsx)("h3",{className:"regular lg",children:t.legal_name})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Account Email"}),Object(b.jsx)("h3",{className:"regular lg",children:t.billing_email})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Account Name"}),Object(b.jsx)("h3",{className:"regular lg",children:t.billing_contact})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Rental Revenue Percentage"}),Object(b.jsx)("h3",{className:"regular lg",children:t.extra_information.rental_revenue_percentage||"NA"})]})})]}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Cancellation Revenue Percentage"}),Object(b.jsx)("h3",{className:"regular lg",children:t.extra_information.cancellation_revenue_percentage||"NA"})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Damage Revenue Percentage"}),Object(b.jsx)("h3",{className:"regular lg",children:t.extra_information.damage_revenue_percentage||"NA"})]})}),Object(b.jsxs)(Zt.a,{sm:3,xs:12,children:[Object(b.jsx)("h4",{className:"regular",children:"Area"}),Object(b.jsx)("h3",{className:"regular lg",children:this.areaName(t.areas)})]}),Object(b.jsx)(Zt.a,{sm:3,xs:12})]})]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{className:"basic-details",children:[Object(b.jsx)("h2",{children:"Billing address"}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Country"}),Object(b.jsx)("h3",{className:"regular lg",children:t.billing_address[0].country.name})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"State"}),Object(b.jsx)("h3",{className:"regular lg",children:t.billing_address[0].state.name})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"City"}),Object(b.jsx)("h3",{className:"regular lg",children:t.billing_address[0].city.name})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Block Address"}),Object(b.jsx)("h3",{className:"regular lg",children:t.billing_address[0].block_address})]})})]}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Tax Reg Number"}),Object(b.jsx)("h3",{className:"regular lg",children:t.billing_address[0].tax_reg_number})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Contact Number"}),Object(b.jsx)("h3",{className:"regular lg",children:t.billing_address[0].contact_number})]})})]})]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{className:"basic-details",children:[Object(b.jsxs)("div",{className:"map-vehicle-wrapper",children:[Object(b.jsx)("h2",{children:"Mapped Vechicles"}),Object(b.jsx)(V.a,{className:"btn black-btn",onClick:this.handleVehicleAllocation,children:"Add Vechicle"})]}),Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:a,columnList:[{coumnWidth:250,labelName:"Model Name",dataKey:"modelInfo",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("modelInfo"===t)return e.modelInfo?e.modelInfo.modelName:"-"}},{coumnWidth:250,labelName:"Chassis Number",dataKey:"chassisNo",className:"",isCell:!0,cell:function(e,t){if("chassisNo"===t)return e.chassisNo}},{coumnWidth:250,labelName:"Registration number",dataKey:"registrationNo",className:"",isCell:!0,cell:function(e,t){if("registrationNo"===t)return e.registrationNo||"NA"}},{coumnWidth:250,labelName:"Battery Status",dataKey:"batteryStatus",className:"",isCell:!0,cell:function(e,t){if("batteryStatus"===t)return Object(b.jsxs)("p",{className:"status",children:[" ",Object(b.jsx)("span",{className:"circle ".concat(e.attachedBatteries.length>0&&e.attachedBatteries[0].active?"active":"inactive")})," ",e.attachedBatteries.length>0&&e.attachedBatteries[0].active?"Attached":"Inactive"]})}},{coumnWidth:250,labelName:"Iot Status",dataKey:"iotStatus",className:"",isCell:!0,cell:function(e,t){if("iotStatus"===t)return Object(b.jsxs)("p",{className:"status",children:[" ",Object(b.jsx)("span",{className:"circle ".concat(e.attachedTelematics&&e.attachedTelematics.active?"active":"inactive")})," ",e.attachedTelematics&&e.attachedTelematics.active?"Attached":"Inactive"]})}},{coumnWidth:250,labelName:"",dataKey:"options",className:"options-column",isCell:!0,cell:function(t,a){if("options"===a)return Object(b.jsx)(V.a,{className:"btn secondary-btn option-btn",onClick:function(){return e.handleConfirmation(t)},children:"Remove"})}}],history:this.props.history,location:this.props.location,totalPages:this.state.totalPages,currentPage:this.state.page-1,message:"Vehicle list is empty"})})]})]})}):Object(b.jsxs)("div",{className:"not-found-wrapper",children:[Object(b.jsx)(y.a,{src:Jt}),Object(b.jsxs)("p",{className:"red-hat-display-medium f-s-16 black-404",children:["No Franchise Data"," "]})]})]})}}]),a}(n.Component),Ua={getFranchiseByIdApi:la},Va=Object(o.b)((function(e){return Object(g.a)({},e)}),Ua)(Fa),qa=a(210),Ya=a.n(qa),Ka=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(Bt,{show:this.props.show,onHide:function(){return e.props.handleClose()},title:"QR Code",modalClass:"qr-code-modal",children:[Object(b.jsx)(Ya.a,{value:JSON.stringify(this.props.value)}),Object(b.jsx)("div",{className:"submit-wrapper",style:{justifyContent:"center"},children:Object(b.jsx)(V.a,{className:"btn black-btn",onClick:function(){return e.props.handleClose()},children:"Okay"})})]})}}]),a}(M);Ka.propTypes={show:T.a.bool.isRequired,handleClose:T.a.func.isRequired};var Wa=Ka,Ha=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).onChangeMethod=function(e){n.setState({searchValue:e,conditions:[{key:"SEARCH_BY_TEXT",value:e.search}]}),Ze(n.props.history,0,e.search),n.props.getAllFranchiseLocationApi(Object(u.a)(n),0)},n.clearSearch=function(e){n.setState({searchValue:"",conditions:[]},(function(){0===e&&n.props.getAllFranchiseLocationApi(Object(u.a)(n),0)})),Ze(n.props.history,1)},n.handleAddEditFranchiseLocation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?n.props.history.push({pathname:"/franchise-location/edit-franchise-location/".concat(e.franchise_account_id),state:{data:e}}):n.props.history.push("/franchise-location/add-franchise-location")},n.handleViewFranchiseLocation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.props.history.push({pathname:"/franchise-location/view-franchise-location/".concat(e.id)})},n.handleViewQRCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.setState({franchiseData:e?{franchise_location_id:e.id,latitude:e.location_details.geometry.location.lat,longitude:e.location_details.geometry.location.lng}:"",showQRCode:!n.state.showQRCode})};var s=e.location.search,i=new URLSearchParams(s).get("p"),r=JSON.parse(localStorage.getItem("userDetails"));return n.state={userDetails:r,data:[],franchiseOptionsList:[],franchiseId:"",conditions:r.user_account_type!==Ie.COMPANY?[{key:"SEARCH_BY_FRANCHISE_ID",value:r.id}]:[],page:i?parseInt(i,10):1,showQRCode:!1,franchiseData:""},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.state.userDetails.user_account_type!==Ie.COMPANY?this.props.getAllFranchiseLocationApi(this):this.props.getAllFranchiseApi(this,-1),this.props.history.replace({search:"?p=".concat(this.state.page)})}},{key:"componentDidUpdate",value:function(e,t){var a=new URLSearchParams(e.location.search),n=parseInt(a.get("p"),10)||1,s=new URLSearchParams(this.props.location.search),i=parseInt(s.get("p"),10)||1,r=s.get("search")||"";n!==i&&(r?this.props.getAllFranchiseLocationApi(this):this.props.getAllFranchiseLocationApi(this,i-1))}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.page,s=t.totalPage,i=t.userDetails,r=t.franchiseOptionsList,o=t.showQRCode,c=t.franchiseData,l=tt();return Object(b.jsxs)(b.Fragment,{children:[o&&Object(b.jsx)(Wa,{show:o,handleClose:function(){return e.handleViewQRCode()},value:c}),Object(b.jsx)(Yt,{backArrowBtn:!1,breadcrumb:!0,currentPage:"Franchise Location",title:"Franchise Location",isFilter:!1,isPrimaryBtn:function(){return e.handleAddEditFranchiseLocation()},primaryBtnText:l.includes(Te.ADD_UPDATE_FRANCHISE_LOCATION)?"+ Add Franchise Location":""}),i.user_account_type===Ie.COMPANY&&Object(b.jsx)("div",{className:"state-wrapper",children:Object(b.jsx)(U,{onValidSubmit:this.onValidSubmit,ref:function(t){return e.form=t},children:Object(b.jsx)(ka.a,{children:Object(b.jsx)(Zt.a,{sm:6,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"franchiseId"),label:"Select Franchise",required:!0,validations:[{validate:le.isRequired,message:"Franchise cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Franchise",options:r,multiple:!1,searchable:!0,onChangeCallback:function(t){e.setState({conditions:[{key:"SEARCH_BY_FRANCHISE_ID",value:e.state.franchiseId}]},(function(){e.props.getAllFranchiseLocationApi(e)})),t(e.state.franchiseId),console.log("Hello world!")}}}})})})})}),Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:a,columnList:[{coumnWidth:200,labelName:"Franchise Area",dataKey:"area_details",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("area_details"===t)return e.area_details.name||""}},{coumnWidth:550,labelName:"Location",dataKey:"location_details",className:"",isCell:!0,cell:function(e,t){if("location_details"===t)return e.location_details?e.location_details.formatted_address:"NA"}},{coumnWidth:50,labelName:"",dataKey:"options",className:"options-column",isCell:!0,cell:function(t,a){if("options"===a){var n=[];return l.includes(Te.ADD_UPDATE_FRANCHISE_LOCATION)&&n.push({title:"Edit",type:"event",handleClick:function(){return e.handleAddEditFranchiseLocation(t)}}),n.push({title:"View",type:"event",handleClick:function(){return e.handleViewFranchiseLocation(t)}}),n.push({title:"View QR Code",type:"event",handleClick:function(){return e.handleViewQRCode(t)}}),Object(b.jsx)(ra,{menuItem:n})}}}],history:this.props.history,location:this.props.location,totalPages:s,currentPage:n,message:"Franchise Location list is empty"})})]})}}]),a}(M),Ja={getAllFranchiseLocationApi:da,getAllFranchiseApi:ca};Ha.propTypes={};var za=Object(o.b)((function(e){return{franchiseState:e.FranchiseState}}),Ja)(Ha),Ga=a(78),Qa=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).onLoad=function(e){n.autocomplete=e},n.onPlaceChanged=function(){if(null!==n.autocomplete){n.place=n.autocomplete.getPlace();var e=n.place.geometry.location.lat(),t=n.place.geometry.location.lng();n.setState({formattedAddress:n.place.formatted_address,geoLocation:{formatted_address:n.place.formatted_address,geometry:{location:{lat:e,lng:t}}}})}else console.log("Autocomplete is not loaded yet!")},n.onSubmit=function(){var e=new URLSearchParams;e.append("area_id",n.state.areaId),e.append("franchise_id",n.state.userAccountType===Ie.COMPANY?n.state.franchiseId:JSON.parse(localStorage.getItem("userDetails")).id),e.append("geo_location",JSON.stringify(n.state.geoLocation)),n.state.locationId&&e.append("franchise_location_id",n.state.locationId),ha(e,(function(){return n.props.history.goBack()}))},n.onNextClick=function(){r.a.findDOMNode(n.form).dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},n.autocomplete=null;var s=xe(),i=e.location.state?e.location.state.data:null;return n.state={data:i,locationId:i?i.id:"",userAccountType:s,areaId:i?i.area_id:"",areaList:[],franchiseId:i?i.franchise_account_id:"",geoLocation:i?i.location_details:"",formattedAddress:i?i.location_details.formatted_address:""},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.state.userAccountType===Ie.COMPANY&&this.props.getAllFranchiseApi(this,-1),this.props.getAllLocationApi(this,Le.AREA)}},{key:"render",value:function(){var e=this,t=this.state,a=t.areaList,n=t.userAccountType,s=t.franchiseOptionsList,i=a.filter((function(e){return!0===e.is_operational}));return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:this.state.areaId?"Edit Franchise Location":"Add Franchise Location",secondaryBtnText:"Cancel",isSecondaryBtn:function(){return e.props.history.goBack()},isPrimaryBtn:this.onNextClick,primaryBtnText:"Save Franchise Location"}),Object(b.jsx)("div",{className:"add-edit-customer-wrapper",children:Object(b.jsx)("div",{className:"content",children:Object(b.jsx)(U,{onValidSubmit:this.onSubmit,ref:function(t){return e.form=t},children:Object(b.jsxs)(ka.a,{children:[n===Ie.COMPANY&&Object(b.jsx)(Zt.a,{sm:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"franchiseId"),label:"Select Franchise",required:!0,validations:[{validate:le.isRequired,message:"Franchise cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Franchise",options:s,multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.franchiseId),console.log("Hello world!")}}}})}),Object(b.jsx)(Zt.a,{sm:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"areaId"),label:"Select Area",required:!0,validations:[{validate:le.isRequired,message:"Area cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Area",options:i,multiple:!1,searchable:!0,onChangeCallback:function(t){e.setState({formattedAddress:"",geoLocation:""}),t(e.state.areaId),console.log("Hello world!")}}}})}),Object(b.jsx)(Zt.a,{sm:4,children:Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsxs)("label",{children:["Search Franchise Location ",Object(b.jsx)("span",{style:{color:"red"},children:"*"})," "]}),Object(b.jsx)(Ga.d,{libraries:["places"],id:"script-loader",googleMapsApiKey:Ce,language:"en",region:"us",children:Object(b.jsx)(Ga.a,{fields:["formatted_address","geometry"],onLoad:this.onLoad,onPlaceChanged:this.onPlaceChanged,children:Object(b.jsx)("input",{type:"text",placeholder:"Search location",className:"form-control",value:this.state.formattedAddress,onChange:function(t){return e.setState({formattedAddress:t.target.value})}})})})]})})]})})})})]})}}]),a}(M),Xa={getAllLocationApi:Nt,getAllFranchiseApi:ca,addUpdateFranchiseLocationApi:ha},Za=Object(o.b)((function(e){return{}}),Xa)(Qa),$a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=new URLSearchParams;return a.append("start",t*Se||0),a.append("limit",Se),a.append("conditions",JSON.stringify(e.state.conditions||[])),a.append("sorts",JSON.stringify([{key:"SORT_BY_CREATED_ON",value:!1}])),xt.post("/commerce/order/search-order",a).then((function(a){a.data.error?gt.b.error(a.data.message||"Something went wrong"):e.setState({bookingsList:a.data.data.results,totalCount:a.data.data.total_count,totalPage:$e(a.data.data.total_count),page:t})})).catch((function(e){console.log(" error: ",e)}))},en=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleFilter=function(){n.setState({showFilter:!n.state.showFilter})},n.handleAddBookings=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?n.props.history.push({pathname:"/booking-management/edit-booking/".concat(e.id),state:{data:e}}):n.props.history.push("/booking-management/add-booking")},n.onChangeMethod=function(e){n.setState({searchValue:e,conditions:[{key:"SEARCH_BY_TEXT",value:e.search}]}),Ze(n.props.history,0,e.search),$a(Object(u.a)(n),0)},n.clearSearch=function(e){n.setState({searchValue:"",conditions:[]},(function(){0===e&&$a(Object(u.a)(n),0),Ze(n.props.history,1)}))};var s=e.location.search,i=new URLSearchParams(s).get("p");return n.state={page:i?parseInt(i,10):1,bookingsList:[],showFilter:!1,conditions:[]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){$a(this),this.props.history.replace({search:"?p=".concat(this.state.page)})}},{key:"componentDidUpdate",value:function(e,t){var a=new URLSearchParams(e.location.search),n=parseInt(a.get("p"),10)||1,s=new URLSearchParams(this.props.location.search),i=parseInt(s.get("p"),10)||1,r=s.get("search")||"";n!==i&&(r?$a(this):$a(this,i-1))}},{key:"render",value:function(){var e=this,t=this.state,a=t.page,n=t.totalPage,s=t.bookingsList,i=tt();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{breadcrumb:!0,currentPage:"Booking Management",title:"Booking Management",isFilter:!1,isPrimaryBtn:function(){return e.handleAddBookings()},primaryBtnText:i.includes(Te.ADD_UPDATE_ORDER)?"+ Add Booking":"",isSearch:!0,placeholder:"Search Bookings",onChangeMethod:this.onChangeMethod,clearSearch:function(){return e.clearSearch(a||0)}}),Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:s,columnList:[{coumnWidth:120,labelName:"Order Id",dataKey:"code",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("code"===t)return e.code}},{coumnWidth:230,labelName:"Customer Email",dataKey:"customer",className:"",isCell:!0,cell:function(e,t){var a;if("customer"===t)return null===(a=e.customer)||void 0===a?void 0:a.email}},{coumnWidth:230,labelName:"Start Time",dataKey:"start_datetime",className:"",isCell:!0,cell:function(e,t){if("start_datetime"===t)return Xe()(e.start_datetime).format("LLL")}},{coumnWidth:230,labelName:"End Time",dataKey:"end_datetime",className:"",isCell:!0,cell:function(e,t){if("end_datetime"===t)return Xe()(e.end_datetime).format("LLL")}},{coumnWidth:120,labelName:"Total Fare (\u20b9)",dataKey:"total_amount",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("total_amount"===t)return e.total_amount}},{coumnWidth:120,labelName:"Status",dataKey:"status",className:"",isCell:!0,cell:function(e,t){if("status"===t)return Ke.getText(e.status)}},{coumnWidth:50,labelName:"",dataKey:"options",className:"options-column",isCell:!0,cell:function(e,t){if("options"===t){var a=[];if(a.push({title:"View Details",type:"",linkUrl:"booking-management/view-booking/".concat(e.id)}),i.includes(Te.ADD_UPDATE_TELEMATICS_INVENTORY))return Object(b.jsx)(ra,{menuItem:a})}}}],history:this.props.history,location:this.props.location,totalPages:n,currentPage:a,message:"Coupons list is empty"})})]})}}]),a}(n.Component),tn=Object(o.b)((function(e){return{couponsState:e.CouponsState}}),{})(en),an="RECEIVE_POSTS",nn={otpReceived:!1,otpCode:"",otpVerified:!1,countryCode:"+91",userObj:null,cnbcActive:!1},sn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn,t=arguments.length>1?arguments[1]:void 0;return t.type===an?Object(g.a)(Object(g.a)({},e),{},{json:t.json}):e},rn=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleFilter=function(){n.setState({showFilter:!n.state.showFilter})},n.handleAddCoupons=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?n.props.history.push({pathname:"/coupons/edit-coupon/".concat(e.id),state:{data:e}}):n.props.history.push("/coupons/add-coupon")},n.onChangeMethod=function(e){n.setState({searchValue:e,conditions:[{key:"SEARCH_BY_TEXT",value:e.search}]}),Ze(n.props.history,0,e.search),n.props.getAllCouponsApi(Object(u.a)(n),0)},n.clearSearch=function(e){n.setState({searchValue:"",conditions:[]},(function(){0===e&&n.props.getAllCouponsApi(Object(u.a)(n),0),Ze(n.props.history,0)}))};var s=e.location.search,i=new URLSearchParams(s).get("p");return n.state={page:i?parseInt(i,10):1,couponList:[],showFilter:!1,conditions:[]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllCouponsApi(this),this.props.history.replace({search:"?p=".concat(this.state.page)})}},{key:"componentDidUpdate",value:function(e,t){var a=new URLSearchParams(e.location.search),n=parseInt(a.get("p"),10)||1,s=new URLSearchParams(this.props.location.search),i=parseInt(s.get("p"),10)||1,r=s.get("search")||"";n!==i&&(r?this.props.getAllCouponsApi(this):this.props.getAllCouponsApi(this,i-1))}},{key:"render",value:function(){var e=this,t=this.state,a=t.page,n=t.totalPage,s=t.couponList,i=tt();return console.log(this.state.couponList),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{breadcrumb:!0,currentPage:"Coupons",title:"Coupons",isFilter:!1,isPrimaryBtn:function(){return e.handleAddCoupons()},primaryBtnText:i.includes(Te.ADD_UPDATE_TELEMATICS_INVENTORY)?"+ Add Coupons":"",isSearch:!0,placeholder:"Search Coupons",onChangeMethod:this.onChangeMethod,clearSearch:function(){return e.clearSearch(a||0)}}),Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:s,columnList:[{coumnWidth:200,labelName:"Coupon Title",dataKey:"coupon_code",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("coupon_code"===t)return e.coupon_code}},{coumnWidth:200,labelName:"Type",dataKey:"type",className:"",isCell:!0,cell:function(e,t){if("type"===t)return Re.getText(e.type)}},{coumnWidth:150,labelName:"Value (Rs.)",dataKey:"value",className:"",isCell:!0,cell:function(e,t){if("value"===t)return e.value}},{coumnWidth:200,labelName:"Expiry",dataKey:"valid_till",className:"",isCell:!0,cell:function(e,t){if("valid_till"===t)return et(e.valid_till)}},{coumnWidth:250,labelName:"",dataKey:"options",className:"options-column",isCell:!0,cell:function(t,a){if("options"===a){var n=[];if(n.push({title:"Edit",type:"event",handleClick:function(){return e.handleAddCoupons(t)}}),i.includes(Te.ADD_UPDATE_BATTERY_INVENTORY))return Object(b.jsx)(ra,{menuItem:n})}}}],history:this.props.history,location:this.props.location,totalPages:n,currentPage:a,message:"Coupons list is empty"})})]})}}]),a}(n.Component),on={getAllCouponsApi:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(a,n){var s=new URLSearchParams;s.append("start",t*Se||0),s.append("limit",Se),s.append("conditions",JSON.stringify(e.state.conditions||[])),s.append("sorts",JSON.stringify([])),xt.post("/commerce/coupon/search-coupon",s).then((function(a){e.setState({couponList:a.data.data.results,totalCount:a.data.data.total_count,totalPage:$e(a.data.data.total_count),page:t})})).catch((function(e){console.log("Catch",e)}))}}},cn=Object(o.b)((function(e){return{couponsState:e.CouponsState}}),on)(rn),ln="RECEIVE_POSTS",dn={otpReceived:!1,otpCode:"",otpVerified:!1,countryCode:"+91",userObj:null,cnbcActive:!1},hn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn,t=arguments.length>1?arguments[1]:void 0;return t.type===ln?Object(g.a)(Object(g.a)({},e),{},{json:t.json}):e},un=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(b.jsxs)("div",{children:["LocationMaster Component ",this.props.locationMasterState]})}}]),a}(n.Component),mn=(Object(o.b)((function(e){return{locationMasterState:e.LocationMasterState}}),{})(un),"RECEIVE_POSTS"),pn={otpReceived:!1,otpCode:"",otpVerified:!1,countryCode:"+91",userObj:null,cnbcActive:!1},bn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn,t=arguments.length>1?arguments[1]:void 0;return t.type===mn?Object(g.a)(Object(g.a)({},e),{},{json:t.json}):e},jn=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleToggle=function(e){var t=e.id,a=e.is_operational,s=e.code,i=e.name,r=e.type,o=new URLSearchParams;o.append("location_id",t),o.append("location_type",r),o.append("name",i),o.append("code",s),o.append("is_operational",!a),n.props.updateLocationApi(o,Object(u.a)(n))};var s=e.location.search,i=new URLSearchParams(s).get("p");return n.state={page:i?parseInt(i,10):1,countryList:[],conditions:[]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllLocationApi(this,Le.COUNTRY),this.props.history.replace({search:"?p=".concat(this.state.page)})}},{key:"componentDidUpdate",value:function(e,t){var a=new URLSearchParams(e.location.search),n=(parseInt(a.get("p"),10),new URLSearchParams(this.props.location.search));parseInt(n.get("p"),10),n.get("search")}},{key:"render",value:function(){var e=this,t=this.state,a=t.page,n=t.totalPage,s=t.countryList;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{breadcrumb:!0,currentPage:"Country",title:"Country"}),Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:s,columnList:[{coumnWidth:200,labelName:"Country Name",dataKey:"name",className:"",isCell:!0,cell:function(e,t){if("name"===t)return e.name}},{coumnWidth:350,labelName:"Code",dataKey:"code",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("code"===t)return e.code}},{coumnWidth:350,labelName:"Operation Status",dataKey:"is_operational",className:"red-hat-display-bold",isCell:!0,cell:function(t,a){if("is_operational"===a)return Object(b.jsx)(fa,{checked:t.is_operational,handleClick:function(){return e.handleToggle(t)}})}}],history:this.props.history,location:this.props.location,totalPages:n,currentPage:a,message:"Country list is empty"})})]})}}]),a}(n.Component),gn={getAllLocationApi:Nt,updateLocationApi:St},vn=Object(o.b)((function(e){return{locationMasterState:e.LocationMasterState}}),gn)(jn),fn=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleToggle=function(e){console.log("rowData",e);var t=e.id,a=e.is_operational,s=e.code,i=e.name,r=e.type,o=e.parent_id,c=new URLSearchParams;c.append("location_id",t),c.append("location_type",r),c.append("name",i),c.append("code",s),c.append("parent_id",o),c.append("is_operational",!a),n.props.updateLocationApi(c,Object(u.a)(n))};var s=e.location.search,i=new URLSearchParams(s).get("p");return n.state={page:i?parseInt(i,10):1,cityList:[],conditions:[],stateId:"",stateList:[]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllLocationApi(this,Le.STATE),this.props.history.replace({search:"?p=".concat(this.state.page)})}},{key:"componentDidUpdate",value:function(e,t){var a=new URLSearchParams(e.location.search),n=(parseInt(a.get("p"),10),new URLSearchParams(this.props.location.search));parseInt(n.get("p"),10),n.get("search")}},{key:"render",value:function(){var e=this,t=this.state,a=t.page,n=t.totalPage,s=t.cityList;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{breadcrumb:!0,currentPage:"City",title:"City"}),Object(b.jsx)("div",{className:"state-wrapper",children:Object(b.jsx)(U,{onValidSubmit:this.onValidSubmit,ref:function(t){return e.form=t},children:Object(b.jsx)(ka.a,{children:Object(b.jsx)(Zt.a,{sm:6,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"stateId"),label:"Select State",control:{type:Oe,settings:{placeholder:"Select State",options:this.state.stateList,multiple:!1,searchable:!0,onChangeCallback:function(t){e.props.getAllLocationApi(e,Le.CITY),t(e.state.searchableSingleRegion),console.log("Hello world!")}}}})})})})}),Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:s,columnList:[{coumnWidth:200,labelName:"City Name",dataKey:"name",className:"",isCell:!0,cell:function(e,t){if("name"===t)return e.name}},{coumnWidth:350,labelName:"Code",dataKey:"code",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("code"===t)return e.code}},{coumnWidth:350,labelName:"Operation Status",dataKey:"is_operational",className:"red-hat-display-bold",isCell:!0,cell:function(t,a){if("is_operational"===a)return Object(b.jsx)(fa,{checked:t.is_operational,handleClick:function(){return e.handleToggle(t)}})}}],history:this.props.history,location:this.props.location,totalPages:n,currentPage:a,message:"City list is empty"})})]})}}]),a}(M),On={getAllLocationApi:Nt,updateLocationApi:St};fn.propTypes={};var yn=Object(o.b)((function(e){return{locationMasterState:e.LocationMasterState}}),On)(fn),xn=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleToggle=function(e){var t=e.id,a=e.is_operational,s=e.code,i=e.name,r=e.type,o=e.parent_id,c=new URLSearchParams;c.append("location_id",t),c.append("location_type",r),c.append("name",i),c.append("code",s),c.append("is_operational",!a),c.append("parent_id",o),n.props.updateLocationApi(c,Object(u.a)(n))},n.handleFilter=function(){n.setState({showFilter:!n.state.showFilter})},n.handleAddCountry=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?n.props.history.push({pathname:"/location-master/area/edit-area/".concat(e.id),state:{data:e}}):n.props.history.push("/location-master/area/add-area")},n.onChangeMethod=function(e){n.setState({searchValue:e,conditions:[{key:"SEARCH_BY_TEXT",value:e.search}]}),Ze(n.props.history,0,e.search)},n.clearSearch=function(e){n.setState({searchValue:"",conditions:[]}),Ze(n.props.history,0)},n.handleEditArea=function(e){console.log("rowData",e),n.props.history.push({pathname:"/location-master/area/edit-area/".concat(e.id),state:{editData:e}})};var s=e.location.search,i=new URLSearchParams(s).get("p");return n.state={page:i?parseInt(i,10):1,areaList:[],showFilter:!1,conditions:[]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllLocationApi(this,Le.AREA),this.props.history.replace({search:"?p=".concat(this.state.page)})}},{key:"componentDidUpdate",value:function(e,t){var a=new URLSearchParams(e.location.search),n=(parseInt(a.get("p"),10),new URLSearchParams(this.props.location.search));parseInt(n.get("p"),10),n.get("search")}},{key:"render",value:function(){var e=this,t=this.state,a=t.page,n=t.totalPage,s=t.areaList,i=tt();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{breadcrumb:!0,currentPage:"Area",title:"Area",isFilter:!1,isPrimaryBtn:function(){return e.handleAddCountry("")},primaryBtnText:i.includes(Te.ADD_UPDATE_TELEMATICS_INVENTORY)?"+ Add Area":""}),Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:s,columnList:[{coumnWidth:200,labelName:"Area Name",dataKey:"name",className:"",isCell:!0,cell:function(e,t){if("name"===t)return e.name}},{coumnWidth:350,labelName:"Code",dataKey:"code",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("code"===t)return e.code}},{coumnWidth:350,labelName:"Operation Status",dataKey:"is_operational",className:"red-hat-display-bold",isCell:!0,cell:function(t,a){if("is_operational"===a)return Object(b.jsx)(fa,{checked:t.is_operational,handleClick:function(){return e.handleToggle(t)}})}},{coumnWidth:250,labelName:"",dataKey:"options",className:"options-column",isCell:!0,cell:function(t,a){if("options"===a){var n=[{title:"Edit",type:"event",handleClick:function(){return e.handleEditArea(t)}}];return Object(b.jsx)(ra,{menuItem:n})}}}],history:this.props.history,location:this.props.location,totalPages:n,currentPage:a,message:"Area list is empty"})})]})}}]),a}(n.Component),Nn={getAllLocationApi:Nt,updateLocationApi:St},Sn=Object(o.b)((function(e){return{locationMasterState:e.LocationMasterState}}),Nn)(xn);var Cn=function(e){var t=Object(n.useState)([]),a=Object(dt.a)(t,2),s=a[0],i=a[1],r=e.polygon&&e.polygon.geo_fencing.coordinates[0].map((function(e){return{lat:e[0],lng:e[1]}})),o=Object(n.useState)(r||s),c=Object(dt.a)(o,2),l=c[0],d=c[1],h=Object(n.useRef)(null),u=Object(n.useRef)([]),m=Object(n.useCallback)((function(){if(h.current){var t=h.current.getPath().getArray().map((function(e){return{lat:e.lat(),lng:e.lng()}}));d(t),e.setPath(t)}}),[d]),p=Object(n.useCallback)((function(e){h.current=e;var t=e.getPath();u.current.push(t.addListener("set_at",m),t.addListener("insert_at",m),t.addListener("remove_at",m))}),[m]);return Object(b.jsx)("div",{className:"map-wrapper",children:Object(b.jsx)(Ga.d,{libraries:["drawing"],id:"script-loader",googleMapsApiKey:Ce,language:"en",region:"us",children:Object(b.jsx)(Ga.c,{mapContainerClassName:"area-map",center:{lat:19.216847,lng:72.864683},zoom:8,version:"weekly",on:!0,children:l.length>0||s.length>0?Object(b.jsx)(Ga.e,{path:l.length>0?l:s.length>0?s:null,editable:!0,draggable:!0,options:{fillColor:"yellow",fillOpacity:.4,strokeColor:"#d35400",strokeOpacity:.8,strokeWeight:3},onMouseUp:m,onDragEnd:m,onLoad:p}):Object(b.jsx)(Ga.b,{drawingMode:"polygon",onLoad:function(e){},onPolygonComplete:function(t){for(var a=t.getPath(),n=[],s=0;s<a.length;s++){var r={lat:a.getAt(s).lat(),lng:a.getAt(s).lng()};n.push(r)}i(n),e.setPath(n)}})})})})},kn=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).onSubmit=function(){if(0===n.state.path.length)return gt.b.error("Please map geofence"),!1;var e=new URLSearchParams;e.append("location_type",Le.AREA),e.append("parent_id",n.state.cityId),e.append("name",n.state.areaName),e.append("code",n.state.code),e.append("is_operational",!0),e.append("geo_fencing",JSON.stringify(n.state.path)),n.state.areaId&&e.append("location_id",n.state.areaId),function(e,t){Ot.post("/common/master/add-update-location",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(t(),gt.b.success(e.data.message||"Something went wrong"))})).catch((function(e){console.log("Catch",e)}))}(e,(function(){return n.props.history.goBack()}))},n.onNextClick=function(){r.a.findDOMNode(n.form).dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},n.handlePath=function(e){console.log("path",e);var t=[];e.map((function(e){return t.push([e.lat,e.lng])})),n.setState({path:t})};var s=e.location.state?e.location.state.editData:null;return n.state={areaId:s?s.id:"",polygon:s||!1,areaName:s?s.name:"",code:s?s.code:"",cityId:s?s.parent_id:"",path:s?s.geo_fencing.coordinates[0]:[],cityList:[],stateId:""},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllLocationApi(this,Le.CITY)}},{key:"render",value:function(){var e=this,t=this.state.cityList.filter((function(e){return!0===e.is_operational}));return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:this.state.areaId?"Edit Area":"Add Area",secondaryBtnText:"Cancel",isSecondaryBtn:function(){return e.props.history.goBack()},isPrimaryBtn:this.onNextClick,primaryBtnText:"Save Area"}),Object(b.jsx)("div",{className:"add-edit-customer-wrapper",children:Object(b.jsx)("div",{className:"content",children:Object(b.jsxs)(U,{onValidSubmit:this.onSubmit,ref:function(t){return e.form=t},children:[Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"areaName"),label:"Area Name",required:!0,validations:[{validate:le.isRequired,message:"Area name cannot be empty"}],control:{type:je,settings:{placeholder:"Enter area name"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"code"),label:"Code",required:!0,validations:[{validate:le.isRequired,message:"Area code cannot be empty"}],control:{type:je,settings:{placeholder:"Enter area code"}}})}),Object(b.jsx)(Zt.a,{sm:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"cityId"),label:"Select City",required:!0,validations:[{validate:le.isRequired,message:"City cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select City",options:t,multiple:!1,searchable:!0,onChangeCallback:function(a){var n=t.filter((function(t){return t.id===e.state.cityId}));e.setState({cityName:n}),a(e.state.cityId),console.log("Hello world!")}}}})})]}),Object(b.jsx)(ka.a,{children:Object(b.jsxs)(Zt.a,{sm:12,children:[Object(b.jsx)("h4",{className:"red-hat-display-medium f-s-14 grey-AAA",children:" Draw Polygon "}),Object(b.jsx)(Cn,{polygon:this.state.polygon,setPath:function(t){return e.handlePath(t)}})]})})]})})})]})}}]),a}(M),An={getAllLocationApi:Nt},_n=Object(o.b)((function(e){return{}}),An)(kn),En=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=new URLSearchParams;a.append("start",t*Se||0),a.append("limit",Se),a.append("conditions",JSON.stringify(e.state.conditions||[])),a.append("sorts",JSON.stringify([])),xt.post("/offering/battery/search-battery-model",a).then((function(a){a.data.error?gt.b.error(a.data.message||"Something went wrong"):e.setState({BatteryModels:a.data.data.battery_models.results,totalPage:Math.ceil(a.data.data.battery_models.totalCount/Se),page:t})})).catch((function(e){console.log("Catch",e)}))},wn=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleFilter=function(){n.setState({showFilter:!n.state.showFilter})},n.handleAddBatteryModel=function(){n.props.history.push("/master/battery-models/add-battery-model")},n.onChangeMethod=function(e){n.setState({searchValue:e,conditions:[{key:"SEARCH_BY_TEXT",value:e.search}]}),Ze(n.props.history,0,e.search),En(Object(u.a)(n),0)},n.clearSearch=function(e){n.setState({searchValue:"",conditions:[]},(function(){0===e&&En(Object(u.a)(n),0)})),Ze(n.props.history,1)},n.handleEditBatteryModel=function(e){n.props.history.push({pathname:"/master/battery-models/edit-battery-model/".concat(e.id),state:{editData:e}})};var s=e.location.search,i=new URLSearchParams(s),r=i.get("p"),o=i.get("search");return n.state={BatteryModels:[],page:r?parseInt(r,10):1,totalPage:1,searchText:o,searchKey:"SEARCH_BY_TEXT",showFilter:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){En(this),this.props.history.replace({search:"?p=".concat(this.state.page)})}},{key:"componentDidUpdate",value:function(e,t){var a=new URLSearchParams(e.location.search),n=parseInt(a.get("p"),10)||1,s=new URLSearchParams(this.props.location.search),i=parseInt(s.get("p"),10)||1,r=s.get("search")||"";n!==i&&(r?En(this):En(this,i-1))}},{key:"render",value:function(){var e=this,t=this.state,a=t.BatteryModels,n=t.page,s=t.totalPage,i=tt();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!1,breadcrumb:!0,currentPage:"Battery Models",title:"Battery Models",isFilter:!1,isPrimaryBtn:this.handleAddBatteryModel,primaryBtnText:i.includes(Te.ADD_UPDATE_BATTERY_MODEL)?"+ Add Battery Model":"",isSearch:!0,placeholder:"Search Battery Model",onChangeMethod:this.onChangeMethod,clearSearch:function(){return e.clearSearch(n||0)}}),Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:a,columnList:[{coumnWidth:250,labelName:"Model Name",dataKey:"modelName",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("modelName"===t)return e.modelName}},{coumnWidth:300,labelName:"Manufacturer Name",dataKey:"modelCompany",className:"",isCell:!0,cell:function(e,t){if("modelCompany"===t)return e.modelCompany}},{coumnWidth:230,labelName:"Battery Type",dataKey:"batteryInformation",className:"",isCell:!0,cell:function(e,t){if("batteryInformation"===t)return e.batteryInformation.type}},{coumnWidth:250,labelName:"Charging Time",dataKey:"batteryInformation",className:"",isCell:!0,cell:function(e,t){if("batteryInformation"===t)return e.batteryInformation.chargingTime.min+"/"+e.batteryInformation.chargingTime.max}},{coumnWidth:300,labelName:"Optimal Voltage Range",dataKey:"modelCompany",className:"",isCell:!0,cell:function(e,t){if("modelCompany"===t)return e.batteryInformation.optimalVoltageRange.min+"/"+e.batteryInformation.optimalVoltageRange.max}},{coumnWidth:250,labelName:"Peak Power",dataKey:"modelCompany",className:"",isCell:!0,cell:function(e,t){if("modelCompany"===t)return e.batteryInformation.peakPower.min+"/"+e.batteryInformation.peakPower.max}},{coumnWidth:50,labelName:"",dataKey:"options",className:"options-column",isCell:!0,cell:function(t,a){if("options"===a){var n=[{title:"Edit",type:"event",handleClick:function(){return e.handleEditBatteryModel(t)}}];if(i.includes(Te.ADD_UPDATE_BATTERY_MODEL))return Object(b.jsx)(ra,{menuItem:n})}}}],history:this.props.history,location:this.props.location,totalPages:s,currentPage:n,message:"Battery models not found"})})]})}}]),a}(n.Component),In=Object(o.b)((function(e){return{customersState:e.CustomersState}}),{})(wn),Ln="RECEIVE_POSTS",Dn={otpReceived:!1,otpCode:"",otpVerified:!1,countryCode:"+91",userObj:null,cnbcActive:!1},Pn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn,t=arguments.length>1?arguments[1]:void 0;return t.type===Ln?Object(g.a)(Object(g.a)({},e),{},{json:t.json}):e},Tn=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleSave=function(){r.a.findDOMNode(n.form).dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},n.onValidSubmit=function(){var e=new URLSearchParams;e.append("model_name",n.state.modelName),e.append("model_company",n.state.modelCompany),e.append("battery_type",n.state.batteryType),e.append("optimal_voltage_range",JSON.stringify({min:parseInt(n.state.minVoltage),max:parseInt(n.state.maxVoltage)})),e.append("charging_time",JSON.stringify({min:parseInt(n.state.minCharging),max:parseInt(n.state.maxCharging)})),e.append("peak_power",JSON.stringify({min:parseInt(n.state.minPeak),max:parseInt(n.state.maxPeak)})),n.state.editId&&e.append("model_id",n.state.editId),function(e,t){xt.post("offering/battery/add-update-battery-model",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(t(),gt.b.success(e.data.message||"Something went wrong"))})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))}(e,(function(){n.props.history.push("/master/battery-models")}))};var s=e.location.state?e.location.state.editData:null;return n.state={editId:s?s.id:"",modelName:s?s.modelName:"",modelCompany:s?s.modelCompany:"",batteryType:s?s.batteryInformation.type:"",minVoltage:s?s.batteryInformation.optimalVoltageRange.min:"",maxVoltage:s?s.batteryInformation.optimalVoltageRange.max:"",minCharging:s?s.batteryInformation.chargingTime.min:"",maxCharging:s?s.batteryInformation.chargingTime.max:"",minPeak:s?s.batteryInformation.peakPower.min:"",maxPeak:s?s.batteryInformation.peakPower.max:""},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:"".concat(this.state.editId?"Edit":"Add"," Battery Model"),secondaryBtnText:"Cancel",isSecondaryBtn:function(){return e.props.history.goBack()},isPrimaryBtn:this.handleSave,primaryBtnText:"Save Battery Model"}),Object(b.jsx)("div",{className:"add-edit-customer-wrapper",children:Object(b.jsx)("div",{className:"content",children:Object(b.jsx)(U,{onValidSubmit:this.onValidSubmit,ref:function(t){return e.form=t},children:Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"modelName"),label:"Model Name",required:!0,validations:[{validate:le.isRequired,message:"Model name cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Model Name"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"modelCompany"),label:"Model Company",required:!0,validations:[{validate:le.isRequired,message:"Model company cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Model Company"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"batteryType"),label:"Battery Type",required:!0,validations:[{validate:le.isRequired,message:"Battery type cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Battery Type"}}})}),Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsxs)("div",{className:"min-max-element",children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"minVoltage"),label:"Optimal Voltage Range",required:!0,validations:[{validate:le.isRequired,message:"Minimum voltage cannot be empty"},{validate:le.isNum,message:"Please enter numeric value"},{validate:le.isInt,message:"Please enter numeric value"}],control:{type:je,settings:{placeholder:"Enter Minimum Voltage"}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"maxVoltage"),label:"",required:!0,validations:[{validate:le.isRequired,message:"Maximum voltage cannot be empty"},{validate:le.isNum,message:"Please enter numeric value"},{validate:le.isInt,message:"Please enter numeric value"}],control:{type:je,settings:{placeholder:"Enter Maximum Voltage"}}})]})}),Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsxs)("div",{className:"min-max-element",children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"minCharging"),label:"Charging Time",required:!0,validations:[{validate:le.isRequired,message:"Minimum charging time cannot be empty"},{validate:le.isNum,message:"Please enter numeric value"},{validate:le.isInt,message:"Please enter numeric value"}],control:{type:je,settings:{placeholder:"Enter Minimum Charging Time"}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"maxCharging"),label:"",required:!0,validations:[{validate:le.isRequired,message:"Maximum charging time cannot be empty"},{validate:le.isNum,message:"Please enter numeric value"},{validate:le.isInt,message:"Please enter numeric value"}],control:{type:je,settings:{placeholder:"Enter Maximum Charging Time"}}})]})}),Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsxs)("div",{className:"min-max-element",children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"minPeak"),label:"Peak Power",required:!0,validations:[{validate:le.isRequired,message:"Minimum peak power cannot be empty"},{validate:le.isNum,message:"Please enter numeric value"},{validate:le.isInt,message:"Please enter numeric value"}],control:{type:je,settings:{placeholder:"Enter Minimum Peak Power"}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"maxPeak"),label:"",required:!0,validations:[{validate:le.isRequired,message:"Maximum peak power cannot be empty"},{validate:le.isNum,message:"Please enter numeric value"},{validate:le.isInt,message:"Please enter numeric value"}],control:{type:je,settings:{placeholder:"Enter Maximum Peak Power"}}})]})})]})})})})]})}}]),a}(M),Rn=Object(o.b)((function(e){return Object(g.a)({},e)}),{})(Tn),Mn=function(e){var t=e.state,a=t.searchText,n=t.searchKey,s=new URLSearchParams;s.append("start",(e.state.page-1)*Se),s.append("limit",Se),s.append("conditions",JSON.stringify(a?[{key:n,value:a}]:[])),s.append("sorts",JSON.stringify([])),xt.post("/offering/telematics/search-telematics-model",s).then((function(t){t.data.error?gt.b.error(t.data.message||"Something went wrong"):e.setState({iotModels:t.data.data.telematics_model.results,totalPages:Math.ceil(t.data.data.telematics_model.totalCount/Se)})})).catch((function(e){console.log("Catch",e)}))},Bn=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleFilter=function(){n.setState({showFilter:!n.state.showFilter})},n.handleAddIotModel=function(){n.props.history.push("/master/iot-models/add-iot-model")},n.clearSearch=function(){n.onChangeMethod({search:""})},n.onChangeMethod=function(e){n.setState({searchText:e.search,page:1},(function(){Ze(n.props.history,1,e.search)}))},n.handleEditIotModel=function(e){n.props.history.push({pathname:"/master/iot-models/edit-iot-model/",state:{editData:e}})};var s=e.location.search,i=new URLSearchParams(s),r=i.get("p"),o=i.get("search");return n.state={iotModels:[],page:r?parseInt(r,10):1,totalPages:1,searchText:o,searchKey:"SEARCH_BY_TEXT",showFilter:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){Mn(this),console.log("test")}},{key:"componentDidUpdate",value:function(e,t){var a=this,n=new URLSearchParams(e.location.search),s=parseInt(n.get("p"),10)||1,i=n.get("search"),r=new URLSearchParams(this.props.location.search),o=parseInt(r.get("p"),10)||1,c=r.get("search");s===o&&i===c||this.setState({page:o,searchText:c},(function(){Mn(a)}))}},{key:"render",value:function(){var e=this,t=this.state.iotModels,a=tt();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!1,breadcrumb:!0,currentPage:"Iot Models",title:"Iot Models",isFilter:!1,isPrimaryBtn:this.handleAddIotModel,primaryBtnText:a.includes(Te.ADD_UPDATE_TELEMATICS_MODEL)?"+ Add Iot Model":"",isSearch:!0,placeholder:"Search Iot Model",onChangeMethod:this.onChangeMethod,clearSearch:this.clearSearch,searchValue:{search:this.state.searchText}}),Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:t,columnList:[{coumnWidth:250,labelName:"Model Name",dataKey:"modelName",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("modelName"===t)return e.modelName}},{coumnWidth:300,labelName:"Manufacturer Name",dataKey:"modelCompany",className:"",isCell:!0,cell:function(e,t){if("modelCompany"===t)return e.modelCompany}},{coumnWidth:50,labelName:"",dataKey:"options",className:"options-column",isCell:!0,cell:function(t,n){if("options"===n){var s=[{title:"Edit",type:"event",handleClick:function(){return e.handleEditIotModel(t)}}];if(a.includes(Te.ADD_UPDATE_TELEMATICS_MODEL))return Object(b.jsx)(ra,{menuItem:s})}}}],history:this.props.history,location:this.props.location,totalPages:this.state.totalPages,currentPage:this.state.page-1,message:"Iot models not found"})})]})}}]),a}(n.Component),Fn=Object(o.b)((function(e){return{customersState:e.CustomersState}}),{})(Bn),Un="RECEIVE_POSTS",Vn={otpReceived:!1,otpCode:"",otpVerified:!1,countryCode:"+91",userObj:null,cnbcActive:!1},qn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn,t=arguments.length>1?arguments[1]:void 0;return t.type===Un?Object(g.a)(Object(g.a)({},e),{},{json:t.json}):e},Yn=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleSave=function(){r.a.findDOMNode(n.form).dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},n.onValidSubmit=function(){var e=new URLSearchParams;e.append("model_name",n.state.modelName),e.append("model_company",n.state.manufacturerName),n.state.editId&&e.append("model_id",n.state.editId),function(e,t){xt.post("offering/telematics/add-update-telematics-model",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(t(),gt.b.success(e.data.message||"Something went wrong"))})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))}(e,(function(){n.props.history.push("/master/Iot-models")}))};var s=e.location.state?e.location.state.editData:{};return n.state={editId:s.id||"",modelName:s.modelName||"",manufacturerName:s.modelCompany||""},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:"".concat(this.state.editId?"Edit":"Add"," Iot Model"),secondaryBtnText:"Cancel",isSecondaryBtn:function(){return e.props.history.goBack()},isPrimaryBtn:this.handleSave,primaryBtnText:"Save Iot Model"}),Object(b.jsx)("div",{className:"add-edit-customer-wrapper",children:Object(b.jsx)("div",{className:"content",children:Object(b.jsx)(U,{onValidSubmit:this.onValidSubmit,ref:function(t){return e.form=t},children:Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"modelName"),label:"Model Name",required:!0,validations:[{validate:le.isRequired,message:"Model name cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Model Name"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"manufacturerName"),label:"Manufacturer Name",required:!0,validations:[{validate:le.isRequired,message:"Manufacturer name cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Manufacturer Name"}}})})]})})})})]})}}]),a}(M),Kn=Object(o.b)((function(e){return Object(g.a)({},e)}),{})(Yn),Wn=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(b.jsxs)("div",{children:["UserManagement Component ",this.props.userManagementState]})}}]),a}(n.Component),Hn=(Object(o.b)((function(e){return{userManagementState:e.UserManagementState}}),{})(Wn),"RECEIVE_POSTS"),Jn={otpReceived:!1,otpCode:"",otpVerified:!1,countryCode:"+91",userObj:null,cnbcActive:!1},zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn,t=arguments.length>1?arguments[1]:void 0;return t.type===Hn?Object(g.a)(Object(g.a)({},e),{},{json:t.json}):e},Gn=a(35),Qn=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleAddDealer=function(){n.props.history.push("/user-management/dealer/add-dealer")},n.onChangeMethod=function(e){n.setState({searchValue:e,conditions:[{key:"SEARCH_BY_TYPE",value:Ie.DEALER,context:null},{key:"SEARCH_BY_TEXT",value:e.search}]}),Ze(n.props.history,0,e.search),n.props.getAllAccountApi(Object(u.a)(n),0)},n.clearSearch=function(e){console.log("currentPage",e),n.setState({page:e,searchValue:"",conditions:[{key:"SEARCH_BY_TYPE",value:Ie.DEALER,context:null}]},(function(){0===e&&n.props.getAllAccountApi(Object(u.a)(n),0)})),Ze(n.props.history,1)};var s=e.location.search,i=new URLSearchParams(s).get("p");return n.state={data:[],conditions:[{key:"SEARCH_BY_TYPE",value:Ie.DEALER,context:null}],page:i?parseInt(i,10):1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllAccountApi(this),this.props.history.replace({search:"?p=".concat(this.state.page)})}},{key:"componentDidUpdate",value:function(e,t){var a=new URLSearchParams(e.location.search),n=parseInt(a.get("p"),10)||1,s=new URLSearchParams(this.props.location.search),i=parseInt(s.get("p"),10)||1,r=s.get("search")||"";n!==i&&(r?this.props.getAllAccountApi(this):this.props.getAllAccountApi(this,i-1))}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.page,s=t.totalPage;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!1,breadcrumb:!0,currentPage:"Dealers",title:"Dealers",isFilter:!1,isPrimaryBtn:this.handleAddDealer,primaryBtnText:"+ Add Dealer",isSearch:!0,placeholder:"Search Dealer",onChangeMethod:this.onChangeMethod,clearSearch:function(){return e.clearSearch(n||0)}}),Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:a,columnList:[{coumnWidth:250,labelName:"Company Name",dataKey:"companyName",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("companyName"===t)return e.name}},{coumnWidth:250,labelName:"Email",dataKey:"email",className:"",isCell:!0,cell:function(e,t){if("email"===t)return e.billing_email}},{coumnWidth:250,labelName:"Location",dataKey:"location",className:"",isCell:!0,cell:function(e,t){if("location"===t)return e.extra_information.state_details.name+" - "+e.extra_information.city_details.name}}],history:this.props.history,location:this.props.location,totalPages:s,currentPage:n,message:"Dealer list is empty"})})]})}}]),a}(n.Component),Xn={getAllAccountApi:Aa},Zn=Object(o.b)((function(e){return{userManagementState:e.UserManagementState}}),Xn)(Object(Gn.g)(Qn)),$n=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleAddOem=function(){n.props.history.push("/user-management/oem/add-oem")},n.onChangeMethod=function(e){n.setState({searchValue:e,conditions:[{key:"SEARCH_BY_TYPE",value:Ie.OEM,context:null},{key:"SEARCH_BY_TEXT",value:e.search}]}),Ze(n.props.history,0,e.search),n.props.getAllAccountApi(Object(u.a)(n),0)},n.clearSearch=function(e){n.setState({searchValue:"",conditions:[{key:"SEARCH_BY_TYPE",value:Ie.OEM,context:null}]},(function(){0===e&&n.props.getAllAccountApi(Object(u.a)(n),0)})),Ze(n.props.history,1)};var s=e.location.search,i=new URLSearchParams(s).get("p");return n.state={data:[],conditions:[{key:"SEARCH_BY_TYPE",value:Ie.OEM,context:null}],page:i?parseInt(i,10):1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllAccountApi(this),this.props.history.replace({search:"?p=".concat(this.state.page)})}},{key:"componentDidUpdate",value:function(e,t){var a=new URLSearchParams(e.location.search),n=parseInt(a.get("p"),10)||1,s=new URLSearchParams(this.props.location.search),i=parseInt(s.get("p"),10)||1,r=s.get("search")||"";n!==i&&(r?this.props.getAllAccountApi(this):this.props.getAllAccountApi(this,i-1))}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.page,s=t.totalPage;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!1,breadcrumb:!0,currentPage:"OEM",title:"OEM",isFilter:!1,isPrimaryBtn:this.handleAddOem,primaryBtnText:"+ Add OEM",isSearch:!0,placeholder:"Search OEM",onChangeMethod:this.onChangeMethod,clearSearch:function(){return e.clearSearch(n||0)}}),Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:a,columnList:[{coumnWidth:250,labelName:"OEM Name",dataKey:"oemName",className:"red-hat-display-bold",isCell:!0,cell:function(t,a){if("oemName"===a)return Object(b.jsx)("span",{className:"cursor",onClick:function(){return e.props.history.push("/user-management/oem/1")},children:t.name})}},{coumnWidth:250,labelName:"Email",dataKey:"email",className:"",isCell:!0,cell:function(e,t){if("email"===t)return e.billing_email}},{coumnWidth:250,labelName:"Location",dataKey:"location",className:"",isCell:!0,cell:function(e,t){if("location"===t)return e.extra_information.state_details.name+" - "+e.extra_information.city_details.name}}],history:this.props.history,location:this.props.location,totalPages:s,currentPage:n,message:"OEM list is empty"})})]})}}]),a}(n.Component),es={getAllAccountApi:Aa},ts=Object(o.b)((function(e){return{userManagementState:e.UserManagementState}}),es)($n),as=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleAddEditUser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?n.props.history.push({pathname:"/user-management/users/edit-user/".concat(e.id),state:{data:e}}):n.props.history.push("/user-management/users/add-user")},n.handleViewUser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.props.history.push({pathname:"/user-management/users/view-user/".concat(e.id),state:{data:e}})},n.onChangeMethod=function(e){n.setState({searchValue:e,conditions:[{key:"SEARCH_BY_TEXT",value:e.search}]}),Ze(n.props.history,0,e.search),n.props.getAllUserApi(Object(u.a)(n),0)},n.clearSearch=function(e){n.setState({searchValue:"",conditions:[]},(function(){0===e&&n.props.getAllUserApi(Object(u.a)(n),0)})),Ze(n.props.history,1)};var s=e.location.search,i=new URLSearchParams(s).get("p");return n.state={data:[],conditions:[],page:i?parseInt(i,10):1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllUserApi(this),this.props.history.replace({search:"?p=".concat(this.state.page)})}},{key:"componentDidUpdate",value:function(e,t){var a=new URLSearchParams(e.location.search),n=parseInt(a.get("p"),10)||1,s=new URLSearchParams(this.props.location.search),i=parseInt(s.get("p"),10)||1,r=s.get("search")||"";n!==i&&(r?this.props.getAllUserApi(this):this.props.getAllUserApi(this,i-1))}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.page,s=t.totalPage,i=tt();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!1,breadcrumb:!0,currentPage:"Users",title:"Users",isFilter:!1,isPrimaryBtn:function(){return e.handleAddEditUser()},primaryBtnText:i.includes(Te.ADD_UPDATE_USER)?"+ Add User":"",isSearch:!0,placeholder:"Search User",onChangeMethod:this.onChangeMethod,clearSearch:function(){return e.clearSearch(n||0)}}),Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:a,columnList:[{coumnWidth:250,labelName:"Name",dataKey:"first_name",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("first_name"===t)return e.first_name+" "+e.last_name}},{coumnWidth:250,labelName:"Email",dataKey:"email",className:"",isCell:!0,cell:function(e,t){if("email"===t)return e.email}},{coumnWidth:50,labelName:"",dataKey:"options",className:"options-column",isCell:!0,cell:function(t,a){if("options"===a){var n=[{title:"Edit",type:"event",handleClick:function(){return e.handleAddEditUser(t)}},{title:"View Details",type:"event",handleClick:function(){return e.handleViewUser(t)}}];if(i.includes(Te.ADD_UPDATE_USER))return Object(b.jsx)(ra,{menuItem:n})}}}],history:this.props.history,location:this.props.location,totalPages:s,currentPage:n,message:"User list is empty"})})]})}}]),a}(n.Component),ns={getAllUserApi:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(a,n){var s=new URLSearchParams;s.append("start",t*Se||0),s.append("limit",Se),s.append("conditions",JSON.stringify(e.state.conditions||[])),s.append("sorts",JSON.stringify([])),xt.post("/organisation/user/search-users",s).then((function(a){e.setState({data:a.data.data.results,totalCount:a.data.data.total_count,totalPage:$e(a.data.data.total_count),page:t})})).catch((function(e){console.log("Catch",e)}))}}},ss=Object(o.b)((function(e){return{userManagementState:e.UserManagementState}}),ns)(as),is=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).handleSave=function(){var e=new URLSearchParams;e.append("account_email",n.state.email),e.append("user_account_roles",JSON.stringify([{role_ids:JSON.parse(localStorage.getItem("userDetails")).account_permissions[0].role_ids,account_id:"-1",vehicle_scope:"1"}])),e.append("account_name",n.state.companyName),e.append("account_type",Ie.DEALER),e.append("city_id",n.state.city),e.append("state_id",n.state.state),e.append("contact_name",n.state.dealerName),e.append("contact_number",n.state.contactNumber),n.state.accountType===Ie.ADMIN&&e.append("parent_account_id",n.state.oem),_a(e,(function(){return n.props.history.goBack()}))},n.onNextClick=function(){r.a.findDOMNode(n.form).dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},n.state={accountType:JSON.parse(localStorage.getItem("userDetails")).user_account_type,data:[],conditions:[{key:"SEARCH_BY_TYPE",value:Ie.OEM,context:null}],oem:"",companyName:"",dealerName:"",contactNumber:"",email:"",state:"",city:"",stateList:[],cityList:[]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.state.accountType===Ie.ADMIN&&this.props.getAllAccountApi(this),this.props.getAllLocationApi(this,Le.STATE)}},{key:"render",value:function(){var e=this,t=this.state.data;console.log("data",t);var a=[];return this.state.accountType===Ie.ADMIN&&(a=t.map((function(e){return{label:e.name,value:e.id}}))),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:"Add Dealer",secondaryBtnText:"Cancel",isSecondaryBtn:function(){return e.props.history.goBack()},isPrimaryBtn:this.onNextClick,primaryBtnText:"Save Dealer"}),Object(b.jsx)("div",{className:"add-edit-customer-wrapper",children:Object(b.jsx)("div",{className:"content",children:Object(b.jsx)(U,{onValidSubmit:this.handleSave,ref:function(t){return e.form=t},children:Object(b.jsxs)(ka.a,{children:[Ie.ADMIN===this.state.accountType&&Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"oem"),label:"OEM Name",required:!0,validations:[{validate:le.isRequired,message:"OEM name cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select OEM Name",options:a,multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.oem)}}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"companyName"),label:"Company Name",required:!0,validations:[{validate:le.isRequired,message:"Company Name cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Company Name"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"dealerName"),label:"Dealer Name",required:!0,validations:[{validate:le.isRequired,message:"Dealer name cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Dealer Name"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"contactNumber"),label:"Contact Number",required:!0,validations:[{validate:le.isRequired,message:"Contact cannot be empty"},{validate:le.isPhone,message:"Please enter a valid number"}],control:{type:je,settings:{placeholder:"Enter Contact Number"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"email"),label:"Email",required:!0,validations:[{validate:le.isRequired,message:"Email cannot be empty"},{validate:le.isEmail,message:"Please enter a valid email"}],control:{type:je,settings:{placeholder:"Enter Email"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"state"),label:"State",required:!0,validations:[{validate:le.isRequired,message:"State cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select State",options:this.state.stateList,multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.state),e.setState({city:""}),e.props.getAllLocationApi(e,Le.CITY)}}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"city"),label:"City",required:!0,validations:[{validate:le.isRequired,message:"City cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select City",options:this.state.cityList,multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.city)}}}})})]})})})})]})}}]),a}(M),rs={getAllLocationApi:Nt,getAllAccountApi:Aa},os=Object(o.b)((function(e){return{userManagementState:e.UserManagementState}}),rs)(is),cs=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).handleSave=function(){var e=new URLSearchParams;e.append("account_email",n.state.email),e.append("user_account_roles",JSON.stringify([{role_ids:JSON.parse(localStorage.getItem("userDetails")).account_permissions[0].role_ids,account_id:"-1",vehicle_scope:"1"}])),e.append("account_name",n.state.oemName),e.append("account_type",Ie.OEM),e.append("city_id",n.state.city),e.append("state_id",n.state.state),e.append("contact_name",n.state.contactName),e.append("contact_number",n.state.contactNumber),_a(e,(function(){return n.props.history.goBack()}))},n.onNextClick=function(){r.a.findDOMNode(n.form).dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},n.state={oemName:"",contactName:"",contactNumber:"",email:"",state:"",city:"",stateList:[],cityList:[]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllLocationApi(this,Le.STATE)}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:"Add OEM",secondaryBtnText:"Cancel",isSecondaryBtn:function(){return e.props.history.goBack()},isPrimaryBtn:this.onNextClick,primaryBtnText:"Save OEM"}),Object(b.jsx)("div",{className:"add-edit-customer-wrapper",children:Object(b.jsx)("div",{className:"content",children:Object(b.jsxs)(U,{onValidSubmit:this.handleSave,ref:function(t){return e.form=t},children:[Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"oemName"),label:"OEM Name",required:!0,validations:[{validate:le.isRequired,message:"OEM name cannot be empty"}],control:{type:je,settings:{placeholder:"Enter OEM Name"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"contactName"),label:"Contact Name",required:!0,validations:[{validate:le.isRequired,message:"Contact Name cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Contact Name"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"contactNumber"),label:"Contact Number",required:!0,validations:[{validate:le.isRequired,message:"Contact cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Contact Number"}}})})]}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"email"),label:"Email",required:!0,validations:[{validate:le.isRequired,message:"Email cannot be empty"},{validate:le.isEmail,message:"Please enter a valid email"}],control:{type:je,settings:{placeholder:"Enter Email"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"state"),label:"State",required:!0,validations:[{validate:le.isRequired,message:"State cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select State",options:this.state.stateList,multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.state),e.setState({city:""}),e.props.getAllLocationApi(e,Le.CITY)}}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"city"),label:"City",required:!0,validations:[{validate:le.isRequired,message:"City cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select City",options:this.state.cityList,multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.city)}}}})})]})]})})})]})}}]),a}(M),ls={getAllLocationApi:Nt},ds=Object(o.b)((function(e){return{userManagementState:e.UserManagementState}}),ls)(cs),hs=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleSave=function(){var e=new URLSearchParams;e.append("first_name",n.state.firstName),e.append("last_name",n.state.lastName),e.append("role_ids",JSON.stringify(n.state.roleList)),e.append("franchise_location_scope_all",n.state.isAllLocation),e.append("city_scope_all",!0),e.append("franchise_location_scope",JSON.stringify(n.state.franchiseLocation)),n.state.userId?(e.append("user_id",n.state.userId),function(e,t){xt.post("/organisation/user/update-user",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(t(),gt.b.success(e.data.message||"Something went wrong"))})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))}(e,(function(){return n.props.history.goBack()}))):(e.append("email",n.state.email),function(e,t){xt.post("/organisation/user/invite-user",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(t(),gt.b.success(e.data.message||"Something went wrong"))})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))}(e,(function(){return n.props.history.goBack()})))},n.onNextClick=function(){r.a.findDOMNode(n.form).dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))};var s=e.location.state?e.location.state.data:null,i=JSON.parse(localStorage.getItem("userDetails"));return n.state={userId:s?s.id:"",firstName:s?s.first_name:"",lastName:s?s.last_name:"",email:s?s.email:"",rolesOption:[],roleList:s?s.user_account_roles[0].role_ids:[],isAllLocation:s?"1"==s.user_account_roles[0].franchise_location_scope?"true":"false":"true",isAllCity:"true",franchiseLocationOption:[],franchiseLocation:s&&"1"!=s.user_account_roles[0].franchise_location_scope?s.user_account_roles[0].franchise_location_scope:[],userDetails:i},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllRolesApi(this),this.state.userDetails.user_account_type!==Ie.COMPANY&&this.props.getAllFranchiseLocationApi(this,0,!0)}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:this.state.userId?"Edit User":"Add User",secondaryBtnText:"Cancel",isSecondaryBtn:function(){return e.props.history.goBack()},isPrimaryBtn:this.onNextClick,primaryBtnText:"Save User"}),Object(b.jsx)("div",{className:"add-edit-customer-wrapper",children:Object(b.jsx)("div",{className:"content",children:Object(b.jsx)(U,{onValidSubmit:this.handleSave,ref:function(t){return e.form=t},children:Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"firstName"),label:"First Name",required:!0,validations:[{validate:le.isRequired,message:"First name cannot be empty"}],control:{type:je,settings:{placeholder:"Enter First Name"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"lastName"),label:"Last Name",required:!0,validations:[{validate:le.isRequired,message:"Last Name cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Last Name"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"email"),label:"Email",disabled:!!this.state.userId,required:!0,validations:[{validate:le.isRequired,message:"Email cannot be empty"},{validate:le.isEmail,message:"Please enter a valid email"}],control:{type:je,settings:{placeholder:"Enter Email"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"roleList"),label:"Role",required:!0,validations:[{validate:le.isRequired,message:"Role cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Roles",options:this.state.rolesOption,multiple:!0,searchable:!0,onChangeCallback:function(t){t(e.state.roleList)}}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"isAllLocation"),label:"Do you want to give access to all locations",required:!0,disabled:xe()!==Ie.FRANCHISE,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:J,settings:{radioId:"allLocations",radioName:"allLocations",options:[{key:"true",label:"Yes"},{key:"false",label:"No"}],isInline:!0}}})}),xe()===Ie.FRANCHISE&&"false"===this.state.isAllLocation&&Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"franchiseLocation"),label:"Franchise Location List",required:!0,validations:[{validate:le.isRequired,message:"Franchise location list cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Franchise Location",options:this.state.franchiseLocationOption,multiple:!0,searchable:!0,onChangeCallback:function(t){t(e.state.franchiseLocation)}}}})}),xe()===Ie.COMPANY&&Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"isAllCity"),label:"Do you want to give access to all cities",required:!0,disabled:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:J,settings:{radioId:"allCity",radioName:"allCity",options:[{key:"true",label:"Yes"},{key:"false",label:"No"}],isInline:!0}}})})]})})})})]})}}]),a}(M),us={getAllRolesApi:Ea,getAllFranchiseLocationApi:da},ms=Object(o.b)((function(e){return{userManagementState:e.UserManagementState}}),us)(hs),ps=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"oem-details-wrapper",children:[Object(b.jsxs)("div",{className:"top",children:[Object(b.jsx)("h1",{className:"red-hat-display-bold f-s-24",children:"Ola - OEM"}),Object(b.jsxs)("div",{className:"items-wrapper",children:[Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("h5",{children:"Name"}),Object(b.jsx)("h6",{children:"Amar Sawant"})]}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("h5",{children:"Email"}),Object(b.jsx)("h6",{children:"dharmik@emiail.com"})]}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("h5",{children:"Contact Number"}),Object(b.jsx)("h6",{children:"98989898998"})]}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("h5",{children:"Location"}),Object(b.jsx)("h6",{children:"Mumbai - Maharashtra"})]})]})]}),Object(b.jsx)(Zn,{})]})}}]),a}(n.Component),bs=Object(o.b)((function(e){return Object(g.a)({},e)}),{})(ps),js=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleAddCredits=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setState({showAddCreditsModal:!n.state.showAddCreditsModal,creditUserId:e})};var s=e.location.state?e.location.state.data:null;return n.state={userData:s,showAddCreditsModal:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e,t,a,n,s,i=this.state.userData;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:"View User Details"}),Object(b.jsx)("div",{className:"add-edit-customer-wrapper",children:Object(b.jsx)("div",{className:"content view-detail-page",children:Object(b.jsxs)("div",{className:"basic-details",children:[Object(b.jsx)("h2",{children:"Basic Details"}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"User Name"}),Object(b.jsxs)("h3",{className:"regular lg",children:[null!==(e=null===i||void 0===i?void 0:i.first_name)&&void 0!==e?e:"-"," "," ",null!==(t=null===i||void 0===i?void 0:i.last_name)&&void 0!==t?t:""]})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Email"}),Object(b.jsx)("h3",{className:"regular lg",children:null!==(a=null===i||void 0===i?void 0:i.email)&&void 0!==a?a:"-"})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Mobile"}),Object(b.jsx)("h3",{className:"regular lg",children:null!==(n=null===i||void 0===i?void 0:i.mobile)&&void 0!==n?n:"-"})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Gender"}),Object(b.jsx)("h3",{className:"regular lg",children:null!==(s=null===i||void 0===i?void 0:i.gender)&&void 0!==s?s:"-"})]})})]})]})})})]})}}]),a}(n.Component),gs=Object(o.b)((function(e){return Object(g.a)({},e)}),{})(js),vs=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleAddBattery=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?n.props.history.push({pathname:"/edit-battery/".concat(e.id),state:{data:e}}):n.props.history.push("/add-battery")},n.onChangeMethod=function(e){n.setState({searchValue:e,conditions:[{key:"SEARCH_BY_TEXT",value:e.search}]}),Ze(n.props.history,0,e.search),n.props.getAllBatteryApi(Object(u.a)(n),0)},n.clearSearch=function(e){n.setState({searchValue:"",conditions:[]},(function(){0===e&&n.props.getAllBatteryApi(Object(u.a)(n),0),Ze(n.props.history,0)}))};var s=e.location.search,i=new URLSearchParams(s).get("p");return n.state={page:i?parseInt(i,10):1,data:[],conditions:[]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllBatteryApi(this),this.props.history.replace({search:"?p=".concat(this.state.page)})}},{key:"componentDidUpdate",value:function(e,t){var a=new URLSearchParams(e.location.search),n=parseInt(a.get("p"),10)||1,s=new URLSearchParams(this.props.location.search),i=parseInt(s.get("p"),10)||1,r=s.get("search")||"";n!==i&&(r?this.props.getAllBatteryApi(this):this.props.getAllBatteryApi(this,i-1))}},{key:"render",value:function(){var e=this,t=this.state,a=t.batteryList,n=t.page,s=t.totalPage,i=tt();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!1,breadcrumb:!0,currentPage:"Battery",title:"Battery",isFilter:!1,isPrimaryBtn:function(){return e.handleAddBattery()},primaryBtnText:i.includes(Te.ADD_UPDATE_BATTERY_INVENTORY)?"+ Add Battery":"",isSearch:!0,placeholder:"Search Battery",onChangeMethod:this.onChangeMethod,clearSearch:function(){return e.clearSearch(n||0)}}),Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:a,columnList:[{coumnWidth:250,labelName:"Battery Model",dataKey:"batteryModel",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("batteryModel"===t)return e.modelInfo.modelName}},{coumnWidth:250,labelName:"Battery Device ID",dataKey:"serialNo",className:"",isCell:!0,cell:function(e,t){if("serialNo"===t)return e.serialNo}},{coumnWidth:250,labelName:"Purchase Date",dataKey:"purchaseDate",className:"",isCell:!0,cell:function(e,t){if("purchaseDate"===t)return et(e.createdOn)}},{coumnWidth:250,labelName:"Iot Status",dataKey:"status",className:"",isCell:!0,cell:function(e,t){if("status"===t)return Object(b.jsxs)("p",{className:"status",children:[" ",Object(b.jsx)("span",{className:"circle ".concat(e.attachedTelematics?"active":"inactive")})," ",e.attachedTelematics?"Attached":"Inactive"]})}},{coumnWidth:250,labelName:"",dataKey:"options",className:"options-column",isCell:!0,cell:function(t,a){if("options"===a){var n=[];if(n.push({title:"Edit",type:"event",handleClick:function(){return e.handleAddBattery(t)}}),i.includes(Te.ADD_UPDATE_BATTERY_INVENTORY))return Object(b.jsx)(ra,{menuItem:n})}}}],history:this.props.history,location:this.props.location,totalPages:s,currentPage:n,message:"Battery list is empty"})})]})}}]),a}(n.Component),fs={getAllBatteryApi:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(a,n){var s=new URLSearchParams;s.append("start",t*Se||0),s.append("limit",Se),s.append("conditions",JSON.stringify(e.state.conditions||[])),s.append("sorts",JSON.stringify([])),xt.post("/offering/battery/search-battery",s).then((function(a){e.setState({batteryList:a.data.data.batteries.results,totalCount:a.data.data.batteries.totalCount,totalPage:$e(a.data.data.batteries.totalCount),page:t})})).catch((function(e){console.log("Catch",e)}))}}},Os=Object(o.b)((function(e){return{batteryState:e.BatteryState}}),fs)(vs),ys="RECEIVE_POSTS",xs={otpReceived:!1,otpCode:"",otpVerified:!1,countryCode:"+91",userObj:null,cnbcActive:!1},Ns=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xs,t=arguments.length>1?arguments[1]:void 0;return t.type===ys?Object(g.a)(Object(g.a)({},e),{},{json:t.json}):e},Ss=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleSave=function(){var e=new URLSearchParams;e.append("model_id",n.state.batteryModel),e.append("serial_no",n.state.serialNo),e.append("telematics_id",n.state.iotId),n.state.batteryId&&e.append("battery_id",n.state.batteryId),function(e,t){xt.post("/offering/battery/add-update-battery",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(t(),gt.b.success(e.data.message||"Something went wrong"))})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))}(e,(function(){return n.props.history.goBack()}))},n.onNextClick=function(){r.a.findDOMNode(n.form).dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))};var s=e.location.state?e.location.state.data:null;return n.state={batteryId:s?s.id:"",batteryModel:s?s.modelInfo.id:"",serialNo:s?s.serialNo:"",iotId:s&&s.attachedTelematics?s.attachedTelematics.id:"",purchaseDate:"",batteryModalOptions:[],iotModalOptions:[]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.getBatteryModelApi(this),this.props.getIotApi(this)}},{key:"render",value:function(){var e=this;return console.log("this.props",this.props),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:this.state.batteryId?"Edit Battery":"Add Battery",secondaryBtnText:"Cancel",isSecondaryBtn:function(){return e.props.history.goBack()},isPrimaryBtn:this.onNextClick,primaryBtnText:"Save Battery"}),Object(b.jsx)("div",{className:"add-edit-customer-wrapper",children:Object(b.jsx)("div",{className:"content",children:Object(b.jsx)(U,{onValidSubmit:this.handleSave,ref:function(t){return e.form=t},children:Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"batteryModel"),label:"Battery Model",required:!0,validations:[{validate:le.isRequired,message:"Battery model name cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Battery Model",options:this.state.batteryModalOptions,multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.batteryModel)}}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"serialNo"),label:"Battery Serial Number",required:!0,validations:[{validate:le.isRequired,message:"Battery serial number cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Battery Serial Number"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"iotId"),label:"IOT",required:!0,validations:[{validate:le.isRequired,message:"Iot cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Iot",options:this.state.iotModalOptions,multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.iotId)}}}})}),this.state.modelName===we.RUGGEDG2.toString()&&Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"battery2"),label:"Battery 2",required:!0,validations:[{validate:le.isRequired,message:"Battery 2 cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Battery",options:Ee,multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.battery2)}}}})}),this.props.isEdit&&Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"regNo"),label:"Registration Number",required:!0,disabled:!0,validations:[{validate:le.isRequired,message:"Registration number cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Registration Number"}}})})]})})})})]})}}]),a}(M),Cs={getBatteryModelApi:function(e){return function(t,a){xt.post("/offering/battery/get-all-battery-models").then((function(t){var a=t.data.data.battery_models.map((function(e){return{label:e.modelCompany+" - "+e.modelName,value:e.id}}));e.setState({batteryModalOptions:a})})).catch((function(e){console.log("Catch",e)}))}},getIotApi:function(e){return function(t,a){xt.post("/offering/telematics/get-all-telematics").then((function(t){var a=t.data.data.iot_devices.map((function(e){return{label:e.serialNo,value:e.id}}));e.setState({iotModalOptions:a})})).catch((function(e){console.log("Catch",e)}))}}},ks=Object(o.b)((function(e){return{batteryState:e.BatteryState}}),Cs)(Ss),As="GET_ALL_VEHICLE_PRICING",_s=function(e){var t=e.state,a=t.searchText,n=t.searchKey,s=new URLSearchParams;s.append("start",(e.state.page-1)*Se),s.append("limit",Se),s.append("conditions",JSON.stringify(a?[{key:n,value:a}]:[])),s.append("sorts",JSON.stringify([])),xt.post("/offering/vehicle/search-vehicle-model",s).then((function(t){t.data.error?gt.b.error(t.data.message||"Something went wrong"):e.setState({bikeModels:t.data.data.data.results,totalPages:Math.ceil(t.data.data.data.totalCount/Se)})})).catch((function(e){console.log("Catch",e)}))},Es=function(e,t){xt.post("offering/vehicle/get-vehicle-model",e).then((function(e){t.setState({bikeModelData:e.data.data.vehicle_model})})).catch((function(e){console.log("Catch",e)}))},ws=function(e){return function(t,a){e.append("start",-1),e.append("limit",-1),e.append("sorts",JSON.stringify([])),xt.post("offering/vehicle/get-vehicle-model-pricing-list",e).then((function(e){var a;t((a=e.data.data,{type:As,payload:a}))})).catch((function(e){console.log("Catch",e)}))}},Is=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleFilter=function(){n.setState({showFilter:!n.state.showFilter})},n.handleAddBikeModel=function(){n.props.history.push("/master/bike-models/add-bike-model")},n.clearSearch=function(){n.onChangeMethod({search:""})},n.onChangeMethod=function(e){n.setState({searchText:e.search,page:1},(function(){Ze(n.props.history,1,e.search)}))},n.handleEditBikeModel=function(e){n.props.history.push({pathname:"/master/bike-models/edit-bike-model/",state:{editData:e}})};var s=e.location.search,i=new URLSearchParams(s),r=i.get("p"),o=i.get("search");return n.state={bikeModels:[],page:r?parseInt(r,10):1,totalPages:1,searchText:o,searchKey:"SEARCH_BY_TEXT",showFilter:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){_s(this),this.props.history.replace({search:"?p=".concat(this.state.page)})}},{key:"componentDidUpdate",value:function(e,t){var a=this,n=new URLSearchParams(e.location.search),s=parseInt(n.get("p"),10)||1,i=n.get("search"),r=new URLSearchParams(this.props.location.search),o=parseInt(r.get("p"),10)||1,c=r.get("search");s===o&&i===c||this.setState({page:o,searchText:c},(function(){_s(a)}))}},{key:"render",value:function(){var e=this,t=this.state.bikeModels,a=tt();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!1,breadcrumb:!0,currentPage:"Bike Models",title:"Bike Models",isFilter:!1,isPrimaryBtn:this.handleAddBikeModel,primaryBtnText:a.includes(Te.ADD_UPDATE_VEHICLE_MODEL)?"+ Add Bike Model":"",isSearch:!0,placeholder:"Search Bike Model",onChangeMethod:this.onChangeMethod,clearSearch:this.clearSearch,searchValue:{search:this.state.searchText}}),Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:t,columnList:[{coumnWidth:250,labelName:"Model Name",dataKey:"modelName",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("modelName"===t)return e.modelName}},{coumnWidth:300,labelName:"Manufacturer Name",dataKey:"modelCompany",className:"",isCell:!0,cell:function(e,t){if("modelCompany"===t)return e.modelCompany}},{coumnWidth:250,labelName:"No of Batteries",dataKey:"noOfBatteries",className:"",isCell:!0,cell:function(e,t){if("noOfBatteries"===t)return e.noOfBatteries}},{coumnWidth:200,labelName:"Tax (in percentage)",dataKey:"taxPercentage",className:"",isCell:!0,cell:function(e,t){if("taxPercentage"===t)return e.taxPercentage}},{coumnWidth:250,labelName:"Tax Code",dataKey:"taxCode",className:"",isCell:!0,cell:function(e,t){if("taxCode"===t)return e.taxCode}},{coumnWidth:50,labelName:"",dataKey:"options",className:"options-column",isCell:!0,cell:function(t,n){if("options"===n){var s=[{title:"View Details",type:"",linkUrl:"/master/bike-models/view-details/".concat(t.id)}];return a.includes(Te.ADD_UPDATE_VEHICLE_MODEL)&&s.push({title:"Edit",type:"event",handleClick:function(){return e.handleEditBikeModel(t)}}),Object(b.jsx)(ra,{menuItem:s})}}}],history:this.props.history,location:this.props.location,totalPages:this.state.totalPages,currentPage:this.state.page-1,message:"Bike models not found"})})]})}}]),a}(n.Component),Ls=Object(o.b)((function(e){return{bikeModelState:e.BikeModelState}}),{})(Is),Ds={pricingData:[]},Ps=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ds,t=arguments.length>1?arguments[1]:void 0;return t.type===As?{pricingData:t.payload.results}:e},Ts=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n,s,i,o,c,l,h,u,m,p,b,j,g;Object(d.a)(this,a),(g=t.call(this,e)).handleSave=function(){r.a.findDOMNode(g.form).dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},g.onValidSubmit=function(){var e=new URLSearchParams;e.append("model_name",g.state.modelName),e.append("model_company",g.state.manufacturerName),e.append("no_of_batteries",g.state.noOfBatteries),e.append("tax_percentage",g.state.tax),e.append("tax_code",g.state.taxCode),e.append("cancellation_tax_percentage",g.state.cancellationTaxPercentage),e.append("cancellation_tax_code",g.state.cancellationTaxCode),e.append("damages_tax_percentage",g.state.damageTaxPercentage),e.append("damages_tax_code",g.state.damageTaxCode),e.append("optimal_speed",JSON.stringify({min:parseFloat(g.state.minSpeed),max:parseFloat(g.state.maxSpeed)})),e.append("vehicle_range",JSON.stringify({min:parseFloat(g.state.minRange),max:parseFloat(g.state.maxRange)})),e.append("optimal_acceleration",JSON.stringify({min:parseFloat(g.state.minAcceleration),max:parseFloat(g.state.maxAcceleration)})),e.append("continuous_power",JSON.stringify({min:parseFloat(g.state.minPower),max:parseFloat(g.state.maxPower)})),e.append("torque",JSON.stringify({min:parseFloat(g.state.minTorque),max:parseFloat(g.state.maxTorque)})),e.append("charging_time",JSON.stringify({min:parseFloat(g.state.minCharging),max:parseFloat(g.state.maxCharging)})),e.append("images",JSON.stringify([g.state.vehicleImage.imageId])),g.state.editId&&e.append("model_id",g.state.editId),function(e,t){xt.post("offering/vehicle/add-update-vehicle-model",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(t(),gt.b.success(e.data.message||"Something went wrong"))})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))}(e,(function(){g.props.history.push("/master/bike-models")}))};var v=e.location.state?e.location.state.editData:{};return console.log("editData",v),g.state={editId:v.id||"",modelName:v.modelName||"",manufacturerName:v.modelCompany||"",noOfBatteries:v.noOfBatteries||"",tax:v.taxPercentage||"",taxCode:v.taxCode||"",cancellationTaxCode:v&&v.cancellationTaxCode||"",cancellationTaxPercentage:v&&v.cancellationTaxPercentage||"",damageTaxCode:v&&v.damageTaxCode||"",damageTaxPercentage:v&&v.damageTaxPercentage||"",minSpeed:v.vehicleInformation&&(null===(n=v.vehicleInformation.optimalSpeed)||void 0===n?void 0:n.min)||"",maxSpeed:v.vehicleInformation&&(null===(s=v.vehicleInformation.optimalSpeed)||void 0===s?void 0:s.max)||"",minRange:v.vehicleInformation&&(null===(i=v.vehicleInformation.vehicleRange)||void 0===i?void 0:i.min)||"",maxRange:v.vehicleInformation&&(null===(o=v.vehicleInformation.vehicleRange)||void 0===o?void 0:o.max)||"",minAcceleration:v.vehicleInformation&&(null===(c=v.vehicleInformation.optimalAcceleration)||void 0===c?void 0:c.min)||"",maxAcceleration:v.vehicleInformation&&(null===(l=v.vehicleInformation.optimalAcceleration)||void 0===l?void 0:l.max)||"",minPower:v.vehicleInformation&&(null===(h=v.vehicleInformation.continuousPower)||void 0===h?void 0:h.min)||"",maxPower:v.vehicleInformation&&(null===(u=v.vehicleInformation.continuousPower)||void 0===u?void 0:u.max)||"",minTorque:v.vehicleInformation&&(null===(m=v.vehicleInformation.torque)||void 0===m?void 0:m.min)||"",maxTorque:v.vehicleInformation&&(null===(p=v.vehicleInformation.torque)||void 0===p?void 0:p.max)||"",minCharging:v.vehicleInformation&&(null===(b=v.vehicleInformation.chargingTime)||void 0===b?void 0:b.min)||"",maxCharging:v.vehicleInformation&&(null===(j=v.vehicleInformation.chargingTime)||void 0===j?void 0:j.max)||"",vehicleImage:v&&v.images?{imageId:v.images[0].id,name:v.images[0].name,path:Ae+v.images[0].path}:""},g}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:"".concat(this.state.editId?"Edit":"Add"," Bike Model"),secondaryBtnText:"Cancel",isSecondaryBtn:function(){return e.props.history.goBack()},isPrimaryBtn:this.handleSave,primaryBtnText:"Save Bike Model"}),Object(b.jsx)("div",{className:"add-edit-customer-wrapper",children:Object(b.jsx)("div",{className:"content",children:Object(b.jsxs)(U,{onValidSubmit:this.onValidSubmit,ref:function(t){return e.form=t},children:[Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"modelName"),label:"Model Name",required:!0,validations:[{validate:le.isRequired,message:"Model name cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Model Name"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"manufacturerName"),label:"Manufacturer Name",required:!0,validations:[{validate:le.isRequired,message:"Manufacturer name cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Manufacturer Name"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"noOfBatteries"),label:"No of Batteries",required:!0,validations:[{validate:le.isRequired,message:"Count cannot be empty"},{validate:le.isNum,message:"Please enter a valid number"}],control:{type:je,settings:{placeholder:"Enter no. of batteries"}}})}),Object(b.jsx)(Zt.a,{md:3,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"cancellationTaxPercentage"),label:"Cancellation Tax Percentage",required:!0,validations:[{validate:le.isRequired,message:"Cancellation tax percentage cannot be empty"},{validate:le.isPositiveInt,message:"Please enter a valid x number"}],control:{type:je,settings:{placeholder:"Enter Cancellation Tax Percentage"}}})}),Object(b.jsx)(Zt.a,{md:3,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"cancellationTaxCode"),label:"Cancellation Tax Code",required:!0,validations:[{validate:le.isRequired,message:"Cancellation tax code cannot be empty"},{validate:le.isPositiveInt,message:"Please enter a valid x number"}],control:{type:je,settings:{placeholder:"Enter Cancellation Tax Code"}}})}),Object(b.jsx)(Zt.a,{md:3,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"damageTaxPercentage"),label:"Damage Tax Percentage",required:!0,validations:[{validate:le.isRequired,message:"Damage tax percentage cannot be empty"},{validate:le.isPositiveInt,message:"Please enter a valid x number"}],control:{type:je,settings:{placeholder:"Enter Damage Tax Percentage"}}})}),Object(b.jsx)(Zt.a,{md:3,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"damageTaxCode"),label:"Damage Tax Code",required:!0,validations:[{validate:le.isRequired,message:"Damage tax code cannot be empty"},{validate:le.isPositiveInt,message:"Please enter a valid x number"}],control:{type:je,settings:{placeholder:"Enter Damage Tax Code"}}})}),Object(b.jsx)(Zt.a,{md:3,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"tax"),label:"Tax (in percentage)",required:!0,validations:[{validate:le.isRequired,message:"Tax cannot be empty"},{validate:le.isPositiveInt,message:"Tax cannot be negative"}],control:{type:je,settings:{placeholder:"Enter Value"}}})}),Object(b.jsx)(Zt.a,{md:3,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"taxCode"),label:"Tax Code (Hsn Code)",required:!0,validations:[{validate:le.isRequired,message:"Tax Code cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Tax Code"}}})}),Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsxs)("div",{className:"min-max-element",children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"minSpeed"),label:"Optimal Speed",required:!0,validations:[{validate:le.isRequired,message:"Minimum speed cannot be empty"},{validate:le.isNum,message:"Please enter numeric value"},{validate:le.isInt,message:"Please enter numeric value"}],control:{type:je,settings:{placeholder:"Enter Minimum Speed"}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"maxSpeed"),label:"",required:!0,validations:[{validate:le.isRequired,message:"Maximum speed cannot be empty"},{validate:le.isNum,message:"Please enter numeric value"},{validate:le.isInt,message:"Please enter numeric value"}],control:{type:je,settings:{placeholder:"Enter Maximum Speed"}}})]})})]}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsxs)("div",{className:"min-max-element",children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"minRange"),label:"Vehicle Range",required:!0,validations:[{validate:le.isRequired,message:"Minimum range cannot be empty"},{validate:le.isNum,message:"Please enter numeric value"},{validate:le.isInt,message:"Please enter numeric value"}],control:{type:je,settings:{placeholder:"Enter Minimum Range"}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"maxRange"),label:"",required:!0,validations:[{validate:le.isRequired,message:"Maximum range cannot be empty"},{validate:le.isNum,message:"Please enter numeric value"},{validate:le.isInt,message:"Please enter numeric value"}],control:{type:je,settings:{placeholder:"Enter Maximum Range"}}})]})}),Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsxs)("div",{className:"min-max-element",children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"minCharging"),label:"Vehicle Charging",required:!0,validations:[{validate:le.isRequired,message:"Minimum charging cannot be empty"},{validate:le.isNum,message:"Please enter numeric value"},{validate:le.isInt,message:"Please enter numeric value"}],control:{type:je,settings:{placeholder:"Enter Minimum Charging"}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"maxCharging"),label:"",required:!0,validations:[{validate:le.isRequired,message:"Maximum charging cannot be empty"},{validate:le.isNum,message:"Please enter numeric value"},{validate:le.isInt,message:"Please enter numeric value"}],control:{type:je,settings:{placeholder:"Enter Maximum Charging"}}})]})}),Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsxs)("div",{className:"min-max-element",children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"minAcceleration"),label:"Optimal Acceleration",control:{type:je,settings:{placeholder:"Enter Minimum Acceleration"}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"maxAcceleration"),label:"",control:{type:je,settings:{placeholder:"Enter Maximum Acceleration"}}})]})}),Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsxs)("div",{className:"min-max-element",children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"minPower"),label:"Continuous Power",control:{type:je,settings:{placeholder:"Enter Minimum Power"}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"maxPower"),label:"",control:{type:je,settings:{placeholder:"Enter Maximum Power"}}})]})}),Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsxs)("div",{className:"min-max-element",children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"minTorque"),label:"Torque",control:{type:je,settings:{placeholder:"Enter Minimum Torque"}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"maxTorque"),label:"",control:{type:je,settings:{placeholder:"Enter Maximum Torque"}}})]})}),Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"vehicleImage"),label:"Upload file",required:!0,validations:[{validate:le.isRequired,message:"File is required"}],control:{type:lt,settings:{moduleName:"offering",subModule:"vehicle",fileType:"IMAGE",extensions:["image/*"],maxFiles:1,maxFileSize:1e8,onSelect:function(e,t){t({id:e.lastModified,name:e.name,size:e.size,mimeType:e.type,path:"single.jpg"},ke)}}}})})]})]})})})]})}}]),a}(M),Rs=Object(o.b)((function(e){return Object(g.a)({},e)}),{})(Ts),Ms=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleFilter=function(){n.setState({showFilter:!n.state.showFilter})},n.handleAddIot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?n.props.history.push({pathname:"/edit-iot/".concat(e.id),state:{data:e}}):n.props.history.push("/add-iot")},n.onChangeMethod=function(e){n.setState({searchValue:e,conditions:[{key:"SEARCH_BY_TEXT",value:e.search}]}),Ze(n.props.history,0,e.search),n.props.getAllIotApi(Object(u.a)(n),0)},n.clearSearch=function(e){n.setState({searchValue:"",conditions:[]},(function(){0===e&&n.props.getAllIotApi(Object(u.a)(n),0),Ze(n.props.history,0)}))};var s=e.location.search,i=new URLSearchParams(s).get("p");return n.state={page:i?parseInt(i,10):1,iotList:[],showFilter:!1,conditions:[]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllIotApi(this),this.props.history.replace({search:"?p=".concat(this.state.page)})}},{key:"componentDidUpdate",value:function(e,t){var a=new URLSearchParams(e.location.search),n=parseInt(a.get("p"),10)||1,s=new URLSearchParams(this.props.location.search),i=parseInt(s.get("p"),10)||1,r=s.get("search")||"";n!==i&&(r?this.props.getAllIotApi(this):this.props.getAllIotApi(this,i-1))}},{key:"render",value:function(){var e=this,t=this.state,a=t.page,n=t.totalPage,s=t.iotList,i=tt();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{breadcrumb:!0,currentPage:"IOT",title:"IOT",isFilter:!1,isPrimaryBtn:function(){return e.handleAddIot()},primaryBtnText:i.includes(Te.ADD_UPDATE_TELEMATICS_INVENTORY)?"+ Add IOT":"",isSearch:!0,placeholder:"Search IOT",onChangeMethod:this.onChangeMethod,clearSearch:function(){return e.clearSearch(a||0)}}),Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:s,columnList:[{coumnWidth:200,labelName:"IOT model",dataKey:"model",className:"",isCell:!0,cell:function(e,t){if("model"===t)return e.modelInfo.modelName}},{coumnWidth:350,labelName:"IOT Serial Number",dataKey:"serialNo",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("serialNo"===t)return e.serialNo}},{coumnWidth:250,labelName:"Sim Number",dataKey:"simCardId",className:"",isCell:!0,cell:function(e,t){if("simCardId"===t)return e.simCardInfo.simcardId}},{coumnWidth:250,labelName:"IMEI Number",dataKey:"imei",className:"",isCell:!0,cell:function(e,t){if("imei"===t)return e.imei}},{coumnWidth:250,labelName:"Purchase Date",dataKey:"createdOn",className:"",isCell:!0,cell:function(e,t){if("createdOn"===t)return et(e.createdOn)}},{coumnWidth:50,labelName:"",dataKey:"options",className:"options-column",isCell:!0,cell:function(t,a){if("options"===a){var n=[];if(n.push({title:"Edit",type:"event",handleClick:function(){return e.handleAddIot(t)}}),i.includes(Te.ADD_UPDATE_TELEMATICS_INVENTORY))return Object(b.jsx)(ra,{menuItem:n})}}}],history:this.props.history,location:this.props.location,totalPages:n,currentPage:a,message:"IOT list is empty"})})]})}}]),a}(n.Component),Bs={getAllIotApi:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(a,n){var s=new URLSearchParams;s.append("start",t*Se||0),s.append("limit",Se),s.append("conditions",JSON.stringify(e.state.conditions||[])),s.append("sorts",JSON.stringify([])),xt.post("/offering/telematics/search-telematics",s).then((function(a){e.setState({iotList:a.data.data.telematics.results,totalCount:a.data.data.telematics.totalCount,totalPage:$e(a.data.data.telematics.totalCount),page:t})})).catch((function(e){console.log("Catch",e)}))}}},Fs=Object(o.b)((function(e){return{iotState:e.IotState}}),Bs)(Ms),Us="RECEIVE_POSTS",Vs={otpReceived:!1,otpCode:"",otpVerified:!1,countryCode:"+91",userObj:null,cnbcActive:!1},qs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vs,t=arguments.length>1?arguments[1]:void 0;return t.type===Us?Object(g.a)(Object(g.a)({},e),{},{json:t.json}):e},Ys=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).onSubmit=function(){var e=new URLSearchParams;e.append("model_id",n.state.modelId),e.append("serial_no",n.state.serialNo),e.append("sim_number",n.state.simNumber),e.append("imei_number",n.state.imeiNo),n.state.telematicsId&&e.append("telematics_id",n.state.telematicsId),function(e,t){xt.post("/offering/telematics/add-update-telematics",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(t(),gt.b.success(e.data.message||"Something went wrong"))})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))}(e,(function(){return n.props.history.goBack()}))},n.onNextClick=function(){r.a.findDOMNode(n.form).dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))};var s=e.location.state?e.location.state.data:null;return n.state={telematicsId:s?s.id:"",isEdit:!(!s||!s),modelId:s?s.modelInfo.id:"",serialNo:s?s.serialNo:"",iotModalOptions:[],simNumber:s?s.simCardInfo.simcardId:"",imeiNo:s?s.imei:""},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.getIotModelApi(this)}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:this.state.telematicsId?"Edit Iot":"Add Iot",secondaryBtnText:"Cancel",isSecondaryBtn:function(){return e.props.history.goBack()},isPrimaryBtn:this.onNextClick,primaryBtnText:"Save Iot"}),Object(b.jsx)("div",{className:"add-edit-customer-wrapper",children:Object(b.jsx)("div",{className:"content",children:Object(b.jsxs)(U,{onValidSubmit:this.onSubmit,ref:function(t){return e.form=t},children:[Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"modelId"),label:"IOT Model",required:!0,validations:[{validate:le.isRequired,message:"IOT model cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Model",options:this.state.iotModalOptions,multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.modelId)}}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"serialNo"),label:"IOT Serial Number",required:!0,validations:[{validate:le.isRequired,message:"IOT serial number cannot be empty"}],control:{type:je,settings:{placeholder:"Enter IOT Serial Number"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"simNumber"),label:"Sim Number",required:!0,validations:[{validate:le.isRequired,message:"Sim number cannot be empty"},{validate:le.isWithinLength(20,20),message:"Please enter a valid 20 digit SIM number"}],control:{type:je,settings:{placeholder:"Enter Sim Number"}}})})]}),Object(b.jsx)(ka.a,{children:Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"imeiNo"),label:"IMEI Number",required:!0,validations:[{validate:le.isRequired,message:"IMEI cannot be empty"},{validate:le.isWithinLength(15,15),message:"Please enter a valid 15 digit IMEI number"}],control:{type:je,settings:{placeholder:"Enter IMEI"}}})})})]})})})]})}}]),a}(M),Ks={getIotModelApi:function(e){return function(t,a){xt.post("/offering/telematics/get-all-telematics-model").then((function(t){var a=t.data.data.iot_models.map((function(e){return{label:e.modelCompany+" - "+e.modelName,value:e.id}}));e.setState({iotModalOptions:a})})).catch((function(e){console.log("Catch",e)}))}}},Ws=Object(o.b)((function(e){return{iotState:e.IotState}}),Ks)(Ys),Hs=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onSubmit=function(){},n.state={chassisNo:""},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(b.jsx)(Bt,{show:this.props.show,onHide:this.props.handleClose,title:"Bulk Upload",children:Object(b.jsxs)(U,{onValidSubmit:this.onSubmit,children:[Object(b.jsx)("div",{className:"modal-wrapper",children:Object(b.jsx)("div",{className:"file-upload-wrapper",children:Object(b.jsx)(te,{valueLink:this.linkState(this,"attachment"),label:"Upload your excel file",required:!0,validations:[{validate:le.isRequired,message:"File is required"}],control:{type:lt,settings:{moduleName:"account",subModule:"project",fileType:"IMAGE",extensions:["image/*"],maxFiles:1,maxFileSize:1e8,onSelect:function(e,t){t({id:e.lastModified,name:e.name,size:e.size,mimeType:e.type,path:"single.jpg"},"http://35.154.155.206/api")}}}})})}),Object(b.jsx)("div",{className:"submit-wrapper",style:{justifyContent:"right"},children:Object(b.jsx)(re,{customClass:"btn black-btn ".concat(!this.state.chassisNo&&"inactive-btn"),children:"Upload"})})]})})}}]),a}(M);Hs.propTypes={show:T.a.bool.isRequired,handleClose:T.a.func.isRequired};var Js=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onSubmit=function(){var e=new URLSearchParams;e.append("vehicle_status",n.state.status),e.append("vehicle_id",n.props.vehicleInfo.id),function(e,t){xt.post("offering/vehicle/update-vehicle-status",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(gt.b.success(e.data.message),t())})).catch((function(e){console.log("Catch",e)}))}(e,n.props.handleUpdate)},n.state={status:e.vehicleInfo.status||""},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(b.jsx)(Bt,{show:this.props.show,onHide:function(){return e.props.handleClose()},title:"Update Status",children:Object(b.jsxs)(U,{onValidSubmit:this.onSubmit,children:[Object(b.jsx)("div",{className:"modal-wrapper",children:Object(b.jsx)(te,{valueLink:this.linkState(this,"status"),label:"Vehicle Status",required:!0,validations:[{validate:le.isRequired,message:"Vehicle status cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Status",options:ze,multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.status)}}}})}),Object(b.jsx)("div",{className:"submit-wrapper",style:{justifyContent:"right"},children:Object(b.jsx)(re,{customClass:"btn black-btn ".concat(!this.state.status&&"inactive-btn"),children:"Done"})})]})})}}]),a}(M),zs=Object(o.b)((function(e){return Object(g.a)({},e)}),{})(Js),Gs=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleFilter=function(){n.setState({showFilter:!n.state.showFilter})},n.clearSearch=function(){n.onChangeMethod({search:""})},n.onChangeMethod=function(e){n.setState({searchText:e.search,page:1},(function(){Ze(n.props.history,1,e.search)}))},n.handleEditVehicle=function(e){n.props.history.push({pathname:"/edit-vehicle/",state:{editData:e}})},n.handleAddVehicle=function(){n.props.history.push("/add-vehicle")},n.handleUpdateStatus=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.setState({showUpdateStatus:!n.state.showUpdateStatus,vehicleInfo:e})},n.handleUpdate=function(){n.setState({showUpdateStatus:!n.state.showUpdateStatus,vehicleInfo:""}),oa(Object(u.a)(n))},n.handleViewLocation=function(e){n.props.history.push({pathname:"/view-vehicle-location/".concat(e.id)})};var s=e.location.search,i=new URLSearchParams(s),r=i.get("p"),o=i.get("search");return n.state={vehiclesList:[],page:r?parseInt(r,10):1,totalPages:1,searchText:o,searchKey:"SEARCH_BY_TEXT",showFilter:!1,showBulkUploadModal:!1,showUpdateStatus:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){oa(this)}},{key:"componentDidUpdate",value:function(e,t){var a=this,n=new URLSearchParams(e.location.search),s=parseInt(n.get("p"),10)||1,i=n.get("search"),r=new URLSearchParams(this.props.location.search),o=parseInt(r.get("p"),10)||1,c=r.get("search");s===o&&i===c||this.setState({page:o,searchText:c},(function(){oa(a)}))}},{key:"render",value:function(){var e=this,t=this.state.vehiclesList,a=tt();return Object(b.jsxs)(b.Fragment,{children:[this.state.showUpdateStatus&&Object(b.jsx)(zs,{show:this.state.showUpdateStatus,handleClose:function(){return e.handleUpdateStatus()},handleUpdate:function(){return e.handleUpdate()},vehicleInfo:this.state.vehicleInfo}),Object(b.jsx)(Yt,{backArrowBtn:!1,breadcrumb:!0,currentPage:"Vehicles",title:"Vehicles",isFilter:!1,isPrimaryBtn2:this.handleAddVehicle,primaryBtnText2:a.includes(Te.ADD_UPDATE_VEHICLE_INVENTORY)?"+ Add Vehicle":null,isSearch:!0,placeholder:"Search Vehicle",onChangeMethod:this.onChangeMethod,clearSearch:this.clearSearch,searchValue:{search:this.state.searchText}}),Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:t,columnList:[{coumnWidth:250,labelName:"Model Name",dataKey:"modelInfo",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("modelInfo"===t)return e.modelInfo?e.modelInfo.modelName:"-"}},{coumnWidth:250,labelName:"Chassis Number",dataKey:"chassisNo",className:"",isCell:!0,cell:function(e,t){if("chassisNo"===t)return e.chassisNo}},{coumnWidth:250,labelName:"Registration number",dataKey:"registrationNo",className:"",isCell:!0,cell:function(e,t){if("registrationNo"===t)return e.registrationNo||"NA"}},{coumnWidth:250,labelName:"Battery Status",dataKey:"batteryStatus",className:"",isCell:!0,cell:function(e,t){if("batteryStatus"===t&&e.attachedBatteries.length>0)return Object(b.jsxs)("p",{className:"status",children:[" ",Object(b.jsx)("span",{className:"circle ".concat(e.attachedBatteries[0].active?"active":"inactive")})," ",e.attachedBatteries[0].active?"Attached":"Inactive"]})}},{coumnWidth:250,labelName:"Iot Status",dataKey:"iotStatus",className:"",isCell:!0,cell:function(e,t){if("iotStatus"===t)return Object(b.jsxs)("p",{className:"status",children:[" ",Object(b.jsx)("span",{className:"circle ".concat(e.attachedTelematics.active?"active":"inactive")})," ",e.attachedTelematics.active?"Attached":"Inactive"]})}},{coumnWidth:200,labelName:"Vehicle Status",dataKey:"vehicleStatus",className:"",isCell:!0,cell:function(e,t){if("vehicleStatus"===t)return Je.getText(e.status)}},{coumnWidth:250,labelName:"",dataKey:"options",className:"options-column",isCell:!0,cell:function(t,n){if("options"===n){var s=[];if(s.push({title:"Edit",type:"event",handleClick:function(){return e.handleEditVehicle(t)}}),s.push({title:"Update Status",type:"event",handleClick:function(){return e.handleUpdateStatus(t)}}),s.push({title:"View Location",type:"event",handleClick:function(){return e.handleViewLocation(t)}}),a.includes(Te.ADD_UPDATE_VEHICLE_INVENTORY))return Object(b.jsx)(ra,{menuItem:s})}}}],history:this.props.history,location:this.props.location,totalPages:this.state.totalPages,currentPage:this.state.page-1,message:"Vehicle list is empty"})})]})}}]),a}(n.Component),Qs=Object(o.b)((function(e){return{vehiclesState:e.VehiclesState}}),{})(Gs),Xs="RECEIVE_POSTS",Zs={otpReceived:!1,otpCode:"",otpVerified:!1,countryCode:"+91",userObj:null,cnbcActive:!1},$s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zs,t=arguments.length>1?arguments[1]:void 0;return t.type===Xs?Object(g.a)(Object(g.a)({},e),{},{json:t.json}):e},ei=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleSave=function(){r.a.findDOMNode(n.form).dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},n.onValidSubmit=function(){var e=[];n.state.battery1&&e.push(n.state.battery1),n.state.battery2&&e.push(n.state.battery2);var t=new URLSearchParams;t.append("model_id",n.state.modelId),t.append("chassis_no",n.state.chassisNumber),t.append("motor_no",n.state.motorNumber),t.append("registration_no",n.state.regNo),t.append("name",n.state.vehicleName),n.state.iot&&t.append("telematics_id",n.state.iot),t.append("battery_ids",JSON.stringify(e)),n.state.editId&&t.append("vehicle_id",n.state.editId),function(e,t){xt.post("/offering/vehicle/add-update-vehicle",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(t(),gt.b.success(e.data.message||"Something went wrong"))})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))}(t,(function(){n.props.history.push("/vehicles")}))};var s=xe(),i=e.location.state?e.location.state.editData:{};return console.log("editData",i),n.state={editId:i.id||"",bikeModelOptions:[],iotOptions:[],batteryOptions:[],regNo:i.registrationNo||"",vehicleName:i.name||"",motorNumber:i.motorNo||"",modelId:i.modelInfo?i.modelInfo.id:"",chassisNumber:i.chassisNo||"",iot:i.attachedTelematics?i.attachedTelematics.id:"",battery1:i.attachedBatteries?i.attachedBatteries[0].id:"",battery2:i.attachedBatteries&&i.attachedBatteries[1]?i.attachedBatteries[1].id:"",showBattery2:!(!i.attachedBatteries||!i.attachedBatteries[1]),isOem:s===Ie.OEM},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e;!function(e){var t=new URLSearchParams;t.append("start",0),t.append("limit",1e3),t.append("conditions",JSON.stringify([])),t.append("sorts",JSON.stringify([])),xt.post("/offering/vehicle/search-vehicle-model",t).then((function(t){if(t.data.error)gt.b.error(t.data.message||"Something went wrong");else{var a=t.data.data.data.results.map((function(e){return{value:e.id,label:e.modelName,noOfBatteries:e.noOfBatteries}}));e.setState({bikeModelOptions:a})}})).catch((function(e){console.log("Catch",e)}))}(this),function(e){var t=new URLSearchParams;t.append("start",0),t.append("limit",-1),t.append("conditions",JSON.stringify([])),t.append("sorts",JSON.stringify([])),xt.post("/offering/battery/search-battery",t).then((function(t){if(t.data.error)gt.b.error(t.data.message||"Something went wrong");else{var a=t.data.data.batteries.results.map((function(e){return{value:e.id,label:e.serialNo}}));e.setState({batteryOptions:a})}})).catch((function(e){console.log("Catch",e)}))}(this),e=this,xt.post("/offering/telematics/get-all-telematics").then((function(t){if(t.data.error)gt.b.error(t.data.message||"Something went wrong");else{var a=t.data.data.iot_devices.map((function(e){return{value:e.id,label:e.serialNo}}));e.setState({iotOptions:a})}})).catch((function(e){console.log("Catch",e)}))}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:"".concat(this.state.editId?"Edit":"Add"," Vehicle"),secondaryBtnText:"Cancel",isSecondaryBtn:function(){return e.props.history.goBack()},isPrimaryBtn:this.handleSave,primaryBtnText:"Save Vehicle"}),Object(b.jsx)("div",{className:"add-edit-customer-wrapper",children:Object(b.jsx)("div",{className:"content",children:Object(b.jsx)(U,{onValidSubmit:this.onValidSubmit,ref:function(t){return e.form=t},children:Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"vehicleName"),label:"Vehicle Name",required:!0,validations:[{validate:le.isRequired,message:"Vehicle name cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Vehicle Name"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"regNo"),label:"Registration Number",required:!0,validations:[{validate:le.isRequired,message:"Registration number cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Registration Number"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"motorNumber"),label:"Motor Number",required:!0,validations:[{validate:le.isRequired,message:"Motor number cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Motor Number"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"chassisNumber"),label:"Chassis Number",required:!0,validations:[{validate:le.isRequired,message:"Chassis number cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Chassis Number"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"modelId"),label:"Model Name",required:!0,validations:[{validate:le.isRequired,message:"Model name cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Model Name",options:this.state.bikeModelOptions,multiple:!1,searchable:!0,onChangeCallback:function(){var t=e.state.bikeModelOptions.find((function(t){return t.value===e.state.modelId}));e.setState({showBattery2:2===t.noOfBatteries})}}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"iot"),label:"IOT",control:{type:Oe,settings:{placeholder:"Select Iot",options:this.state.iotOptions,multiple:!1,searchable:!0}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"battery1"),label:"Battery 1",control:{type:Oe,settings:{placeholder:"Select Battery",options:this.state.batteryOptions,multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.battery1)}}}})}),this.state.showBattery2&&Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"battery2"),label:"Battery 2",control:{type:Oe,settings:{placeholder:"Select Battery",options:this.state.batteryOptions,multiple:!1,searchable:!0}}})})]})})})})]})}}]),a}(M),ti=Object(o.b)((function(e){return{vehiclesState:e.VehiclesState}}),{})(ei),ai=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;console.log("customerInfo",a);var n=e.state,s=n.searchText,i=n.searchKey;console.log("ctx.state.page * API_LIMIT",e.state.page);var r=new URLSearchParams;t?(r.append("start",-1),r.append("limit",-1)):(r.append("start",(e.state.page-1)*Se||0),r.append("limit",Se)),r.append("conditions",JSON.stringify(s?[{key:i,value:s}]:[])),r.append("sorts",JSON.stringify([])),xt.post("/organisation/user/search-customer",r).then((function(n){if(n.data.error)gt.b.error(n.data.message||"Something went wrong");else{var s=n.data.data.results.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{label:e.mobile||"Null",value:e.id})})),i=a?s.filter((function(e){return e.id===a.user_details.id})):"";t?e.setState(Object(g.a)({phoneNumberOptions:s},a&&{customerInfo:a.user_details,showAddCustomer:!1,phoneNumber:a.user_details.id,selectedCustomer:i})):e.setState({customersList:n.data.data.results,totalPages:Math.ceil(n.data.data.total_count/Se)})}})).catch((function(e){console.log("Catch",e)}))},ni=function(e,t){var a=new URLSearchParams;a.append("customer_id",e),xt.post("/organisation/user/get-customer-details",a).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):t.setState({customerData:e.data.data})})).catch((function(e){console.log("Catch",e)}))},si=function(e,t){var a=new URLSearchParams;return a.append("user_id",e),xt.post("organisation/user/get-reward-history-by-user",a).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(console.log("res",e),t.setState({customerRewardList:e.data.data.results,totalPages:Math.ceil(e.data.data.total_count/Se)}))})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))},ii=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).clearSearch=function(){n.onChangeMethod({search:""})},n.onChangeMethod=function(e){n.setState({searchText:e.search,page:1},(function(){Ze(n.props.history,1,e.search)}))},n.handleEditCustomer=function(e){n.props.history.push({pathname:"/edit-customer/",state:{editData:e}})},n.handleAddCustomer=function(){n.props.history.push("/add-customer")},n.handleToggle=function(e){console.log("rowData",e);var t=new URLSearchParams;t.append("customer_id",e.id),t.append("active",!e.active),function(e,t){xt.post("organisation/user/activate-deactivate-customer",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(ai(t),gt.b.success(e.data.message||"Updated"))})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))}(t,Object(u.a)(n))};var s=e.location.search,i=new URLSearchParams(s),r=i.get("p"),o=i.get("search");return n.state={customersList:[],showFilter:!1,page:r?parseInt(r,10):1,totalPages:1,searchText:o,searchKey:"SEARCH_BY_TEXT"},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){ai(this),this.props.history.replace({search:"?p=".concat(this.state.page)})}},{key:"componentDidUpdate",value:function(e,t){var a=this,n=new URLSearchParams(e.location.search),s=parseInt(n.get("p"),10)||1,i=n.get("search"),r=new URLSearchParams(this.props.location.search),o=parseInt(r.get("p"),10)||1,c=r.get("search");s===o&&i===c||this.setState({page:o,searchText:c},(function(){ai(a)}))}},{key:"render",value:function(){var e=this,t=this.state.customersList;return Object(b.jsxs)(b.Fragment,{children:[this.state.showFilter&&Object(b.jsx)(hi,{show:this.state.showFilter,handleClose:this.handleFilter}),Object(b.jsx)(Yt,{backArrowBtn:!1,breadcrumb:!0,currentPage:"Customers",title:"Customers",isSearch:!0,placeholder:"Search Customer",onChangeMethod:this.onChangeMethod,clearSearch:this.clearSearch,searchValue:{search:this.state.searchText}}),Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:t,columnList:[{coumnWidth:250,labelName:"Customer Name",dataKey:"name",className:"red-hat-display-bold",isCell:!0,cell:function(t,a){if("name"===a)return Object(b.jsx)("span",{className:"cursor",onClick:function(){return e.props.history.push("/customer/".concat(t.id))},children:t.first_name})}},{coumnWidth:250,labelName:"Contact Number",dataKey:"mobile",className:"",isCell:!0,cell:function(e,t){if("mobile"===t)return e.mobile||"NA"}},{coumnWidth:250,labelName:"Email Id",dataKey:"email",className:"",isCell:!0,cell:function(e,t){if("email"===t)return e.email||"NA"}},{coumnWidth:350,labelName:"Status",dataKey:"active",className:"red-hat-display-bold",isCell:!0,cell:function(t,a){if("active"===a)return Object(b.jsx)(fa,{checked:t.active,handleClick:function(){return e.handleToggle(t)}})}},{coumnWidth:50,labelName:"",dataKey:"options",className:"options-column",isCell:!0,cell:function(e,t){if("options"===t){var a=[{title:"View Details",type:"",linkUrl:"/customer/".concat(e.id)}];return Object(b.jsx)(ra,{menuItem:a})}}}],history:this.props.history,location:this.props.location,totalPages:this.state.totalPages,currentPage:this.state.page-1})})]})}}]),a}(n.Component),ri=Object(o.b)((function(e){return{customersState:e.CustomersState}}),{})(ii),oi="RECEIVE_POSTS",ci={otpReceived:!1,otpCode:"",otpVerified:!1,countryCode:"+91",userObj:null,cnbcActive:!1},li=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ci,t=arguments.length>1?arguments[1]:void 0;return t.type===oi?Object(g.a)(Object(g.a)({},e),{},{json:t.json}):e},di=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onSubmit=function(){},n.handleClearFilter=function(){console.log("Hey"),n.setState({oem:"",dealer:"",status:""})},n.state={oem:"",dealer:"",status:""},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(b.jsx)(Bt,{show:this.props.show,onHide:this.props.handleClose,title:"Filters",children:Object(b.jsxs)(U,{onValidSubmit:this.onSubmit,children:[Object(b.jsxs)("div",{className:"modal-wrapper",children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"oem"),label:"OEM",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select OEM",options:[{value:1,label:"Ola"},{value:2,label:"Uber"},{value:3,label:"Delhi"}],multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.oem)}}}}),this.state.oem&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"dealer"),label:"Dealer",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Dealer",options:[{value:1,label:"A"},{value:2,label:"B"},{value:3,label:"C"}],multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.dealer)}}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"status"),label:"Status",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Status",options:[{value:1,label:"Active"},{value:2,label:"Inactive"},{value:3,label:"Processing"}],multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.status)}}}})]})]}),Object(b.jsxs)("div",{className:"submit-wrapper",children:[Object(b.jsx)(V.a,{className:"btn clear-btn ".concat(!this.state.oem&&"inactive-state"),onClick:this.state.oem&&this.handleClearFilter,children:"Clear All"}),Object(b.jsx)(re,{customClass:"btn black-btn",children:"Apply Filter"})]})]})})}}]),a}(M);di.propTypes={show:T.a.bool.isRequired,handleClose:T.a.func.isRequired};var hi=di,ui=a(319),mi=(a.p,function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onSubmit=function(){var e=new URLSearchParams;e.append("customer_id",n.props.creditUserId),e.append("reward_amount",n.state.credits),e.append("reward_message",n.state.creditsMessage),function(e,t){xt.post("/organisation/user/add-customer-reward",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(t(),gt.b.success(e.data.message||"Rewards added."))})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))}(e,n.props.handleClose)},n.state={credits:""},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(b.jsx)(Bt,{show:this.props.show,onHide:function(){return e.props.handleClose()},title:"Add Rewards",children:Object(b.jsxs)(U,{onValidSubmit:this.onSubmit,children:[Object(b.jsx)("div",{className:"modal-wrapper",children:Object(b.jsxs)(Zt.a,{md:12,children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"credits"),label:"Credits (in rupees)",required:!0,validations:[{validate:le.isRequired,message:"Credits cannot be empty"},{validate:le.isPositiveInt,message:"Credits cannot be negative"}],control:{type:je,settings:{placeholder:"Enter Credits"}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"creditsMessage"),label:"Message",required:!0,validations:[{validate:le.isRequired,message:"Credits cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Credits"}}})]})}),Object(b.jsx)("div",{className:"submit-wrapper",style:{justifyContent:"right"},children:Object(b.jsx)(re,{customClass:"btn black-btn ".concat(!this.state.credits&&"inactive-btn"),children:"Done"})})]})})}}]),a}(M)),pi=Object(o.b)((function(e){return Object(g.a)({},e)}),{})(mi),bi=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).handleEditCustomer=function(){},n.handleVehicleAllocation=function(){n.setState({showAllocationModal:!n.state.showAllocationModal})},n.handleAddCredits=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setState({showAddCreditsModal:!n.state.showAddCreditsModal,creditUserId:e})},n.state={showAllocationModal:!1,customerData:null,customerRewardList:""},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){ni(this.props.match.params.customerId,this),si(this.props.match.params.customerId,this)}},{key:"render",value:function(){var e=this,t=this.state,a=t.customerData,n=t.customerRewardList;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,moduleName:"Customer",title:a&&a.first_name}),Object(b.jsxs)("div",{className:"customer-details-wrapper",children:[this.state.showAddCreditsModal&&Object(b.jsx)(pi,{creditUserId:this.state.creditUserId,show:this.state.showAddCreditsModal,handleClose:this.handleAddCredits}),Object(b.jsx)(ui.a,{fluid:!0,children:Object(b.jsx)(ka.a,{children:Object(b.jsx)(Zt.a,{md:12,children:Object(b.jsxs)("div",{className:"content-left",children:[Object(b.jsx)("div",{className:"item",children:a&&Object(b.jsxs)(ka.a,{children:[Object(b.jsxs)(Zt.a,{md:12,children:[Object(b.jsx)("h3",{children:"Customer Contact Details"}),Object(b.jsx)("hr",{})]}),Object(b.jsxs)(Zt.a,{md:4,children:[Object(b.jsx)("h5",{children:"Contact Number"}),Object(b.jsx)("h6",{children:a.mobile||"NA"})]}),Object(b.jsxs)(Zt.a,{md:4,children:[Object(b.jsx)("h5",{children:"Email"}),Object(b.jsx)("h6",{children:a.email||"NA"})]}),Object(b.jsxs)(Zt.a,{md:4,children:[Object(b.jsx)("h5",{children:"Referral Code"}),Object(b.jsx)("h6",{children:a.referral_code||"NA"})]})]})}),Object(b.jsx)("hr",{}),Object(b.jsx)("div",{className:"view-detail-page",children:Object(b.jsxs)("div",{className:"basic-details ",children:[Object(b.jsxs)("div",{className:"map-vehicle-wrapper",children:[Object(b.jsx)("h2",{children:"Credits"}),Object(b.jsx)(V.a,{className:"btn black-btn",onClick:function(){return e.handleAddCredits(a.id)},children:"Add Credits"})]}),Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:n,columnList:[{coumnWidth:250,labelName:"Order Code",dataKey:"property",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("property"===t)return e.property.order_code||"NA"}},{coumnWidth:250,labelName:"Message",dataKey:"message",className:"",isCell:!0,cell:function(e,t){if("message"===t)return e.property.message||"NA"}},{coumnWidth:250,labelName:"Reward Amount",dataKey:"amount",className:"",isCell:!0,cell:function(e,t){if("amount"===t)return e.amount}}]})})]})})]})})})})]})]})}}]),a}(n.Component),ji={getCustomerDetailsApi:ni,getRewardsByCustomerApi:si},gi=Object(o.b)((function(e){return{customersState:e.CustomersState}}),ji)(bi),vi=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleSave=function(){r.a.findDOMNode(n.form).dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},n.onValidSubmit=function(){var e=new URLSearchParams,t=n.state,a=t.name,s=t.phone,i=t.state,r=t.city,o=t.orderId,c=t.vehicleId,l=t.orderDate,d=t.dealer,h=t.email,u=Object(ut.default)(l,"dd-MM-yyyy");e.append("customer_email",h),e.append("customer_name",a),e.append("city_id",r),e.append("state_id",i),e.append("contact_name",a),e.append("contact_number",s),e.append("order_id",o),e.append("order_date",u),e.append("dealer_account_id",d),e.append("vehicle_id",c),function(e,t){xt.post("/organisation/user/add-update-customer",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(t(),gt.b.success(e.data.message||"Something went wrong"))})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))}(e,(function(){n.props.history.push("/customers")}))};var s=xe(),i=e.location.state?e.location.state.editData:null;return n.state={editId:i?i.id:"",name:i?i.name:"",email:i?i.billing_email:"",phone:i?i.billing_contact:"",orderId:"",vehicleId:i?i.vehicle_inventory.id:"",orderDate:"",dealer:"",state:i?i.extra_information.state_id:"",city:i?i.extra_information.city_id:"",stateList:[],cityList:[],vehicleOptions:[],userAccountType:s},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllLocationApi(this,Le.STATE),this.state.editId&&this.props.getAllLocationApi(this,Le.CITY),this.state.userAccountType<Ie.DEALER&&function(e,t,a){var n=new URLSearchParams;n.append("start",0),n.append("limit",5e3),n.append("conditions",JSON.stringify([{key:"SEARCH_BY_TYPE",value:t,context:null}])),n.append("sorts",JSON.stringify([])),xt.post("/organisation/user/search-accounts",n).then((function(t){if(t.data.error)gt.b.error(t.data.message||"Something went wrong");else{var n=t.data.data.results.map((function(e){return{value:e.id,label:e.name}}));e.setState(Object(D.a)({},a,n))}})).catch((function(e){console.log("Catch",e)}))}(this,Ie.DEALER,"dealerOptions")}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:this.state.editId?"Edit Customer":"Add Customer",secondaryBtnText:"Cancel",isSecondaryBtn:function(){return e.props.history.goBack()},isPrimaryBtn:this.handleSave,primaryBtnText:"Save Customer"}),Object(b.jsx)("div",{className:"add-edit-customer-wrapper",children:Object(b.jsx)("div",{className:"content",children:Object(b.jsx)(U,{onValidSubmit:this.onValidSubmit,ref:function(t){return e.form=t},children:Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"name"),label:"Customer Name",required:!0,validations:[{validate:le.isRequired,message:"Name cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Name"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"email"),label:"Customer Email",required:!0,validations:[{validate:le.isRequired,message:"Email cannot be empty"},{validate:le.isEmail,message:"Please enter a valid email"}],control:{type:je,settings:{placeholder:"Enter Email"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"phone"),label:"Contact Number",required:!0,validations:[{validate:le.isRequired,message:"Number cannot be empty"},{validate:le.isPhone,message:"Please enter a valid number"}],control:{type:je,settings:{placeholder:"Enter Number"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"state"),label:"State",required:!0,validations:[{validate:le.isRequired,message:"State cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select State",options:this.state.stateList,onChangeCallback:function(){e.setState({city:"",stateId:e.state.state},(function(){e.props.getAllLocationApi(e,Le.CITY)}))}}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"city"),label:"City",required:!0,validations:[{validate:le.isRequired,message:"City cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select City",options:this.state.cityList,noOptionCustom:function(){return"Please select a state first"},onChangeCallback:function(t){t(e.state.city)}}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"orderId"),label:"Order Reference ID",required:!0,validations:[{validate:le.isRequired,message:"Order ID cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Order Reference ID"}}})}),this.state.userAccountType<Ie.DEALER&&Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"dealer"),label:"Dealer",required:!0,validations:[{validate:le.isRequired,message:"Dealer cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Dealer",options:this.state.dealerOptions,onChangeCallback:function(t){t(e.state.dealer),function(e){var t=new URLSearchParams;t.append("start",0),t.append("limit",-1),t.append("conditions",JSON.stringify([{key:"SEARCH_BY_ACCOUNT_ID",value:e.state.dealer}])),t.append("sorts",JSON.stringify([])),xt.post("/offering/vehicle/search-vehicle",t).then((function(t){if(t.data.error)gt.b.error(t.data.message||"Something went wrong");else{var a=t.data.data.data.results.map((function(e){return{value:e.id,label:e.chassisNo}}));e.setState({vehicleOptions:a})}})).catch((function(e){console.log("Catch",e)}))}(e)}}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"vehicleId"),label:"Vehicle Chassis No.",required:!0,validations:[{validate:le.isRequired,message:"Chassis number cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Vehicle by Chassis No",options:this.state.vehicleOptions,onChangeCallback:function(t){t(e.state.vehicleId)}}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"orderDate"),label:"Order Date",required:!0,validations:[{validate:le.isRequired,message:"Order date cannot be empty"}],control:{type:pt,settings:{placeholder:"Select Order Date"}}})})]})})})})]})}}]),a}(M),fi={getAllLocationApi:Nt},Oi=Object(o.b)((function(e){return{customersState:e.CustomersState}}),fi)(vi),yi=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onSubmit=function(){var e=new URLSearchParams;e.append("email",n.state.email),function(e,t){Ot.post("organisation/user/forgot-password",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(gt.b.success(e.data.message||"Please check your email"),t())})).catch((function(e){console.log("Catch",e)}))}(e,n.props.handleClose)},n.state={errorMessage:"",email:"",inProgress:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(b.jsx)(Bt,{show:this.props.show,onHide:this.props.handleClose,title:"Forgot Password",modalClass:"change-password",children:Object(b.jsxs)(U,{onValidSubmit:this.onSubmit,children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"email"),label:"Email",required:!0,validations:[{validate:le.isRequired,message:"Please enter email address"},{validate:le.isEmail,message:"Please enter correct email"}],control:{type:je,settings:{placeholder:"Enter Registered Email"}},classes:{inputField:"custom-input",label:"custom-label"}}),this.state.errorMessage&&Object(b.jsx)("p",{className:"error",children:this.state.errorMessage}),Object(b.jsx)("div",{className:"submit-wrapper",children:Object(b.jsx)(re,{customClass:"btn black-btn",children:"Submit"})})]})})}}]),a}(M);yi.propTypes={show:T.a.bool.isRequired,handleClose:T.a.func.isRequired};var xi=yi,Ni=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onValidSubmit=function(){var e=new URLSearchParams;e.append("email",n.state.email),e.append("password",n.state.password),function(e,t){Ot.post("/organisation/user/login",t).then((function(t){t.data.error?(gt.b.error(t.data.message||"Something went wrong"),e.setState({errorMessage:t.data.message||"Invalid Credentials"})):(console.log("res",t),localStorage.setItem("userDetails",JSON.stringify(t.data.data.user_details)),e.props.history.push("/profile"))})).catch((function(t){e.setState({errorMessage:"Something went wrong"})}))}(Object(u.a)(n),e)},n.openCloseForgotPasswordModal=function(){n.setState({forgotPassword:!n.state.forgotPassword})},n.state={email:"",password:"",forgotPassword:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){localStorage.removeItem("oemToken"),localStorage.removeItem("userDetails")}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"login-wrapper",children:[this.state.forgotPassword&&Object(b.jsx)(xi,{show:this.state.forgotPassword,handleClose:this.openCloseForgotPasswordModal}),Object(b.jsxs)("div",{className:"login-content",children:[Object(b.jsx)("h1",{className:"red-hat-display-bold f-s-24",children:"Login"}),Object(b.jsxs)(U,{onValidSubmit:this.onValidSubmit,children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"email"),label:"Email Address",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"},{validate:le.isEmail,message:"Email is invalid"}],control:{type:je,settings:{placeholder:"Enter Email Address"}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"password"),label:"Password",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Password",type:"password"}}}),Object(b.jsx)("div",{className:"forgot-wrapper",children:Object(b.jsx)("p",{className:"red-hat-display-medium",style:{cursor:"pointer"},onClick:this.openCloseForgotPasswordModal,children:"Forgot Password?"})}),Object(b.jsx)("div",{className:"submit-wrapper",children:Object(b.jsx)(re,{customClass:"btn black-btn",children:"Login"})})]})]})]})}}]),a}(M),Si=Object(o.b)((function(e){return{loginState:e.LoginState}}),{})(Ni),Ci="RECEIVE_POSTS",ki={otpReceived:!1,otpCode:"",otpVerified:!1,countryCode:"+91",userObj:null,cnbcActive:!1},Ai=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ki,t=arguments.length>1?arguments[1]:void 0;return t.type===Ci?Object(g.a)(Object(g.a)({},e),{},{json:t.json}):e},_i=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).handleSubmit=function(){console.log("hey")},n.openCloseChangePassword=function(){n.setState({changePasswordModal:!n.state.changePasswordModal})},n.state={lastName:"",changePasswordModal:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(b.jsxs)(b.Fragment,{children:[this.state.changePasswordModal&&Object(b.jsx)(kt,{show:this.state.changePasswordModal,handleClose:this.openCloseChangePassword}),Object(b.jsx)("h1",{children:"Hello"})]})}}]),a}(n.Component),Ei=(Object(o.b)((function(e){return{homeState:e.HomeState}}),{})(_i),"RECEIVE_POSTS"),wi={otpReceived:!1,otpCode:"",otpVerified:!1,countryCode:"+91",userObj:null,cnbcActive:!1},Ii=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wi,t=arguments.length>1?arguments[1]:void 0;return t.type===Ei?Object(g.a)(Object(g.a)({},e),{},{json:t.json}):e},Li=Object(c.b)({SettlementState:va,FranchiseState:Ca,BookingManagementState:sn,CouponsState:hn,LocationMasterState:bn,BatteryModelState:Pn,IotModelState:qn,UserManagementState:zn,BatteryState:Ns,BikeModelState:Ps,IotState:qs,VehiclesState:$s,CustomersState:li,LoginState:Ai,CommonState:O,HomeState:Ii});a(275);var Di=a(55),Pi=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).setValue=function(e){n.setState({value:e}),r.a.findDOMNode(n.form).dispatchEvent(new Event("submit"))},n.onValidSubmit=function(e,t){console.log("Value submitted"+n.state.value),console.log("Form Submitted"+n.state.name)},n.handlePageSize=function(e){console.log("Heyyy pageSize",e)};var s=e.location.search,i=new URLSearchParams(s).get("p");return n.state={value:"",validated:!1,name:"",address:"",lastName:"",gender:"",searchableSingleRegion:"",searchableMultipleRegion:"",regionOptions:[{value:1,label:"Goa"},{value:2,label:"Maha"},{value:3,label:"Delhi"},{value:4,label:"Goa highway"}],attachment:{name:"filename.jpg",url:"https://image.shutterstock.com/image-photo/mountains-during-sunset-beautiful-natural-260nw-407021107.jpg"},attachments:[],checkboxList:[{key:!0,label:"On Premise Venue"},{key:!1,label:"Retail Venue"}],dummyData:[{firstName:"Nirav",lastName:"Panchal"},{firstName:"Mahesh",lastName:"Kadam"},{firstName:"Dharmik",lastName:"Joshi"},{firstName:"Uday",lastName:"Naidu"}],currentPage:1,page:i?parseInt(i,10):1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.history.replace({search:"?p=".concat(this.state.page)})}},{key:"componentDidUpdate",value:function(e,t){var a=new URLSearchParams(e.location.search),n=parseInt(a.get("p"),10)||1,s=new URLSearchParams(this.props.location.search),i=parseInt(s.get("p"),10)||1;n!==i&&this.setState({page:i})}},{key:"render",value:function(){var e=this,t=Object(Di.a)(this.state.regionOptions),a=this.state.dummyData;return Object(b.jsxs)(n.Fragment,{children:[Object(b.jsx)(U,{onValidSubmit:this.onValidSubmit,ref:function(t){return e.form=t},children:Object(b.jsx)(ui.a,{children:Object(b.jsxs)(ka.a,{className:"show-grid",children:[Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"name"),label:"First Name",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:je,settings:{placeholder:"Enter First Name",prefix:"Mr/Ms",suffix:"is here!"}}})}),Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"address"),label:"Address",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:je,settings:{placeholder:"Please enter address",as:"textarea",rows:5}},classes:{inputField:"custom-input",label:"custom-label"}})}),Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"lastName"),label:"Last Name",required:!0,helpText:"This is helptext",validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Last Name"}}})}),Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"rating"),label:"Rating",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:he,settings:{minValue:0,maxValue:100,rangeId:"ratingRange",rangeName:"ratingRange"}}})}),Object(b.jsx)(Zt.a,{sm:6,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"searchableSingleRegion"),label:"Market",required:!0,helpText:"",hint:{title:"Title Custom",description:Object(b.jsx)("span",{children:" Custom Hint Bro! "})},validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:Oe,settings:{options:t,multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.searchableSingleRegion),console.log("Hello world!")}}}})}),Object(b.jsx)(Zt.a,{sm:6,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"searchableMultipleRegion"),label:"Multiple Market",required:!0,helpText:"",hint:{title:"Title Custom",description:Object(b.jsx)("span",{children:" Custom Hint Bro! "})},validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:Oe,settings:{options:t,multiple:!0,searchable:!0,closeMenuOnSelect:!1,onChangeCallback:function(t){t(e.state.searchableMultipleRegion),console.log("Hello world!")}}}})}),Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"gender"),label:"Gender Type",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:J,settings:{radioId:"gender",radioName:"gender",options:[{key:"1",label:"On Premise Venue"},{key:"2",label:"Retail Venue"}],isInline:!0}}})}),Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"checkboxList"),label:"Hobby",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:W,settings:{radioId:"hobby",radioName:"hobby",options:this.state.checkboxList}}})}),Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"attachment"),label:"Upload Image",required:!0,validations:[{validate:le.isRequired,message:"File is required"}],control:{type:lt,settings:{moduleName:"account",subModule:"project",fileType:"IMAGE",extensions:["image/*"],maxFiles:1,maxFileSize:1e8,onSelect:function(e,t){t({id:e.lastModified,name:e.name,size:e.size,mimeType:e.type,path:"single.jpg"},"http://35.154.155.206/api")}}}})}),Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"attachments"),label:"Upload Image Multiple",required:!0,validations:[{validate:le.isRequired,message:"File is required"}],control:{type:lt,settings:{moduleName:"account",subModule:"project",fileType:"IMAGE",extensions:[".png,.jpg"],maxFiles:2,maxFileSize:1e8,onSelect:function(t,a){a({id:t.lastModified,name:t.name,size:t.size,mimeType:t.type,path:"multi"+(e.state.attachments.length+1)+".jpg"},"http://35.154.155.206/api")}}}})}),Object(b.jsxs)(Zt.a,{md:12,children:[Object(b.jsx)(Y,{type:"submit",handleClick:function(){e.setValue("now")},variant:"success",buttonText:"Now"}),Object(b.jsx)(Y,{handleClick:function(){e.setValue("later")},buttonText:"Later"})]})]})})}),Object(b.jsx)(ui.a,{children:Object(b.jsx)(ka.a,{children:Object(b.jsx)(Zt.a,{md:12,children:Object(b.jsx)(Xt,{tableData:a,columnList:[{coumnWidth:250,labelName:"First Name",dataKey:"firstName",className:"first-name",isCell:!0,cell:function(e,t){if("firstName"===t)return e.firstName}},{coumnWidth:250,labelName:"Last Name",dataKey:"lastName",className:"",isCell:!0,cell:function(e,t){if("lastName"===t)return e.lastName}}],message:"No data found",history:this.props.history,location:this.props.location,totalPages:2,currentPage:this.state.page,pageSize:!0,pageSizeOptions:[{value:10,label:"10"},{value:20,label:"20"},{value:30,label:"30"},{value:40,label:"40"}],handlePageSize:this.handlePageSize})})})})]})}}]),a}(M);Pi.propTypes={classes:T.a.object};var Ti=Pi,Ri=["component"],Mi=function(){return ye()},Bi=function(e){var t=e.component,a=Object(z.a)(e,Ri);return Object(b.jsx)(Gn.b,Object(g.a)(Object(g.a)({},a),{},{render:function(e){return Mi()?Object(b.jsxs)("div",{className:"main-section",children:[Object(b.jsx)(It,Object(g.a)({},e)),Object(b.jsxs)("div",{className:"main-section-right",children:[Object(b.jsx)(Rt,{}),Object(b.jsx)("div",{className:"main-content-wrapper",children:Object(b.jsx)(t,Object(g.a)({},e),e.location.pathname)})]})]}):Object(b.jsx)(Gn.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Fi=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).onSubmit=function(){if(n.state.newPassword===n.state.confirmPassword){var e=new URLSearchParams;e.append("password",n.state.newPassword),e.append("token",n.state.token),function(e,t){Ot.post("organisation/user/set-reset-password",t).then((function(t){gt.b.success(t.data.message||"Password set successfully"),e.props.history.push("/login")})).catch((function(e){console.log("Catch",e)}))}(Object(u.a)(n),e)}else gt.b.error("New password and Confirm password don't match")};var s=e.location.search,i=new URLSearchParams(s).get("token");return n.state={errorMessage:"",inProgress:!1,token:i||"",newPassword:"",confirmPassword:""},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return console.log("props",this.props),Object(b.jsx)("div",{className:"login-wrapper",children:Object(b.jsxs)("div",{className:"login-content",children:[Object(b.jsx)("h1",{className:"red-hat-display-bold f-s-24",children:"Set Password"}),Object(b.jsxs)(U,{onValidSubmit:this.onSubmit,children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"newPassword"),label:"Password",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Password",type:"password"}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"confirmPassword"),label:"Confirm Password",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Password",type:"password"}}}),Object(b.jsx)("div",{className:"submit-wrapper",children:Object(b.jsx)(re,{customClass:"btn black-btn",children:"Reset Password"})})]})]})})}}]),a}(M);Fi.propTypes={};var Ui=Fi,Vi=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleFromDate=function(){n.setState({toDate:""})},n.handleSave=function(){r.a.findDOMNode(n.form).dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},n.onValidSubmit=function(){var e=new URLSearchParams;console.log(n.state.fromDate),e.append("coupon_code",n.state.title),e.append("type",n.state.type),e.append("value",n.state.value),e.append("max_discount",n.state.maxDiscountLimit),e.append("max_coupon_usage_count",n.state.maxNumberOfUsages),e.append("same_user_coupon_usage",n.state.maxUsagePerCustomer),e.append("valid_from",Object(ut.default)(n.state.fromDate,"dd-MM-yyyy")),e.append("valid_till",Object(ut.default)(n.state.toDate,"dd-MM-yyyy")),e.append("only_new_users",n.state.newUserOnly),e.append("applicable_on_level",n.state.applicableLevel),e.append("location_ids",JSON.stringify(n.state.applicableLocation)),e.append("franchise_share",n.state.franchiseShare),e.append("is_franchise_specific",10===n.state.applicableFranchise),n.state.applicableFranchise&&e.append("franchise_ids",JSON.stringify(n.state.franchiseId)),n.state.couponId&&e.append("coupon_id",n.state.couponId),n.props.addEditCouponsApi(e,(function(){return n.props.history.goBack()}))};xe();var s=e.location.state?e.location.state.data:null;return n.state={couponId:s?s.id:"",title:s?s.coupon_code:"",type:s?s.type:"",value:s?s.value:"",maxDiscountLimit:s?s.max_discount:"",maxNumberOfUsages:s?s.max_coupon_usage_count:"",maxUsagePerCustomer:s?s.same_user_coupon_usage:"",fromDate:s?new Date(s.valid_from):"",toDate:s?new Date(s.valid_till):"",newUserOnly:s?s.only_new_users?10:20:"",applicableLevel:s?s.applicable_on_level:"",applicableLocation:s?s.location_ids:"",applicableFranchise:s?s.is_franchise_specific?10:20:"",franchiseId:s?s.franchise_ids:"",franchiseShare:s?s.franchise_share:""},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllFranchiseApi(this,-1),this.state.applicableLevel&&this.props.getAllLocationApi(this,this.state.applicableLevel)}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:this.state.couponId?"Edit Coupon":"Add Coupon",secondaryBtnText:"Cancel",isSecondaryBtn:function(){return e.props.history.goBack()},isPrimaryBtn:this.handleSave,primaryBtnText:"Save Coupon"}),Object(b.jsx)("div",{className:"add-edit-customer-wrapper",children:Object(b.jsx)("div",{className:"content",children:Object(b.jsxs)(U,{onValidSubmit:this.onValidSubmit,ref:function(t){return e.form=t},children:[Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"title"),label:"Coupon Title / Code",required:!0,validations:[{validate:le.isRequired,message:"Title cannot be empty"}],control:{type:je,settings:{placeholder:"Enter title"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"type"),label:"Coupon Type",required:!0,validations:[{validate:le.isRequired,message:"Coupon type cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Coupon Type",options:Me}}})}),this.state.type==Re.PERCENTAGE?Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"value"),label:"Coupon Value (in percentage)",required:!0,validations:[{validate:le.isRequired,message:"Value cannot be empty"},{validate:le.isPositiveInt,message:"Value cannot be negative"},{validate:le.isWithinInt(0,100),message:"Max limit cannot be greater than 100"}],control:{type:je,settings:{placeholder:"Enter Value"}}})}):Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"value"),label:"Coupon Value (Rs.)",required:!0,validations:[{validate:le.isRequired,message:"Value cannot be empty"},{validate:le.isPositiveInt,message:"Value cannot be negative"}],control:{type:je,settings:{placeholder:"Enter Value"}}})})]}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"fromDate",this.handleFromDate),label:"Valid From",required:!0,validations:[{validate:le.isRequired,message:"From date cannot be empty"}],control:{type:pt,settings:{placeholder:"Select Valid from Date",minDate:new Date}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"toDate"),label:"Valid To",required:!0,validations:[{validate:le.isRequired,message:"To date cannot be empty"}],control:{type:pt,settings:{placeholder:"Select Valid to Date",minDate:this.state.fromDate||new Date}}})}),this.state.type==Re.PERCENTAGE&&Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"maxDiscountLimit"),label:"Max Discount Limit",required:!0,validations:[{validate:le.isRequired,message:"Max limit cannot be empty"},{validate:le.isPositiveInt,message:"Max limit cannot be negative"}],control:{type:je,settings:{placeholder:"Enter Max Discount Limit"}}})})]}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"newUserOnly"),label:"New Users Only",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Field",options:[{label:"Yes",value:10},{label:"No",value:20}]}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"maxNumberOfUsages"),label:"Max Number of Usages",required:!0,validations:[{validate:le.isRequired,message:"Max usage cannot be empty"},{validate:le.isPositiveInt,message:"Max limit cannot be negative"}],control:{type:je,settings:{placeholder:"Enter Max Number of Usages"}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"maxUsagePerCustomer"),label:"Max Usage per Customer",required:!0,validations:[{validate:le.isRequired,message:"Max usage cannot be empty"},{validate:le.isPositiveInt,message:"Max limit cannot be negative"}],control:{type:je,settings:{placeholder:"Enter Max usage per Customer"}}})})]}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"applicableLevel"),label:"Applicable Level",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select a Applicable Level",options:[{label:"Country",value:10},{label:"City",value:30}],onChangeCallback:function(t){e.setState({applicableLocation:"",applicableLevel:e.state.applicableLevel},(function(){e.props.getAllLocationApi(e,e.state.applicableLevel)}))}}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"applicableLocation"),label:"Applicable Location",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select a Applicable Location",options:this.state.applicableLevel===Le.COUNTRY?this.state.countryList:this.state.cityList,multiple:!0}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"franchiseShare"),label:"Franchise Settlement Distribution (in percentage)",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"},{validate:le.isPositiveInt,message:"Franchise share cannot be negative"},{validate:le.isWithinInt(0,100),message:"Max limit cannot be greater than 100"}],control:{type:je,settings:{placeholder:"Enter a Number",onChangeCallback:function(){}}}})})]}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"applicableFranchise"),label:"Applicable Franchise",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select a Franchise",options:[{label:"Yes",value:10},{label:"No",value:20}]}}})}),10===this.state.applicableFranchise&&Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"franchiseId"),label:"Franchise",required:!0,validations:[{validate:le.isRequired,message:"Field cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select a Franchise",options:this.state.franchiseOptionsList,multiple:!0}}})})]})]})})})]})}}]),a}(M),qi={getAllLocationApi:Nt,getAllFranchiseApi:ca,addEditCouponsApi:function(e,t){return xt.post("/commerce/coupon/add-update-coupon",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(t(),gt.b.success(e.data.message||"Something went wrong"))})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))}},Yi=Object(o.b)((function(e){return{customersState:e.CustomersState}}),qi)(Vi),Ki=a(108),Wi=a.n(Ki),Hi=a(97),Ji=a(96),zi=a(57),Gi=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onSubmit=function(){var e=new URLSearchParams;e.append("mobile",n.state.phone),n.state.showVerifyOtp?(e.append("otp_code",n.state.otp),function(e,t){Ot.post("/organisation/user/verify-otp",t).then((function(t){t.data.error?(gt.b.error(t.data.message||"Something went wrong"),e.setState({errorMessage:t.data.message||"Invalid Credentials"})):(console.log("res",t),e.props.handleAddCustomer(t.data.data))})).catch((function(t){e.setState({errorMessage:"Something went wrong"})}))}(Object(u.a)(n),e)):function(e,t){Ot.post("/organisation/user/send-otp",t).then((function(t){t.data.error?(gt.b.error(t.data.message||"Something went wrong"),e.setState({errorMessage:t.data.message||"Invalid Credentials"})):(console.log("res",t),e.setState({showVerifyOtp:!0}))})).catch((function(t){e.setState({errorMessage:"Something went wrong"})}))}(Object(u.a)(n),e)},n.state={showVerifyOtp:!1,phone:"",otp:""},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(b.jsx)(Bt,{show:this.props.show,onHide:this.props.handleClose,title:this.state.showVerifyOtp?"Verification Code":"Add New Customer",modalClass:"change-password",children:Object(b.jsxs)(U,{onValidSubmit:this.onSubmit,children:[this.state.showVerifyOtp?Object(b.jsx)(te,{valueLink:this.linkState(this,"otp"),label:"OTP",required:!0,validations:[{validate:le.isRequired,message:"Number cannot be empty"}],control:{type:je,settings:{placeholder:"Enter OTP"}}}):Object(b.jsx)(te,{valueLink:this.linkState(this,"phone"),label:"Contact Number",required:!0,validations:[{validate:le.isRequired,message:"Number cannot be empty"},{validate:le.isPhone,message:"Please enter a valid number"}],control:{type:je,settings:{placeholder:"Enter Number"}}}),Object(b.jsx)("div",{className:"submit-wrapper",children:Object(b.jsx)(re,{customClass:"btn black-btn",children:this.state.showVerifyOtp?"Verify & Add Customer":"Next"})})]})})}}]),a}(M);Gi.propTypes={show:T.a.bool.isRequired,handleClose:T.a.func.isRequired};var Qi=Gi,Xi=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleSelectCustomer=function(){console.log("Heyyy",n.state.phoneNumberOptions);var e=n.state.phoneNumberOptions.filter((function(e){return e.id===n.state.phoneNumber}));n.setState({selectedCustomer:e})},n.handleAddCustomer=function(e){console.log("data",e),ai(Object(u.a)(n),!0,e)},n.callCouponApi=function(){var e=new URLSearchParams;e.append("franchise_location_id",n.state.pickupLocation),function(e,t){xt.post("/commerce/coupon/get-applicable-coupons",e).then((function(e){if(e.data.error)gt.b.error(e.data.message||"Something went wrong");else{var a=e.data.data.results.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{label:e.coupon_code,couponValue:e.value,value:e.id})}));t.setState({couponList:a})}})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))}(e,Object(u.a)(n)),n.handleSelectBike()},n.setStartDate=function(e){n.setState({startDate:e,endDate:""})},n.setEndDate=function(e){n.setState({endDate:e},(function(){n.handleSelectBike()}))},n.handleSelectBike=function(){var e=new URLSearchParams;e.append("start",-1),e.append("limit",-1),e.append("franchise_location_id",n.state.pickupLocation),e.append("from_datetime",Xe()(n.state.startDate).format("DD-MM-YYYY hh:mm")),e.append("to_datetime",Xe()(n.state.endDate).format("DD-MM-YYYY hh:mm")),function(e,t){xt.post("offering/vehicle/get-available-vehicles",e).then((function(e){if(e.data.error)gt.b.error(e.data.message||"Something went wrong");else{var a=e.data.data.results.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{label:e.model_info.model_name+" - "+e.registration_no,value:e.id})}));t.setState({bikeList:a})}})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))}(e,Object(u.a)(n))},n.handleSave=function(){r.a.findDOMNode(n.form).dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},n.onValidSubmit=function(){var e=n.state,t=e.startDate,a=e.endDate,s=e.pickupLocation,i=e.selectedCustomer,r=e.bike,o=e.bikeList,c=e.coupon,l=e.couponList,d=e.paymentMode,h=o.filter((function(e){return e.id===r})),m=l.filter((function(e){return e.id===c})),p=new URLSearchParams;p.append("vehicle_inventory_id",r),p.append("franchise_location_id",s),p.append("start_datetime",Xe()(t).format("DD-MM-YYYY hh:mm")),p.append("end_datetime",Xe()(a).format("DD-MM-YYYY hh:mm")),p.append("pricing_id",h[0].price_data.id),p.append("customer_id",i[0].id),p.append("payment_mode",d),c&&p.append("coupon_id",m[0].id),function(e,t){xt.post("commerce/order/create-order",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):t.props.history.push("/booking-management")})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))}(p,Object(u.a)(n))};var s=e.location.state?e.location.state.editData:null;return n.state={editId:s?s.id:"",isCashCollected:"false",pickupLocation:"",franchiseLocationOption:[],phoneNumberOptions:[],showAddCustomer:!1,couponList:[],bike:"",bikeList:[],startDate:new Date,endDate:new Date(Date.now()+864e5)},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllFranchiseLocationApi(this,0,!0),ai(this,!0)}},{key:"render",value:function(){var e=this,t=this.state,a=t.franchiseLocationOption,n=t.phoneNumberOptions,s=t.startDate,i=t.endDate,r=t.couponList,o=t.bikeList;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:this.state.editId?"Edit Booking":"Add Booking",secondaryBtnText:"Cancel",isSecondaryBtn:function(){return e.props.history.goBack()},isPrimaryBtn:this.handleSave,primaryBtnText:"Save Booking"}),this.state.showAddCustomer&&Object(b.jsx)(Qi,{show:this.state.showAddCustomer,handleClose:function(){return e.setState({showAddCustomer:!1})},handleAddCustomer:function(t){return e.handleAddCustomer(t)}}),Object(b.jsx)("div",{className:"add-edit-customer-wrapper",children:Object(b.jsx)("div",{className:"content",children:Object(b.jsxs)(U,{onValidSubmit:this.onValidSubmit,ref:function(t){return e.form=t},children:[Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"pickupLocation"),label:"Pickup Location",required:!0,validations:[{validate:le.isRequired,message:"Pickup location cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Pickup Location",options:a,onChangeCallback:function(t){t(e.state.pickupLocation),e.callCouponApi()}}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"phoneNumber"),label:"Customer Phone Number",required:!0,validations:[{validate:le.isRequired,message:"Phone number cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Phone Number",options:n,noOptionAction:function(){e.setState({showAddCustomer:!0})},onChangeCallback:function(t){t(e.state.phoneNumber),e.handleSelectCustomer()}}}})})]}),this.state.selectedCustomer&&this.state.pickupLocation&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("hr",{}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)(ka.a,{children:Object(b.jsxs)(Zt.a,{md:4,children:[Object(b.jsx)("label",{className:"form-label",children:"Customer Name"}),Object(b.jsx)("h4",{className:"red-hat-display-bold f-s-16",children:this.state.selectedCustomer[0].first_name||"NA"})]})}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsxs)("div",{className:"form-wrapper",children:[Object(b.jsxs)("label",{className:"form-label",children:["Pickup Date/Time",Object(b.jsx)("span",{children:"*"})]}),Object(b.jsx)(G.a,{controlId:"scheduleDate",className:"date-group",children:Object(b.jsx)(Wi.a,{minTime:s.getDay()===(new Date).getDay()&&s.getDay()&&Object(Hi.default)(Object(Ji.default)(new Date,s.getMinutes()),s.getHours()),maxTime:s.getDay()===(new Date).getDay()&&s.getDay()&&Object(Hi.default)(Object(Ji.default)(new Date,45),23),minDate:new Date,selected:s,onChange:function(t){return e.setStartDate(t)},showTimeSelect:!0,timeFormat:"HH:mm aa",timeIntervals:15,timeCaption:"Time",dateFormat:"MMMM d, yyyy h:mm aa",className:"form-control"})})]})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsxs)("div",{className:"form-wrapper",children:[Object(b.jsxs)("label",{className:"form-label",children:["Return Date/Time",Object(b.jsx)("span",{children:"*"})]}),Object(b.jsx)(G.a,{controlId:"scheduleDate",className:"date-group",children:Object(b.jsx)(Wi.a,{minTime:s.getDay()===i&&i.getDay()&&Object(Hi.default)(Object(Ji.default)(new Date,0),s.getHours()+1),maxTime:s.getDay()===i&&i.getDay()&&Object(Hi.default)(Object(Ji.default)(new Date,30),23),minDate:Object(zi.default)(s,1),selected:i,onChange:function(t){return e.setEndDate(t)},showTimeSelect:!0,timeFormat:"HH:mm aa",timeIntervals:15,timeCaption:"Time",dateFormat:"MMMM d, yyyy h:mm aa",className:"form-control"})})]})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"bike"),label:"Select Bike",required:!0,validations:[{validate:le.isRequired,message:"Bike cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Bike",options:o,onChangeCallback:function(t){t(e.state.bike)}}}})})]}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"coupon"),label:"Select Coupon",control:{type:Oe,settings:{placeholder:"Select Coupon",options:r}}})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"paymentMode"),label:"Payment Mode",required:!0,validations:[{validate:le.isRequired,message:"Payment Mode cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Payment Mode",options:[{label:"Payment Link",value:"20"},{label:"Offline",value:"30"}],multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.paymentMode)}}}})})]})]})]})})})]})}}]),a}(M),Zi={getAllFranchiseLocationApi:da},$i=Object(o.b)((function(e){return{customersState:e.CustomersState}}),Zi)(Xi),er=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).onNextClick=function(){r.a.findDOMNode(n.form).dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},n.onSubmit=function(){var e=new URLSearchParams;e.append("model_id",n.state.modelId),e.append("pricing_type",n.state.pricingType),e.append("minimum_time_booking",n.state.minBookingTime),e.append("price",n.state.price),e.append("rental_time",n.state.rentalTime),"false"===n.state.isDefault&&(e.append("pricing_level",n.state.pricingLevel),e.append("location_ids",JSON.stringify(n.state.selectedLocations))),e.append("is_default",n.state.isDefault),e.append("per_km_price",n.state.pricePerKm),e.append("penalty_price_per_hour",n.state.penaltyPrice),e.append("allowed_kms",n.state.allowedKms),e.append("deposit",n.state.deposit),n.state.id&&e.append("model_pricing_id",n.state.id);var t=new URLSearchParams;t.append("model_id",n.state.modelId),t.append("conditions",JSON.stringify(n.state.conditions)),n.props.addUpdateVehiclePricingApi(e,Object(u.a)(n),t)};var s=e.location.state,i=s?s.data:null;return n.state={modelId:s?s.state.modelId:"",id:i?i.id:"",minBookingTime:i?i.minimum_time_booking:"",price:i?i.price:"",pricingLevel:i?i.pricing_level:parseInt(s.state.selectedTab)===qe.CITY?qe.CITY:parseInt(s.state.selectedTab)===qe.AREA?qe.AREA:null,pricingType:Ue.HOURLY,pricePerKm:i?i.per_km_price:"",penaltyPrice:i?i.penalty_price_per_hour:"",rentalTime:i?i.rental_time:"",allowedKms:i?i.allowed_kms:"",deposit:i?i.deposit:"",cityList:[],areaList:[],selectedLocations:i?i.location_ids:[],isDefault:s&&"default"===s.state.selectedTab?"true":"false",vehicleData:"",stateId:"",selectedTab:s?parseInt(s.state.selectedTab):""},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.state.id&&this.props.getAllLocationApi(this,parseInt(this.state.pricingLevel)),[30,40].includes(this.state.selectedTab)&&this.props.getAllLocationApi(this,parseInt(this.state.pricingLevel))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:this.state.id?"Edit Vehicle Pricing":"Add Vehicle Pricing",secondaryBtnText:"Cancel",isSecondaryBtn:function(){return e.props.history.goBack()},isPrimaryBtn:this.onNextClick,primaryBtnText:"Save"}),Object(b.jsx)("div",{className:"add-edit-customer-wrapper",children:Object(b.jsx)("div",{className:"content",children:Object(b.jsxs)(U,{onValidSubmit:this.onSubmit,ref:function(t){return e.form=t},children:[Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{sm:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"pricingType"),label:"Select Pricing Type",required:!0,disabled:!0,validations:[{validate:le.isRequired,message:"Pricing type cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Pricing Type",options:Ve,multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.pricingType),console.log("Hello world!")}}}})}),Object(b.jsx)(Zt.a,{sm:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"rentalTime"),label:"Rental Time (hr/hrs)",required:!0,validations:[{validate:le.isRequired,message:"Rental time cannot be empty"}],control:{type:je,settings:{placeholder:"Enter Rental Time"}}})}),Object(b.jsx)(Zt.a,{sm:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"minBookingTime"),label:"Minimum Booking Time ( ".concat(Ue.getFormatedText(this.state.pricingType)," )"),required:!0,validations:[{validate:le.isRequired,message:"Minimum booking time cannot be empty"},{validate:le.isPositiveInt,message:"Please enter numeric value"}],control:{type:je,settings:{placeholder:"Enter Minimum Booking Time"}}})})]}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{sm:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"price"),label:"Price (\u20b9)",required:!0,validations:[{validate:le.isRequired,message:"Price cannot be empty"},{validate:le.isPositiveInt,message:"Please enter numeric value"}],control:{type:je,settings:{placeholder:"Enter Price"}}})}),"false"===this.state.isDefault&&Object(b.jsx)(Zt.a,{sm:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"pricingLevel"),label:"Select Pricing Level",required:!0,disabled:!![30,40].includes(this.state.selectedTab),validations:[{validate:le.isRequired,message:"Pricing level cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Pricing Level",options:Ye,multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.pricingLevel),console.log("Hello world!"),e.setState({selectedLocations:[],areaList:[],cityList:[]},(function(){e.props.getAllLocationApi(e,parseInt(e.state.pricingLevel))}))}}}})}),"false"===this.state.isDefault&&Object(b.jsx)(Zt.a,{sm:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"selectedLocations"),label:"Select Locations",required:!0,validations:[{validate:le.isRequired,message:"Locations cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Locations",options:parseInt(this.state.pricingLevel)===Le.CITY?this.state.cityList:this.state.areaList,multiple:!0,searchable:!0,onChangeCallback:function(t){t(e.state.selectedLocations),console.log("Hello world!")}}}})}),Object(b.jsx)(Zt.a,{sm:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"pricePerKm"),label:"Price Per Km (\u20b9)",required:!0,validations:[{validate:le.isRequired,message:"Price cannot be empty"},{validate:le.isPositiveInt,message:"Please enter numeric value"}],control:{type:je,settings:{placeholder:"Enter Price Per Km"}}})}),Object(b.jsx)(Zt.a,{sm:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"penaltyPrice"),label:"Penalty Price Per Km (\u20b9)",required:!0,validations:[{validate:le.isRequired,message:"Penalty price per km cannot be empty"},{validate:le.isPositiveInt,message:"Please enter numeric value"}],control:{type:je,settings:{placeholder:"Enter Penalty Price Per Km"}}})}),Object(b.jsx)(Zt.a,{sm:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"isDefault"),label:"Is default?",required:!0,disabled:!0,validations:[{validate:le.isRequired,message:"Please select any one option"}],control:{type:Oe,settings:{placeholder:"Select Default",options:Be,multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.isDefault),console.log("Hello world!")}}}})}),Object(b.jsx)(Zt.a,{sm:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"allowedKms"),label:"Allowed Kms",required:!0,validations:[{validate:le.isRequired,message:"Allowed kms cannot be empty"},{validate:le.isPositiveInt,message:"Please enter numeric value"}],control:{type:je,settings:{placeholder:"Enter Price Kms"}}})}),Object(b.jsx)(Zt.a,{sm:4,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"deposit"),label:"Deposit (\u20b9)",required:!0,validations:[{validate:le.isRequired,message:"Deposit cannot be empty"},{validate:le.isPositiveInt,message:"Please enter numeric value"}],control:{type:je,settings:{placeholder:"Enter Deposit"}}})})]})]})})})]})}}]),a}(M);er.propTypes={};var tr={getAllLocationApi:Nt,addUpdateVehiclePricingApi:function(e,t,a){return xt.post("offering/vehicle/add-update-vehicle-model-pricing",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(t.props.history.goBack(),gt.b.success(e.data.message||"Something went wrong"))})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))},getAllVehiclePricingApi:ws},ar=Object(o.b)((function(e){return{bikeModelState:e.BikeModelState}}),tr)(er),nr=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handlePricing=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.props.history.push({pathname:"/master/bike-models/view-details/".concat(n.state.modelId,"/add-edit-pricing"),state:{data:e,state:n.state}})},n.setKey=function(e){n.setState({selectedTab:e,page:1,conditions:[{key:"default"===e?"SEARCH_BY_IS_DEFAULT":"SEARCH_BY_PRICING_LEVEL",value:"default"===e||parseInt(e)}]},(function(){var e=new URLSearchParams;e.append("model_id",n.state.modelId),e.append("conditions",JSON.stringify(n.state.conditions)),n.props.getAllVehiclePricingApi(e)})),n.props.history.replace({search:"?tab=".concat(e,"&p=1")})},n.showTable=function(e){return Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:e,columnList:[{coumnWidth:80,labelName:"Price",dataKey:"price",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("price"===t)return e.price?e.price:"-"}},{coumnWidth:150,labelName:"Pricing Level",dataKey:"pricing_level",className:"",isCell:!0,cell:function(e,t){if("pricing_level"===t)return qe.getText(e.pricing_level)}},{coumnWidth:150,labelName:"Pricing Type",dataKey:"pricing_type",className:"",isCell:!0,cell:function(e,t){if("pricing_type"===t)return Ue.getText(e.pricing_type)}},{coumnWidth:150,labelName:"Minimum Time Booking",dataKey:"minimum_time_booking",className:"",isCell:!0,cell:function(e,t){if("minimum_time_booking"===t)return e.minimum_time_booking||"NA"}},{coumnWidth:100,labelName:"Default",dataKey:"is_default",className:"",isCell:!0,cell:function(e,t){if("is_default"===t)return e.is_default?"Yes":"No"}},{coumnWidth:100,labelName:"",dataKey:"options",className:"options-column",isCell:!0,cell:function(e,t){if("options"===t)return Object(b.jsx)(V.a,{className:"btn secondary-btn option-btn",onClick:function(){return n.handlePricing(e)},children:"Edit"})}}],history:n.props.history,location:n.props.location,totalPages:n.state.totalPages,currentPage:n.state.page-1,message:"Pricing list is empty"})})};var s=e.location.search,i=new URLSearchParams(s).get("p"),r=e.match.params.modelId?e.match.params.modelId:"";return n.state={modelId:r,bikeModelData:"",pricingData:"",vehiclesList:[],showAddEditVehiclePricing:!1,page:i?parseInt(i,10):1,totalPages:1,searchKey:"SEARCH_BY_ACCOUNT_ID",selectedTab:"default",conditions:[{key:"SEARCH_BY_IS_DEFAULT",value:!0}]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=new URLSearchParams;e.append("model_id",this.state.modelId),Es(e,this);var t=new URLSearchParams;t.append("model_id",this.state.modelId),t.append("conditions",JSON.stringify(this.state.conditions)),this.props.getAllVehiclePricingApi(t),this.props.history.replace({search:"?tab=".concat(this.state.selectedTab,"&p=").concat(this.state.page)})}},{key:"render",value:function(){var e,t=this,a=this.state.bikeModelData,n=this.props.bikeModelState.pricingData;return console.log("bikeModelData",a),Object(b.jsxs)("div",{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:"View Bike Model"}),this.state.showAddEditVehiclePricing&&Object(b.jsx)(ar,{show:this.state.showAddEditVehiclePricing,handleClose:function(){return t.handlePricing()},modelId:a.id,ctx:this}),a&&a.id?Object(b.jsx)("div",{className:"order-details-wrapper add-edit-customer-wrapper",children:Object(b.jsxs)("div",{className:"content view-detail-page",children:[Object(b.jsxs)("div",{className:"basic-details",children:[Object(b.jsx)("h2",{children:"Basic Details"}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Model Name"}),Object(b.jsx)("h3",{className:"regular lg",children:a.modelName})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Model Company"}),Object(b.jsx)("h3",{className:"regular lg",children:a.modelCompany})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"No. of batteries"}),Object(b.jsx)("h3",{className:"regular lg",children:a.noOfBatteries})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Tax Percentage"}),Object(b.jsx)("h3",{className:"regular lg",children:a.taxPercentage})]})})]}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Tax Code"}),Object(b.jsx)("h3",{className:"regular lg",children:a.taxCode})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Optimal Speed"}),Object(b.jsxs)("h3",{className:"regular lg",children:["Min: ",a.vehicleInformation.optimalSpeed?a.vehicleInformation.optimalSpeed.min:0,", Max: ",a.vehicleInformation.optimalSpeed?a.vehicleInformation.optimalSpeed.max:0]})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Charging Time"}),Object(b.jsxs)("h3",{className:"regular lg",children:["Min: ",a.vehicleInformation.chargingTime?a.vehicleInformation.chargingTime.min:"0",", Max: ",a.vehicleInformation.chargingTime?a.vehicleInformation.chargingTime.max:"0"]})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Power"}),Object(b.jsxs)("h3",{className:"regular lg",children:["Min: ",a.vehicleInformation.continuousPower?a.vehicleInformation.continuousPower.min:"0",", Max: ",a.vehicleInformation.continuousPower?a.vehicleInformation.continuousPower.max:"0"]})]})})]}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Torque"}),Object(b.jsxs)("h3",{className:"regular lg",children:["Min: ",a.vehicleInformation.torque?a.vehicleInformation.torque.min:"0",", Max: ",a.vehicleInformation.torque?a.vehicleInformation.torque.max:"0"]})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Range"}),Object(b.jsxs)("h3",{className:"regular lg",children:["Min: ",a.vehicleInformation.vehicleRange?a.vehicleInformation.vehicleRange.min:"0",", Max: ",a.vehicleInformation.vehicleRange?a.vehicleInformation.vehicleRange.max:"0"]})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Optimal Acceleration"}),Object(b.jsxs)("h3",{className:"regular lg",children:["Min: ",a.vehicleInformation.optimalAcceleration?a.vehicleInformation.optimalAcceleration.min:"0",", Max: ",a.vehicleInformation.optimalAcceleration?a.vehicleInformation.optimalAcceleration.max:"0"]})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Vehicle Image"}),Object(b.jsx)("h3",{className:"regular lg",children:a.images?Object(b.jsx)(y.a,{src:Ae+(null===(e=a.images[0])||void 0===e?void 0:e.path),style:{height:"8rem",objectFit:"contain"}}):"NA"})]})})]})]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{className:"basic-details",children:[Object(b.jsxs)("div",{className:"map-vehicle-wrapper",children:[Object(b.jsx)("h2",{children:"Bike Model Pricing"}),Object(b.jsx)(V.a,{className:"btn black-btn",onClick:function(){return t.handlePricing()},children:"Add Pricing"})]}),Object(b.jsxs)(Kt.a,{id:"controlled-tab-example",activeKey:this.state.selectedTab,onSelect:function(e){return t.setKey(e)},className:"pricing-tabs",children:[Object(b.jsx)(Wt.a,{eventKey:"default",title:"Default",children:this.showTable(n)}),Object(b.jsx)(Wt.a,{eventKey:"30",title:"City",children:this.showTable(n)}),Object(b.jsx)(Wt.a,{eventKey:"40",title:"Area",children:this.showTable(n)})]})]})]})}):Object(b.jsxs)("div",{className:"not-found-wrapper",children:[Object(b.jsx)(y.a,{src:Jt}),Object(b.jsxs)("p",{className:"red-hat-display-medium f-s-16 black-404",children:["No Franchise Data"," "]})]})]})}}]),a}(n.Component),sr={getBikeModelByIdApi:Es,getAllVehiclePricingApi:ws},ir=Object(o.b)((function(e){return{bikeModelState:e.BikeModelState}}),sr)(nr),rr=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleVehicleAllocation=function(){n.setState({showAllocationModal:!n.state.showAllocationModal})},n.handleConfirmation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.setState({showConfirmationModal:!n.state.showConfirmationModal,vehicleData:e})},n.removeVehicle=function(){var e=new URLSearchParams;e.append("vehicle_id",n.state.vehicleData.id),e.append("franchise_location_id",n.state.locationId),function(e,t,a){xt.post("offering/vehicle/remove-vehicle-franchise-location",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(gt.b.success(e.data.message),t(),oa(a,!1))})).catch((function(e){console.log("Catch",e)}))}(e,n.handleConfirmation,Object(u.a)(n))};var s=e.location.search,i=new URLSearchParams(s).get("p"),r=e.match.params.locationId,o=JSON.parse(localStorage.getItem("userDetails"));return n.state={userDetails:o,locationId:r,vehiclesList:[],totalPages:"",data:"",page:i?parseInt(i,10):1,showAllocationModal:!1,showConfirmationModal:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){ua(this),this.props.history.replace({search:"?p=".concat(this.state.page)})}},{key:"componentDidUpdate",value:function(e,t){var a=new URLSearchParams(e.location.search),n=(parseInt(a.get("p"),10),new URLSearchParams(this.props.location.search));parseInt(n.get("p"),10),n.get("search")}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=(t.page,t.totalPage,t.userDetails,t.franchiseOptionsList,t.vehiclesList),s=tt();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:"View Franchise Location"}),this.state.showAllocationModal&&Object(b.jsx)(Ta,{show:this.state.showAllocationModal,handleClose:this.handleVehicleAllocation,franchiseId:this.state.data.franchise_account_id,locationId:this.state.data.id,isFranchiseLocation:!0,ctx:this}),this.state.showConfirmationModal&&Object(b.jsx)(Ba,{show:this.state.showConfirmationModal,handleClose:this.handleConfirmation,type:"warning",actionText:"remove",handleArchive:this.removeVehicle,text:this.state.vehicleData&&this.state.vehicleData.registrationNo}),Object(b.jsx)("div",{className:"order-details-wrapper add-edit-customer-wrapper",children:Object(b.jsxs)("div",{className:"content view-detail-page",children:[Object(b.jsxs)("div",{className:"basic-details",children:[Object(b.jsx)("h2",{children:"Basic Details"}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{sm:4,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Franchise Id"}),Object(b.jsx)("h3",{className:"regular lg",children:a?a.franchise_account_id:"NA"})]})}),Object(b.jsx)(Zt.a,{sm:3,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Area Name"}),Object(b.jsx)("h3",{className:"regular lg",children:a?a.area_details.name:"NA"})]})}),Object(b.jsx)(Zt.a,{sm:5,xs:12,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Area Name"}),Object(b.jsx)("h3",{className:"regular lg",children:a?a.location_details.formatted_address:"NA"})]})})]})]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{className:"basic-details",children:[Object(b.jsxs)("div",{className:"map-vehicle-wrapper",children:[Object(b.jsx)("h2",{children:"Assigned Vechicles"}),xe()===Ie.FRANCHISE&&Object(b.jsx)(V.a,{className:"btn black-btn",onClick:this.handleVehicleAllocation,children:"Add Vehicle"})]}),Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:n,columnList:[{coumnWidth:250,labelName:"Model Name",dataKey:"modelInfo",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("modelInfo"===t)return e.modelInfo?e.modelInfo.modelName:"-"}},{coumnWidth:250,labelName:"Chassis Number",dataKey:"chassisNo",className:"",isCell:!0,cell:function(e,t){if("chassisNo"===t)return e.chassisNo}},{coumnWidth:250,labelName:"Registration number",dataKey:"registrationNo",className:"",isCell:!0,cell:function(e,t){if("registrationNo"===t)return e.registrationNo||"NA"}},{coumnWidth:250,labelName:"",dataKey:"options",className:"options-column",isCell:!0,cell:function(t,a){if("options"===a&&s.includes(Te.DELETE_FRANCHISE_LOCATION))return Object(b.jsx)(V.a,{className:"btn secondary-btn option-btn",onClick:function(){return e.handleConfirmation(t)},children:"Remove"})}}],history:this.props.history,location:this.props.location,totalPages:this.state.totalPages,currentPage:this.state.page-1,message:"Vehicle list is empty"})})]})]})})]})}}]),a}(M),or={getFranchiseLocationByIdApi:ua};rr.propTypes={};var cr=Object(o.b)((function(e){return{franchiseState:e.FranchiseState}}),or)(rr),lr=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={changePassword:!1,editProfile:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("userDetails"));return Object(b.jsx)(n.Fragment,{children:Object(b.jsx)("div",{children:Object(b.jsx)("section",{className:"profile",children:Object(b.jsx)(ka.a,{children:Object(b.jsx)(Zt.a,{sm:12,children:Object(b.jsxs)("div",{className:"photo-wrapper",children:[Object(b.jsx)("div",{className:"p-c-wrapper",children:Object(b.jsx)(y.a,{src:Lt,className:"profile-pic",responsive:!0})}),Object(b.jsx)("h1",{children:e.first_name}),Object(b.jsxs)("h6",{children:["Role - ",Ie.getText(xe())]})]})})})})})})}}]),a}(n.Component),dr=Object(o.b)((function(e){return{}}),{})(lr),hr=a.p+"static/media/greenCIrcleTick.5ab4f83c.svg",ur=function(e){var t=e.pricing,a=e.discountAmount,n=e.pointsApplied,s=e.points,i=e.duration,r=e.isViewBooking,o=void 0!==r&&r,c=e.extensionInfo,l=void 0===c?null:c,d=e.cancellationFee,h=void 0===d?"":d,u=e.extraCharges,m=void 0===u?"":u,p=e.status;t.deposit,null===m||void 0===m||m.total_penalty_amount,null===m||void 0===m||m.damage_amount,null===m||void 0===m||m.damage_tax_amount;return console.log(p),Object(b.jsxs)("div",{className:"estimated-fare-wrapper",children:[Object(b.jsxs)("div",{className:"fare",children:[Object(b.jsx)("h3",{className:"proximanova-bold f-s-20 lh-26",children:"Total Fare & Penalty"}),Object(b.jsxs)("h3",{className:"proximanova-bold f-s-20 lh-26",children:["\u20b9",t.total_amount]})]}),Object(b.jsxs)("div",{className:"fare",children:[Object(b.jsxs)("p",{className:"proximanova-regular f-s-14 lh-21 op-6",children:["About ",t.allowed_kms," free kms, ",i]}),Object(b.jsx)("p",{className:"proximanova-regular f-s-14 lh-21 op-6",children:o?Object(b.jsxs)("span",{children:[" ",Object(b.jsx)(y.a,{src:hr}),"Paid"]}):"To Pay"})]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{className:"fare",children:[Object(b.jsx)("h4",{className:"proximanova-medium f-s-16 lh-24",children:"Booking Tariff"}),Object(b.jsxs)("h4",{className:"proximanova-bold f-s-16 lh-24",children:["\u20b9",t.booking_price]})]}),Object(b.jsxs)("div",{className:"fare",children:[Object(b.jsx)("h4",{className:"proximanova-medium f-s-14 lh-22 op-87",children:"Base Fare"}),Object(b.jsxs)("h4",{className:"proximanova-medium f-s-14 lh-22 op-87",children:["\u20b9",t.price]})]}),a&&a>0&&Object(b.jsxs)("div",{className:"fare",children:[Object(b.jsx)("h4",{className:"proximanova-medium f-s-14 lh-22 op-87",children:"Coupon applied"}),Object(b.jsxs)("h4",{className:"proximanova-medium f-s-14 lh-22 op-87",children:["- \u20b9",a]})]}),n&&Object(b.jsxs)("div",{className:"fare",children:[Object(b.jsx)("h4",{className:"proximanova-medium f-s-14 lh-22 op-87",children:"Points balance"}),Object(b.jsxs)("h4",{className:"proximanova-medium f-s-14 lh-22 op-87",children:["- \u20b9",s]})]}),Object(b.jsxs)("div",{className:"fare",children:[Object(b.jsx)("h4",{className:"proximanova-medium f-s-14 lh-22 op-87",children:"GST"}),Object(b.jsxs)("h4",{className:"proximanova-medium f-s-14 lh-22 op-87",children:["\u20b9",t.total_tax_amount]})]}),h>0&&Object(b.jsxs)("div",{className:"fare",style:{alignItems:"baseline"},children:[Object(b.jsxs)("h4",{className:"proximanova-medium f-s-16 lh-24",children:["Cancellation Fee"," ",Object(b.jsx)("span",{className:"proximanova-regular f-s-12 lh-20 op-6",children:"(with tax)"})," "]}),Object(b.jsxs)("h4",{className:"proximanova-bold f-s-16 lh-24",children:["\u20b9",h]})]}),l&&Object(b.jsxs)("div",{className:"fare",style:{alignItems:"baseline"},children:[Object(b.jsxs)("h4",{className:"proximanova-medium f-s-16 lh-24",children:["Extension Fee"," ",Object(b.jsxs)("p",{className:"proximanova-regular f-s-12 lh-20 op-6",children:["Extra ",l.allowed_kms," kms,"," ",l.booking_time," hrs"]})," "]}),Object(b.jsxs)("h4",{className:"proximanova-bold f-s-16 lh-24",children:["\u20b9",l.total_amount]})]}),m&&m.total_penalty_amount>0&&Object(b.jsxs)("div",{className:"fare",children:[Object(b.jsx)("h4",{className:"proximanova-medium f-s-16 lh-24",children:"Penalty Fee "}),Object(b.jsxs)("h4",{className:"proximanova-bold f-s-16 lh-24",children:["\u20b9",m.total_penalty_amount]})]}),m&&m.damage_amount>0&&Object(b.jsxs)("div",{className:"fare",children:[Object(b.jsx)("h4",{className:"proximanova-medium f-s-16 lh-24",children:"Damage Fee "}),Object(b.jsxs)("h4",{className:"proximanova-bold f-s-16 lh-24",children:["\u20b9",m.damage_amount+m.damage_tax_amount]})]}),Object(b.jsxs)("div",{className:"fare",children:[Object(b.jsx)("h4",{className:"proximanova-medium f-s-16 lh-24",children:"Deposit"}),Object(b.jsxs)("h4",{className:"proximanova-bold f-s-16 lh-24",children:["\u20b9",t.deposit]})]}),p>=Ke.PICKED_UP&&p<=Ke.RETURN_PAYMENT_PENDING&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("hr",{}),Object(b.jsx)("div",{className:"penalty-btn",children:Object(b.jsx)(V.a,{className:"btn secondary-btn",onClick:e.handleAddPenaltyModal,children:"+ Add Penalty"})})]}),m&&m.damage_attachments&&m.damage_attachments.length>0&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("br",{}),Object(b.jsx)("h4",{className:"proximanova-medium f-s-16 lh-24",children:"Damage Images"}),Object(b.jsx)("div",{className:"damage-images",children:m.damage_attachments.map((function(e){return Object(b.jsx)(y.a,{src:Ae+e.path,className:""})}))})]})]})},mr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHDSURBVHgBpZQ9L0RBFIbfM7u+CptNRCFEdle3icUvoNERRKda/8CN0MnSk4lOZxudBC2Vjsq3CnsT26ARFITMODOJzdqdvfv1Jjd37r0zz33PzDmH4FDsTEYhVFoIMaoJw9CI2Q+Ec9LwlVYHfmox61pLZbDL9Wmi0DYPowgSwddKrZWCRfFD4lJKhu1VhRmxayKxnbiSGScwcSMzHN4C6pQGVhPXUqJgHCbMjbT5G5qQ1pjxU96+BcavZa6w8Y3rVf8gHrLuQGk0r3ZAPQmQmKpn1XzXiL2cIhpjIOdZHbCVnlFEQm1unqAhQTXuXbK928KO3u+x+XzinsQsgQA3s9GkHfe1RLDVP4n89xuWHg8RpDDnnu9yacIyjpId3RjvHLAJNvewizf1VZnGrDDbPOdhGdCE1dsaKRzAxN2OdRgkrfRFGEodQ4hp14Tl/KHN/NOPPG4/X1BdtE+ms1AYOdRSv4H24OdSXlz4I94rl808mhTX9Jq521M2NaihN9GgtAK3MS9rxv/6YexKrvKLTF0wPj9/0Ct0KUeDlWkLpaoJb7fKRFf8kirNNmBBmFJcmn95anJWcJophWMoZM3+l677Bcyvn3QhQGDvAAAAAElFTkSuQmCC",pr=a.p+"static/media/circle.d7b44d58.svg",br=a.p+"static/media/square.c63b344b.svg",jr=a.p+"static/media/cancelBox.567a4eff.svg",gr=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onSubmit=function(){n.props.reAssignBike(n.state.bikeId)},n.state={bikeList:[],vehicleOptions:[]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){!function(e,t){var a=new URLSearchParams;a.append("order_id",e),a.append("start",-1),a.append("limit",-1),xt.post("commerce/order/get-vehicles-for-order",a).then((function(e){if(e.data.error)gt.b.error(e.data.message||"Something went wrong");else{var a=e.data.data.results.map((function(e){return{label:e.name+" - "+e.registration_no,value:e.id}}));t.setState({vehicleOptions:a})}})).catch((function(e){console.log(" error: ",e)}))}(this.props.bookingId,this)}},{key:"render",value:function(){var e=this;return Object(b.jsx)(Bt,{show:this.props.show,onHide:function(){return e.props.handleClose()},title:"Assign Bike",modalClass:"assign-bike",children:Object(b.jsxs)(U,{onValidSubmit:this.onSubmit,children:[Object(b.jsx)("div",{className:"modal-wrapper ",children:Object(b.jsx)(Zt.a,{md:12,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"bikeId"),label:"Select Bike",required:!0,validations:[{validate:le.isRequired,message:"Bike cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Bike",options:this.state.vehicleOptions,multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.bikeId)}}}})})}),Object(b.jsx)("div",{className:"submit-wrapper",style:{justifyContent:"center"},children:Object(b.jsx)(re,{customClass:"btn black-btn ".concat(!this.state.bikeId&&"inactive-btn"),children:"Assign"})})]})})}}]),a}(M),vr=Object(o.b)((function(e){return Object(g.a)({},e)}),{})(gr),fr=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onSubmit=function(){n.props.markReturnOrder(n.state.paymentMode)},n.markPickupOrder=function(){var e=new URLSearchParams;e.append("order_id",n.props.bookingId),e.append("kyc_attachment_ids",n.state.kycDocument?JSON.stringify([n.state.kycDocument.imageId]):JSON.stringify([])),function(e,t){xt.post("commerce/order/add-update-kyc-details",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):t()})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))}(e,n.props.markPickupOrder)},n.state={kycDocument:""},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){if(2===this.props.action){var e=new URLSearchParams;e.append("order_id",this.props.bookingId),function(e,t){xt.post("commerce/order/get-penalty-details",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):t.setState({pentaltyDetails:e.data.data.extra_charges})})).catch((function(e){console.log(" error: ",e)}))}(e,this)}}},{key:"render",value:function(){var e=this,t=this.state.pentaltyDetails;return Object(b.jsx)(Bt,{show:this.props.show,onHide:this.props.handleClose,title:1===this.props.action?"Do you want to mark order as picked up?":"Do you want to mark order as Completed?",modalClass:"change-password",children:1===this.props.action?Object(b.jsxs)(b.Fragment,{children:[1===this.props.action&&Object(b.jsx)(U,{children:Object(b.jsx)(te,{valueLink:this.linkState(this,"kycDocument"),label:"Upload KYC Document",control:{type:lt,settings:{moduleName:"offering",subModule:"vehicle",fileType:"IMAGE",extensions:["image/*"],maxFiles:1,maxFileSize:1e8,onSelect:function(e,t){t({id:e.lastModified,name:e.name,size:e.size,mimeType:e.type,path:"single.jpg"},ke)}}}})}),Object(b.jsx)("div",{className:"submit-wrapper",children:Object(b.jsx)(V.a,{className:"btn black-btn",onClick:1===this.props.action?this.markPickupOrder:this.props.markReturnOrder,children:"Yes, Mark"})}),Object(b.jsx)("div",{className:"text-btn",children:Object(b.jsx)(V.a,{variant:"light",onClick:this.props.handleClose,children:"No"})})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(U,{onValidSubmit:this.onSubmit,children:(null===t||void 0===t?void 0:t.payable_amount)>0?Object(b.jsxs)(b.Fragment,{children:[t&&Object(b.jsxs)("div",{className:"estimated-fare-wrapper",children:[Object(b.jsxs)(ka.a,{children:[Object(b.jsxs)(Zt.a,{md:6,children:[Object(b.jsxs)("p",{className:"proximanova-regular op-6 f-s-14 lh-24",children:["Damage Fee"," "]}),Object(b.jsxs)("h4",{className:"proximanova-bold f-s-16 lh-24",children:["\u20b9",t.damage_amount]})]}),Object(b.jsxs)(Zt.a,{md:6,children:[Object(b.jsxs)("p",{className:"proximanova-regular op-6 f-s-14 lh-24",children:["Extra Km"," "]}),Object(b.jsxs)("h4",{className:"proximanova-bold f-s-16 lh-24",children:["\u20b9",t.extra_kms_amount]})]})]}),Object(b.jsxs)(ka.a,{children:[Object(b.jsxs)(Zt.a,{md:6,children:[Object(b.jsxs)("p",{className:"proximanova-regular  op-6 f-s-14 lh-24",children:["Late Fee"," "]}),Object(b.jsxs)("h4",{className:"proximanova-bold f-s-16 lh-24",children:["\u20b9",t.extra_time_amount?t.extra_time_amount:"0"]})]}),Object(b.jsxs)(Zt.a,{md:6,children:[Object(b.jsx)("p",{className:"proximanova-regular  op-6 f-s-14 lh-24",children:"Total Tax"}),Object(b.jsxs)("h4",{className:"proximanova-bold f-s-16 lh-24",children:["\u20b9",t.total_tax_amount]})]})]}),Object(b.jsx)("hr",{}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsx)("h4",{className:"proximanova-proximanova-regular op-6 f-s-14 lh-24",children:"Total Charges"})}),Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsxs)("h4",{className:"proximanova-bold f-s-16 lh-24",children:["\u20b9",t.total_amount]})}),Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsx)("h4",{className:"proximanova-proximanova-regular op-6 f-s-14 lh-24",children:"Deposit"})}),Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsxs)("h4",{className:"proximanova-bold f-s-16 lh-24",children:["\u20b9",t.deposit_discount]})})]}),Object(b.jsx)("hr",{}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsx)("h4",{className:"proximanova-proximanova-regular op-6 f-s-16 lh-24",children:"Total Payble amount"})}),Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsxs)("h4",{className:"proximanova-bold f-s-16 lh-24",children:["\u20b9",t.payable_amount]})})]})]}),Object(b.jsx)(ka.a,{children:Object(b.jsx)(Zt.a,{md:12,children:Object(b.jsx)(te,{valueLink:this.linkState(this,"paymentMode"),label:"Payment Mode",required:!0,validations:[{validate:le.isRequired,message:"Payment Mode cannot be empty"}],control:{type:Oe,settings:{placeholder:"Select Payment Mode",options:[{label:"Payment Link",value:"20"},{label:"Offline",value:"30"}],multiple:!1,searchable:!0,onChangeCallback:function(t){t(e.state.paymentMode)}}}})})}),Object(b.jsx)("div",{className:"submit-wrapper",style:{justifyContent:"center"},children:Object(b.jsxs)(re,{customClass:"btn black-btn ".concat(!this.state.paymentMode&&"inactive-btn"),children:[" ","Yes, Mark"]})})]}):Object(b.jsx)("div",{className:"submit-wrapper",children:Object(b.jsx)(V.a,{className:"btn black-btn",onClick:function(){return e.props.markReturnOrder(null)},children:"Yes, Mark"})})}),Object(b.jsx)("div",{className:"text-btn",children:Object(b.jsx)(V.a,{variant:"light",onClick:this.props.handleClose,children:"No"})})]})})}}]),a}(M);fr.propTypes={};var Or=fr,yr=function(e){var t=Object(n.useState)(""),a=Object(dt.a)(t,2),s=a[0],i=a[1];return Object(b.jsx)(Bt,{show:e.show,onHide:e.handleClose,title:"Please select reason for cancellation",modalClass:"change-password",children:Object(b.jsxs)("div",{className:"",children:[Object(b.jsxs)("div",{onChange:function(e){i(e.target.value)},children:[Object(b.jsxs)("div",{className:"radio-input",children:[Object(b.jsx)("input",{type:"radio",name:"reason",value:"Changed my plan"})," ",Object(b.jsx)("span",{className:"red-hat-display-regular f-s-16 lh-24",children:"Changed Customer plan"})]}),Object(b.jsxs)("div",{className:"radio-input",children:[Object(b.jsx)("input",{type:"radio",name:"reason",value:"Franchisee charging extra"})," ",Object(b.jsx)("span",{className:"red-hat-display-regular f-s-16 lh-24",children:"Bike damaged"})]}),Object(b.jsxs)("div",{className:"radio-input",children:[Object(b.jsx)("input",{type:"radio",name:"reason",value:"Bike not available at location"})," ",Object(b.jsx)("span",{className:"red-hat-display-regular f-s-16 lh-24",children:"Bike not available at location"})]})]}),Object(b.jsx)("div",{className:"submit-wrapper",children:Object(b.jsx)(V.a,{className:"btn black-btn",onClick:function(){return s&&void e.cancelOrder(s)},children:"Yes, Cancel Booking"})}),Object(b.jsx)("div",{className:"text-btn",children:Object(b.jsx)(V.a,{variant:"light",onClick:e.handleClose,children:"Don't Cancel"})})]})})},xr=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onSubmit=function(){var e=new URLSearchParams;if(e.append("order_id",n.props.bookingId),n.state.penaltyAmount&&e.append("damage_amount",n.state.penaltyAmount),n.state.note&&e.append("damage_details",n.state.note),n.state.extraKm&&e.append("extra_kms",n.state.extraKm),n.state.damageImages){var t=[];n.state.damageImages.map((function(e){return t.push(e.imageId)})),console.log("images",t),e.append("damage_attachment_ids",JSON.stringify(t))}!function(e,t,a){xt.post("commerce/order/add-update-penalty-details",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(t(),a(),gt.b.success(e.data.message))})).catch((function(e){console.log(" error: ",e)}))}(e,n.props.getBookingDetails,n.props.handleClose)},n.state={extraKm:"",penaltyAmount:"",damageImages:[]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(b.jsx)(Bt,{show:this.props.show,onHide:this.props.handleClose,title:"Add Penalty",modalClass:"change-password",children:Object(b.jsxs)(U,{onValidSubmit:this.onSubmit,children:[Object(b.jsx)("div",{className:"",children:Object(b.jsxs)(Zt.a,{md:12,children:[Object(b.jsx)(te,{valueLink:this.linkState(this,"penaltyAmount"),label:"Damage Penalty Amount (in rupees)",validations:[{validate:le.isPositiveInt,message:"Damage Penalty Amount cannot be negative"}],control:{type:je,settings:{placeholder:"Enter Damage Penalty Amount"}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"note"),label:"Damage Details",control:{type:je,settings:{placeholder:"Enter Damage Details",as:"textarea",rows:2}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"damageImages"),label:"Damage Images",control:{type:lt,settings:{moduleName:"offering",subModule:"vehicle",fileType:"IMAGE",extensions:["image/*"],maxFiles:5,maxFileSize:1e8,onSelect:function(t,a){a({id:t.lastModified,name:t.name,size:t.size,mimeType:t.type,path:"multi"+(e.state.damageImages.length+1)+".jpg"},ke)}}}}),Object(b.jsx)(te,{valueLink:this.linkState(this,"extraKm"),label:"Extra Kilometers",validations:[{validate:le.isPositiveInt,message:"Penalty Amount cannot be negative"}],control:{type:je,settings:{placeholder:"Enter Extra Kilometers"}}})]})}),Object(b.jsx)("div",{className:"submit-wrapper",style:{justifyContent:"center"},children:Object(b.jsx)(re,{customClass:"btn black-btn",children:"Confirm"})})]})})}}]),a}(M),Nr=Object(o.b)((function(e){return Object(g.a)({},e)}),{})(xr),Sr=a.p+"static/media/no-bike.3feba8d4.png",Cr=function(e){var t=Object(n.useState)(new Date(e.bookingDetails.endDate)),a=Object(dt.a)(t,2),s=a[0],i=a[1],r=Object(n.useState)(!1),o=Object(dt.a)(r,2),c=o[0],l=o[1],d=Object(n.useState)(null),h=Object(dt.a)(d,2),u=h[0],m=h[1],p=function(){!function(e,t,a,n){var s=new URLSearchParams;s.append("order_id",t.orderId),s.append("end_datetime",Xe()(e).format("DD-MM-YYYY hh:mm")),xt.post("commerce/order/get-pricing-for-extend-order",s).then((function(t){t.data.error?(a(!0),gt.b.error(t.data.message||"Something went wrong")):n(Object(g.a)(Object(g.a)({},t.data.data),{},{extendDate:e}))})).catch((function(e){console.log(" error: ",e)}))}(s,e,l,m)},j=function(t){var a=new URLSearchParams;a.append("order_id",e.orderId),a.append("end_datetime",Xe()(s).format("DD-MM-YYYY hh:mm")),a.append("payment_mode",t),function(e,t){xt.post("commerce/order/extend-order",e).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(t.handleClose(),t.getBookingDetails())})).catch((function(e){gt.b.error(e.message||"Something went wrong")}))}(a,e)};return Object(b.jsx)(Bt,{show:e.show,onHide:e.handleClose,title:u?"":"Extend Booking",modalClass:"change-password extend",children:Object(b.jsx)("div",{className:"extend-booking-modal",children:c?Object(b.jsxs)("div",{className:"no-bike-wrapper",children:[Object(b.jsx)(y.a,{src:Sr,className:""}),Object(b.jsx)("h3",{className:"red-hat-display-bold f-s-24 lh-30",children:"Opps!"}),Object(b.jsx)("p",{className:"red-hat-display-medium f-s-14 h-22 op-6",children:"Vechicle not availble for extention"}),Object(b.jsx)(V.a,{className:"btn black-btn",onClick:e.handleClose,children:"Okay"})]}):u?Object(b.jsxs)("div",{className:"extend-booking-payment",children:[Object(b.jsx)("p",{className:"red-hat-display-regular f-s-18 lh-27",children:"Time extended"}),Object(b.jsxs)("h3",{className:"red-hat-display-black f-s-30 lh-38",children:[u.booking_time," hrs"]}),Object(b.jsxs)("p",{className:"red-hat-display-regular f-s-18 lh-27 op-6",children:["Customer will get an extra ",u.allowed_kms," kms for ",u.booking_time," hrs"]}),Object(b.jsxs)("div",{className:"extend-info",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("h6",{className:"red-hat-display-medium f-s-16 lh-24 blue-407",children:"Previous return time"}),Object(b.jsx)("p",{className:"red-hat-display-regular f-s-14 lh-21 op-6",children:Xe()(e.bookingDetails.endDate).format("Do MMMM YYYY, h:mm a")})]}),Object(b.jsx)("span",{}),Object(b.jsxs)("div",{children:[Object(b.jsx)("h6",{className:"red-hat-display-medium f-s-16 lh-24 green-40B",children:"Updated return time"}),Object(b.jsx)("p",{className:"red-hat-display-semibold f-s-14 lh-21 ",children:Xe()(u.extendDate).format("Do MMMM YYYY, h:mm a")})]})]}),Object(b.jsxs)("div",{className:"pricing",children:[Object(b.jsx)("h6",{className:"red-hat-display-medium f-s-16 lh-24",children:"Base fare"}),Object(b.jsxs)("p",{className:"red-hat-display-regular f-s-14 lh-21 op-6",children:["\u20b9",u.booking_amount]})]}),Object(b.jsxs)("div",{className:"pricing",children:[Object(b.jsx)("h6",{className:"red-hat-display-medium f-s-16 lh-24",children:"GST"}),Object(b.jsxs)("p",{className:"red-hat-display-regular f-s-14 lh-21 op-6",children:["\u20b9",u.total_tax_amount]})]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{className:"pricing",children:[Object(b.jsx)("h6",{className:"red-hat-display-medium f-s-16 lh-24",children:"Total fare"}),Object(b.jsxs)("p",{className:"red-hat-display-regular f-s-14 lh-21 op-6",children:["\u20b9",u.total_amount]})]}),Object(b.jsx)(V.a,{className:"btn secondary-btn",onClick:function(){return j(He)},children:"Confirm & Take Offline Payment"}),Object(b.jsx)(V.a,{className:"btn black-btn",onClick:function(){return j(We)},children:"Confirm & Send Payment Link"})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"",children:Object(b.jsx)(G.a,{controlId:"scheduleDate",className:"date-group",children:Object(b.jsx)(Wi.a,{minDate:new Date(e.bookingDetails.endDate),selected:s,onChange:function(e){return i(e)},showTimeSelect:!0,timeFormat:"HH:mm aa",timeIntervals:15,timeCaption:"Time",dateFormat:"MMMM d, yyyy h:mm aa",inline:!0})})}),Object(b.jsx)(V.a,{className:"btn black-btn",onClick:function(){return p()},children:"Confirm"})]})})})},kr=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).getBookingDetails=function(){!function(e,t){var a=new URLSearchParams;a.append("order_id",e),xt.post("commerce/order/get-order-details-by-id",a).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):t.setState({bookingData:e.data.data.order})})).catch((function(e){console.log(" error: ",e)}))}(n.state.bookingId,Object(u.a)(n))},n.handleAddPenaltyModal=function(){n.setState({addPenaltyModal:!n.state.addPenaltyModal})},n.handleAssignBikeModal=function(){n.setState({showAssignBikeModal:!n.state.showAssignBikeModal})},n.handleChangeOrderStatusModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setState({changeOrderStatusModal:!n.state.changeOrderStatusModal,action:e})},n.handleCancelOrderModal=function(){n.setState({cancelBookingModal:!n.state.cancelBookingModal})},n.cancelOrder=function(e){!function(e,t,a,n){var s=new URLSearchParams;s.append("order_id",e),s.append("cancellation_reason",t),xt.post("commerce/order/cancel-order",s).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(a(),n(),gt.b.success(e.data.message||"Order Cancelled Successfully"))})).catch((function(e){console.log(" error: ",e)}))}(n.state.bookingId,e,n.getBookingDetails,n.handleCancelOrderModal)},n.reAssignBike=function(e){!function(e,t,a,n){var s=new URLSearchParams;s.append("order_id",e),s.append("vehicle_id",t),xt.post("commerce/order/reassign-vehicle-on-order",s).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(a(),n(),gt.b.success(e.data.message))})).catch((function(e){console.log(" error: ",e)}))}(n.state.bookingId,e,n.getBookingDetails,n.handleAssignBikeModal)},n.markPickupOrder=function(){!function(e,t,a){var n=new URLSearchParams;n.append("order_id",e),xt.post("commerce/order/mark-order-for-pickup",n).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(t(),a(),gt.b.success(e.data.message))})).catch((function(e){console.log(" error: ",e)}))}(n.state.bookingId,n.getBookingDetails,n.handleChangeOrderStatusModal)},n.markReturnOrder=function(e){!function(e,t,a,n){var s=new URLSearchParams;s.append("order_id",e),s.append("payment_mode",t),xt.post("commerce/order/mark-order-for-return",s).then((function(e){e.data.error?gt.b.error(e.data.message||"Something went wrong"):(a(),n(),gt.b.success(e.data.message))})).catch((function(e){console.log(" error: ",e)}))}(n.state.bookingId,e,n.getBookingDetails,n.handleChangeOrderStatusModal)},n.toggleExtendBooking=function(){n.setState({showExtendBookingModal:!n.state.showExtendBookingModal})},n.state={bookingId:n.props.match.params.id,showAssignBikeModal:!1,paymentMode:30,cancelBookingModal:!1,addPenaltyModal:!1,showExtendBookingModal:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.getBookingDetails()}},{key:"render",value:function(){var e,t,a,n,s,i,r,o,c=this,l=this.state.bookingData;l&&(o=function(e){var t="YYYY-MM-DD HH:mm:ss",a=Xe()(e.startDate||e.start_datetime).format(t),n=Xe()(e.endDate||e.end_datetime).format(t),s=Xe.a.duration(Xe()(n).diff(a));return Math.floor(s.asDays())+" Days "+s.hours()+" hrs "+s.minutes()+" mins "}(l));var d={total_price:l&&l.booking_info.total_amount,allowed_kms:l&&l.booking_info.allowed_kms,booking_price:l&&l.booking_info.booking_amount,price:l&&l.model_pricing.price,total_tax_amount:l&&l.total_tax_amount,total_amount:l&&l.total_amount,deposit:l&&l.booking_info.deposit,penalty_price_per_hour:l&&l.model_pricing.penalty_price_per_hour,per_km_price:l&&l.model_pricing.per_km_price},h=l&&l.booking_info.coupon_discount,u=!(!l||!l.booking_info.points),m=l&&l.booking_info.points,p=l&&l.status,j=l&&(null===l||void 0===l||null===(e=l.extra_charges)||void 0===e?void 0:e.total_amount),g={startdDate:l&&l.booking_info.start_datetime,endDate:l&&l.booking_info.end_datetime},v=l&&l.id;return Object(b.jsxs)(b.Fragment,{children:[this.state.showExtendBookingModal&&Object(b.jsx)(Cr,{show:this.state.showExtendBookingModal,handleClose:function(){return c.toggleExtendBooking()},bookingDetails:g,orderId:v,getBookingDetails:function(){return c.getBookingDetails()}}),Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,title:"Booking Details",moduleName:"# ".concat(null===l||void 0===l?void 0:l.code),secondaryBtnText:p!==Ke.CANCELLED&&p!==Ke.INITIATED&&p!==Ke.NOT_PLACED&&p!==Ke.RETURN_PAYMENT_SETTLED&&p!==Ke.PICKED_UP&&"Cancel Booking",isSecondaryBtn:this.handleCancelOrderModal,primaryBtnText:l&&(l.extension_info||p===Ke.CANCELLED||p===Ke.RETURN_PAYMENT_SETTLED||p===Ke.NOT_PLACED||p===Ke.INITIATED)?"":"Extend Booking",isPrimaryBtn:this.toggleExtendBooking}),this.state.addPenaltyModal&&Object(b.jsx)(Nr,{bookingId:this.state.bookingId,show:this.state.addPenaltyModal,handleClose:this.handleAddPenaltyModal,getBookingDetails:this.getBookingDetails}),this.state.cancelBookingModal&&Object(b.jsx)(yr,{show:this.state.cancelBookingModal,handleClose:this.handleCancelOrderModal,cancelOrder:function(e){return c.cancelOrder(e)}}),this.state.showAssignBikeModal&&Object(b.jsx)(vr,{bookingId:this.state.bookingId,show:this.state.showAssignBikeModal,handleClose:this.handleAssignBikeModal,reAssignBike:function(e){return c.reAssignBike(e)}}),this.state.changeOrderStatusModal&&Object(b.jsx)(Or,{bookingId:this.state.bookingId,action:this.state.action,show:this.state.changeOrderStatusModal,handleClose:this.handleChangeOrderStatusModal,markPickupOrder:this.markPickupOrder,markReturnOrder:function(e){return c.markReturnOrder(e)}}),Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{sm:7,children:Object(b.jsx)("div",{className:"add-edit-customer-wrapper",children:Object(b.jsxs)("div",{className:"booking-content view-detail-page",children:[Object(b.jsxs)("div",{className:"header",children:[Object(b.jsx)("div",{className:"red-hat-display-bold f-s-12 grey-757",children:"Pickup/Return Details"}),Object(b.jsx)("div",{className:"time-wrapper red-hat-display-regular",children:o}),Object(b.jsx)("p",{className:"order-status proximanova-regular f-s-16 lh-24 ".concat(Ke.getClass(p)),children:Ke.getText(p)})]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{className:"basic-details",children:[Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Franchisee Name"}),Object(b.jsx)("h3",{className:"regular lg",children:null===l||void 0===l||null===(t=l.franchise)||void 0===t?void 0:t.legal_name})]})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Pickup Date"}),Object(b.jsx)("h3",{className:"regular lg",children:Xe()(null===l||void 0===l?void 0:l.start_datetime).format("DD MMM YYYY hh:mm a")})]})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Return Date"}),Object(b.jsx)("h3",{className:"regular lg",children:Xe()(null===l||void 0===l?void 0:l.end_datetime).format("DD MMM YYYY hh:mm a")})]})})]}),Object(b.jsx)(ka.a,{children:Object(b.jsx)(Zt.a,{md:6,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Pickup & Return Address"}),Object(b.jsx)("h3",{className:"regular lg",children:null===l||void 0===l||null===(a=l.franchise_location)||void 0===a||null===(n=a.location_details)||void 0===n?void 0:n.formatted_address})]})})})]}),Object(b.jsx)("div",{className:"header m-t-5",children:Object(b.jsx)("div",{className:"red-hat-display-bold f-s-12 grey-757",children:"Booking Status"})}),Object(b.jsx)("hr",{}),Object(b.jsx)("div",{className:"timeline-wrapper",children:Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{sm:3,children:Object(b.jsxs)("div",{className:"timeline ".concat(p===Ke.CANCELLED||p===Ke.NOT_PLACED||p===Ke.INITIATED?"cancelled":p===Ke.PLACED||p>=Ke.PICKED_UP?"success":""),children:[Object(b.jsx)(y.a,{src:p===Ke.CANCELLED||p===Ke.NOT_PLACED||p===Ke.INITIATED?jr:mr}),Object(b.jsx)("h3",{className:"proximanova-medium f-s-16 lh-26",children:p===Ke.NOT_PLACED||p===Ke.INITIATED?"Booking unsuccessful":p===Ke.CANCELLED?"Booking Cancelled":"Booking successful"}),Object(b.jsx)("h6",{className:"proximanova-regular f-s-14 lh-21 op-6",children:Xe()(null===l||void 0===l?void 0:l.created_on).format("DD MMM YYYY hh:mm a")})]})}),Object(b.jsx)(Zt.a,{sm:3,children:Object(b.jsxs)("div",{className:"timeline ".concat(p===Ke.CANCELLED?"cancelled":p>=Ke.PICKED_UP?"success":""),children:[Object(b.jsx)(y.a,{src:p===Ke.CANCELLED||p===Ke.NOT_PLACED||p===Ke.INITIATED?jr:p>=Ke.PLACED?mr:pr}),Object(b.jsx)("h3",{className:"proximanova-medium f-s-16 lh-26",children:"Bike Assignment"}),p===Ke.PLACED&&Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(V.a,{className:"btn secondary-btn",onClick:this.handleAssignBikeModal,children:"Reassign Bike"})})]})}),Object(b.jsx)(Zt.a,{sm:3,children:Object(b.jsxs)("div",{className:"timeline ".concat(p===Ke.CANCELLED?"cancelled":p>=Ke.RETURN_PAYMENT_PENDING?"success":""),children:[Object(b.jsx)(y.a,{src:p===Ke.CANCELLED?jr:p>=Ke.PICKED_UP?mr:pr}),Object(b.jsx)("h3",{className:"proximanova-medium f-s-18 lh-26",children:"Pickup"}),Object(b.jsx)("h6",{className:"proximanova-regular f-s-14 lh-21 op-6",children:Xe()(null===l||void 0===l?void 0:l.start_datetime).format("DD MMM YYYY hh:mm a")}),p===Ke.PLACED&&at(g.startdDate,new Date)&&Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(V.a,{className:"btn secondary-btn",onClick:function(){return c.handleChangeOrderStatusModal(1)},children:"Mark Picked up"})})]})}),Object(b.jsx)(Zt.a,{sm:3,children:Object(b.jsxs)("div",{className:"timeline last ".concat(p===Ke.CANCELLED?"cancelled":""),children:[Object(b.jsx)(y.a,{src:p===Ke.CANCELLED?jr:p>=Ke.RETURN_PAYMENT_PENDING?mr:br}),Object(b.jsx)("h3",{className:"proximanova-medium f-s-18 lh-26",children:"Return"}),Object(b.jsx)("h6",{className:"proximanova-regular f-s-14 lh-21 op-6",children:Xe()(null===l||void 0===l?void 0:l.end_datetime).format("DD MMM YYYY hh:mm a")}),(null===l||void 0===l?void 0:l.extension_info)&&l.extension_info.payment_status===Ge&&Object(b.jsx)("p",{className:"order-status proximanova-regular f-s-16 lh-24 extended",children:"Extended"}),p===Ke.PICKED_UP&&at(g.endDate,new Date)&&Object(b.jsx)(V.a,{className:"btn secondary-btn",onClick:function(){return c.handleChangeOrderStatusModal(2)},children:"Mark Return"})]})})]})}),Object(b.jsx)("div",{className:"header m-t-5",children:Object(b.jsx)("div",{className:"red-hat-display-bold f-s-12 grey-757",children:"Customer Details"})}),Object(b.jsx)("hr",{}),Object(b.jsx)("div",{className:"basic-details",children:Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Name"}),Object(b.jsx)("h3",{className:"regular lg",children:null===l||void 0===l||null===(s=l.customer)||void 0===s?void 0:s.first_name})]})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Contact Number"}),Object(b.jsx)("h3",{className:"regular lg",children:null===l||void 0===l||null===(i=l.customer)||void 0===i?void 0:i.mobile})]})}),Object(b.jsx)(Zt.a,{md:4,children:Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("h4",{className:"regular",children:"Email"}),Object(b.jsx)("h3",{className:"regular lg",children:null===l||void 0===l||null===(r=l.customer)||void 0===r?void 0:r.email})]})})]})})]})})}),Object(b.jsx)(Zt.a,{sm:5,children:Object(b.jsx)("div",{className:"add-edit-customer-wrapper",children:Object(b.jsx)("div",{className:"booking-content",children:Object(b.jsx)(ur,{duration:o,pricing:d,discountAmount:h||"0",pointsApplied:u,points:m||"0",isViewBooking:!0,handleAddPenaltyModal:this.handleAddPenaltyModal,totalPenaltyAmount:j||!1,extensionInfo:l&&(null===l||void 0===l?void 0:l.extension_info),cancellationFee:l&&(null===l||void 0===l?void 0:l.cancellation_fee)+l.cancellation_tax,extraCharges:l&&(null===l||void 0===l?void 0:l.extra_charges),status:p})})})})]})]})}}]),a}(n.Component),Ar=Object(o.b)((function(e){return Object(g.a)({},e)}),{})(kr),_r=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).setKey=function(e){n.setState({selectedTab:e,page:1,conditions:[{key:"SEARCH_BY_STATUS_IN",value:"default"===e?[30]:[40]}]},(function(){$a(Object(u.a)(n))})),n.props.history.replace({search:"?tab=".concat(e,"&p=1")})},n.handleOnChange=function(e){if(xe()===Ie.FRANCHISE)n.setState({conditions:[].concat(Object(Di.a)(n.state.conditions),[{key:"SEARCH_BY_DATE_BETWEEN",value:[Xe()(e.fromDate).unix(),Xe()(e.toDate).unix()]}])},(function(){var t=new URLSearchParams;t.append("start_date",Xe()(e.fromDate).format("DD-MM-YYYY")),t.append("end_date",Xe()(e.toDate).format("DD-MM-YYYY")),ta(t,Object(u.a)(n))}));else{console.log("data",e);var t=new URLSearchParams;t.append("start_date",Xe()(e.fromDate).format("DD-MM-YYYY")),t.append("end_date",Xe()(e.toDate).format("DD-MM-YYYY")),t.append("start",0),t.append("limit",Se),ea(t,Object(u.a)(n));var a=new URLSearchParams;a.append("start_date",Xe()(e.fromDate).format("DD-MM-YYYY")),a.append("end_date",Xe()(e.toDate).format("DD-MM-YYYY")),ta(a,Object(u.a)(n))}},n.showOrders=function(e){return Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:e,columnList:[{coumnWidth:120,labelName:"Order Id",dataKey:"code",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("code"===t)return e.code}},{coumnWidth:230,labelName:"Customer Email",dataKey:"customer",className:"",isCell:!0,cell:function(e,t){var a;if("customer"===t)return null===(a=e.customer)||void 0===a?void 0:a.email}},{coumnWidth:230,labelName:"Start Time",dataKey:"start_datetime",className:"",isCell:!0,cell:function(e,t){if("start_datetime"===t)return Xe()(e.start_datetime).format("LLL")}},{coumnWidth:230,labelName:"End Time",dataKey:"end_datetime",className:"",isCell:!0,cell:function(e,t){if("end_datetime"===t)return Xe()(e.end_datetime).format("LLL")}},{coumnWidth:120,labelName:"Total Fare (\u20b9)",dataKey:"total_amount",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("total_amount"===t)return e.total_amount}},{coumnWidth:120,labelName:"Status",dataKey:"status",className:"",isCell:!0,cell:function(e,t){if("status"===t)return Ke.getText(e.status)}}],history:n.props.history,location:n.props.location,totalPages:n.state.totalPage,currentPage:n.state.page,message:"List is empty"})})},n.state={conditions:[{key:"SEARCH_BY_STATUS_IN",value:[30]}],orderRevenueReport:"",isDetail:!0,selectedTab:"default",franchiseData:[{name:"F1",totalBooking:23,totalVehicle:20,deployed:32,undeployed:22,revenue:2345},{name:"F2",totalBooking:23,totalVehicle:20,deployed:32,undeployed:22,revenue:2345}]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){$a(this)}},{key:"componentDidUpdate",value:function(e,t){var a=new URLSearchParams(e.location.search),n=parseInt(a.get("p"),10)||1,s=new URLSearchParams(this.props.location.search),i=parseInt(s.get("p"),10)||1;s.get("search");n!==i&&("default"===this.state.key||$a(this,i-1))}},{key:"render",value:function(){var e=this,t=this.state,a=(t.franchiseData,t.reportData),n=t.orderRevenueReport,s=t.bookingsList;return Object(b.jsxs)("div",{children:[Object(b.jsx)(Yt,{breadcrumb:!0,currentPage:"Company Report",title:"Report",isFilter:!1,isSearch:!1,isSettleSearch:!1,isReport:!0,onChangeMethod:function(t){return e.handleOnChange(t)}}),Object(b.jsxs)("div",{className:"report-section",children:[Object(b.jsx)("div",{className:"report-data",children:Object(b.jsxs)(ka.a,{children:[Object(b.jsx)(Zt.a,{sm:3,children:Object(b.jsxs)("div",{className:"report-box",children:[Object(b.jsx)("h4",{children:"Total Hours"}),Object(b.jsx)("h6",{children:n?parseFloat(n.total_booked_hours).toFixed(2):"NA"})]})}),Object(b.jsx)(Zt.a,{sm:3,children:Object(b.jsxs)("div",{className:"report-box",children:[Object(b.jsx)("h4",{children:"Total Bookings"}),Object(b.jsx)("h6",{children:n.total_orders||"NA"})]})}),Object(b.jsx)(Zt.a,{sm:6,children:Object(b.jsx)("div",{className:"report-box",children:Object(b.jsxs)("div",{className:"left",children:[Object(b.jsx)("h4",{children:"Total Revenue"}),Object(b.jsx)("h6",{children:n?parseFloat(n.total_platform_amount+n.total_platform_amount).toFixed(2):"NA"})]})})})]})}),Object(b.jsxs)("div",{className:"analytic-data",children:[Object(b.jsx)("div",{className:"data",children:Object(b.jsx)("h3",{className:"red-hat-display-bold f-s-20 lh-26",children:"Franchise wise data"})}),Object(b.jsxs)("div",{className:"data",children:[Object(b.jsx)("h3",{className:"red-hat-display-bold f-s-24 lh-32",children:n.total_franchise||"NA"}),Object(b.jsx)("h5",{className:"red-hat-display-medium lh-16",children:"Franchise"})]}),Object(b.jsxs)("div",{className:"data",children:[Object(b.jsx)("h3",{className:"red-hat-display-bold f-s-24 lh-32",children:n.total_vehicles||"NA"}),Object(b.jsx)("h5",{className:"red-hat-display-medium lh-16",children:"Total vehicle"})]}),Object(b.jsxs)("div",{className:"data",children:[Object(b.jsx)("h3",{className:"red-hat-display-bold f-s-24 lh-32",children:n?parseFloat(n.avg_booked_hours).toFixed(2):"NA"}),Object(b.jsx)("h5",{className:"red-hat-display-medium lh-16",children:"Average Booking Hours"})]}),Object(b.jsxs)("div",{className:"data",children:[Object(b.jsx)("h3",{className:"red-hat-display-bold f-s-24 lh-32",children:n?parseFloat(n.total_booked_hours).toFixed(2):"NA"}),Object(b.jsx)("h5",{className:"red-hat-display-medium lh-16",children:"Total Booked Hours"})]})]}),xe()===Ie.FRANCHISE?Object(b.jsx)("div",{className:"tabular-data",children:Object(b.jsxs)(Kt.a,{id:"controlled-tab-example",activeKey:this.state.selectedTab,onSelect:function(t){return e.setKey(t)},className:"pricing-tabs",children:[Object(b.jsx)(Wt.a,{eventKey:"default",title:"Upcoming",children:this.showOrders(s)}),Object(b.jsx)(Wt.a,{eventKey:"30",title:"Return",children:this.showOrders(s)})]})}):Object(b.jsx)("div",{className:"tabular-data",children:Object(b.jsx)("div",{className:"custom-table-wrapper",children:Object(b.jsx)(Xt,{tableData:a,columnList:[{coumnWidth:280,labelName:"Franchise Name",dataKey:"franchise_name",className:"red-hat-display-bold",isCell:!0,cell:function(e,t){if("franchise_name"===t)return e.franchise_name}},{coumnWidth:250,labelName:"Total Bookings",dataKey:"total_orders",className:"",isCell:!0,cell:function(e,t){if("total_orders"===t)return e.total_orders}},{coumnWidth:300,labelName:"Total Vehicle",dataKey:"total_vehicles",className:"",isCell:!0,cell:function(e,t){if("total_vehicles"===t)return e.total_vehicles}},{coumnWidth:350,labelName:"Average Booked Hours",dataKey:"avg_booked_hours",className:"",isCell:!0,cell:function(e,t){if("avg_booked_hours"===t)return parseFloat(e.avg_booked_hours).toFixed(2)}},{coumnWidth:350,labelName:"Total Booked Hours",dataKey:"total_booked_hours",className:"",isCell:!0,cell:function(e,t){if("total_booked_hours"===t)return parseFloat(e.total_booked_hours).toFixed(2)}},{coumnWidth:350,labelName:"Revenue",dataKey:"total_platform_amount",className:"",isCell:!0,cell:function(e,t){if("total_platform_amount"===t)return parseFloat(e.total_platform_amount+e.total_franchise_amount).toFixed(2)}}],history:this.props.history,location:this.props.location,totalPages:this.state.totalPage,currentPage:this.state.page,message:"List is empty"})})})]})]})}}]),a}(n.Component),Er={getReportsFranchiseWiseApi:ea,getOrderRevenueReportApi:ta},wr=Object(o.b)((function(e){return{settlementState:e.SettlementState}}),Er)(_r),Ir=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),n=t.call(this,e);var s=e&&e.match.params.id;return n.state={id:s},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(Yt,{backArrowBtn:!0,history:this.props.history,breadcrumb:!0,currentPage:"View Vehicle Location",title:"View Vehicle Location"}),Object(b.jsx)("div",{className:"order-details-wrapper add-edit-customer-wrapper",children:Object(b.jsx)("div",{className:"content view-detail-page",children:Object(b.jsx)("iframe",{src:"http://13.233.206.195:3000/d-solo/nnH0uV57z/bike-details?orgId=2&var-Bike=".concat(this.state.id,"&refresh=10s&from=1657153417250&to=1657175017250&panelId=5"),width:"100%",height:"600",frameBorder:"0"})})})]})}}]),a}(n.Component),Lr=[{path:["/customers"],name:"Customers",type:Bi,component:ri},{path:"/login",name:"Login",type:Gn.b,component:Si},{path:"/customer/:customerId",name:"Customer Details",type:Bi,component:gi},{path:["/add-customer","/edit-customer"],name:"Add Edit Customer",type:Bi,component:Oi},{path:"/iot",name:"IOT",type:Bi,component:Fs},{path:["/add-iot","/edit-iot/:deviceId"],name:"Add Edu=it IOT",type:Bi,component:Ws},{path:"/vehicles",name:"Vehicles",type:Bi,component:Qs},{path:["/add-vehicle","/edit-vehicle"],name:"Add Edit Vehicle",type:Bi,component:ti},{path:"/view-vehicle-location/:id",name:"View Vehicle Location",type:Bi,component:Ir},{path:"/battery",name:"Battery",type:Bi,component:Os},{path:["/add-battery","/edit-battery/:batteryId"],name:"Add Edit Battery",type:Bi,component:ks},{path:"/master/battery-models",name:"Battery Models",type:Bi,component:In},{path:["/master/battery-models/add-battery-model","/master/battery-models/edit-battery-model/:id"],name:"Add Battery Model",type:Bi,component:Rn},{path:"/master/bike-models",name:"Bike Models",type:Bi,component:Ls},{path:["/master/bike-models/add-bike-model","/master/bike-models/edit-bike-model"],name:"Add Edit Bike Models",type:Bi,component:Rs},{path:["/master/bike-models/view-details/:modelId"],name:"View Details",type:Bi,component:ir},{path:["/master/bike-models/view-details/:modelId/add-edit-pricing"],name:"AddEditVehiclePricing",type:Bi,component:ar},{path:"/master/iot-models",name:"Iot Models",type:Bi,component:Fn},{path:["/master/iot-models/add-iot-model","/master/iot-models/edit-iot-model"],name:"Add Edit Iot Models",type:Bi,component:Kn},{path:"/user-management/dealer",name:"Dealer",type:Bi,component:Zn},{path:"/user-management/dealer/add-dealer",name:"Add edit Dealer",type:Bi,component:os},{path:"/user-management/oem",name:"Oem",type:Bi,component:ts},{path:"/user-management/oem/add-oem",name:"Add edit Oem",type:Bi,component:ds},{path:"/user-management/oem/:oemId",name:"Oem Details",type:Bi,component:bs},{path:"/user-management/users",name:"User",type:Bi,component:ss},{path:["/user-management/users/add-user","/user-management/users/edit-user/:userId"],name:"Add edit User",type:Bi,component:ms},{path:["/user-management/users/view-user/:userId"],name:"Add edit User",type:Bi,component:gs},{path:["/reset-password"],name:"Reset Password",type:Gn.b,component:Ui},{path:"/location-master/country",name:"Country",type:Bi,component:vn},{path:["/location-master/area/add-area","/location-master/area/edit-area/:areaId"],name:"Add Edit Area",type:Bi,component:_n},{path:"/location-master/city",name:"City",type:Bi,component:yn},{path:"/location-master/area",name:"Area",type:Bi,component:Sn},{path:"/coupons",name:"Coupons",type:Bi,component:cn},{path:["/coupons/add-coupon","/coupons/edit-coupon/:couponId"],name:"Add Coupons",type:Bi,component:Yi},{path:"/booking-management",name:"Bookings",type:Bi,component:tn},{path:"/booking-management/view-booking/:id",name:"Bookings",type:Bi,component:Ar},{path:"/booking-management/add-booking",name:"Add Bookings",type:Bi,component:$i},{path:["/","/franchise"],name:"Franchise",type:Bi,component:xa},{path:"/franchise/view-franchise/:franchiseId",name:"View Franchise",type:Bi,component:Va},{path:["/franchise/add-franchise","/franchise/edit-franchise/:franchiseId"],name:"Add edit Franchise",type:Bi,component:Da},{path:"/franchise-location",name:"FranchiseLocation",type:Bi,component:za},{path:["/franchise-location/add-franchise-location","/franchise-location/edit-franchise-location/:locationId"],name:"Add Edit Franchise Location",type:Bi,component:Za},{path:"/franchise-location/view-franchise-location/:locationId",name:"ViewFranchiseLocation",type:Bi,component:cr},{path:"/settlement",name:"Settlement",type:Bi,component:ba},{path:"/report",name:"Report",type:Bi,component:wr},{path:"/profile",name:"Profile",type:Bi,component:dr},{path:"/sandbox",name:"Sandox",type:Gn.b,component:Ti}];a(298);var Dr=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(N.a,{children:Object(b.jsx)(Gn.d,{children:Lr.map((function(e,t){return Object(b.jsx)(e.type,{exact:!0,path:e.path,component:e.component},t)}))})}),Object(b.jsx)(gt.a,{hideProgressBar:!0})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(299),a(300),a(301),a(302),a(303),a(304);r.a.render(Object(b.jsx)(o.a,{store:Object(c.c)(Li,Object(c.a)(l.a)),children:Object(b.jsx)(Dr,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[305,1,2]]]);
//# sourceMappingURL=main.ccb3b376.chunk.js.map